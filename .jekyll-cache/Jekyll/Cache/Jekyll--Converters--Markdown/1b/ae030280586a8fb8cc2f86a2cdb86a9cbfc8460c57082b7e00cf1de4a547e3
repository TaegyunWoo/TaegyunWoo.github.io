I"è1<p><br/><br/></p>
<h1 id="codespringboottestcode"><code>@SpringBootTest</code></h1>
<h2 id="section">ê°œìš”</h2>
<h3 id="codespringboottestcode-"><code>@SpringBootTest</code> ì• ë„ˆí…Œì´ì…˜ì´ë€?</h3>
<ul>
<li>
<p><code>@SpringBootTest</code>ëŠ” í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê¸°ë³¸ì ì¸ ìŠ¤í”„ë§ ë¶€íŠ¸ í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.</p>
<blockquote>
<p>í†µí•© í…ŒìŠ¤íŠ¸: DB ì ‘ê·¼ ë“± ë³µí•©ì ì¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” í–‰ìœ„ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸</p>
</blockquote>
</li>
<li>
<p><code>@SpringBootTest</code> ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ìŠ¤í”„ë§ë¶€íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ê±°ì˜ ëª¨ë“  ì˜ì¡´ì„±ì„ ì œê³µë°›ì„ ìˆ˜ ìˆë‹¤.</p>
</li>
</ul>
<br/>
<h3 id="junit-4-codespringboottestcode-">JUnit 4ì—ì„œ <code>@SpringBootTest</code> ì‚¬ìš©í•˜ê¸°</h3>
<ul>
<li>JUnit 4ì—ì„œ <code>@SpringBootTest</code> ë¥¼ ì‚¬ìš©í•  ë•, <strong>ë°˜ë“œì‹œ <code>@RunWith(SpringRunner.class)</code> ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.</strong></li>
</ul>
<br/>
<h3 id="junit-5-codespringboottestcode-">JUnit 5ì—ì„œ <code>@SpringBootTest</code> ì‚¬ìš©í•˜ê¸°</h3>
<ul>
<li>JUnit 4ì˜ ê²½ìš°ì™€ëŠ” ë‹¤ë¥´ê²Œ, <code>@SpringBootTest</code> ë§Œ ì‚¬ìš©í•´ë„ ëœë‹¤.</li>
<li>ì¦‰, <code>@ExtendWith(SpringExtension.class)</code> ë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ì—†ë‹¤.</li>
</ul>
<p><br/><br/></p>
<h2 id="codespringboottestcode--"><code>@SpringBootTest</code> ì˜ ê¸°ëŠ¥</h2>
<h3 id="section-1">í”„ë¡œí¼í‹° ì§ì ‘ ì¶”ê°€</h3>
<ul>
<li><strong><code>@SpringBootTest</code> ê°€ ì œê³µí•˜ëŠ” ì†ì„± <code>properties</code> ë¥¼ í†µí•´, í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì— íŠ¹ì • ê°’ì„ ì „ë‹¬í•´ì¤„ ìˆ˜ ìˆë‹¤.</strong></li>
<li>â€œkey=valueâ€ í˜•ì‹ìœ¼ë¡œ ì„¤ì •í•œë‹¤.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span><span class="o">(</span>
	<span class="n">properties</span> <span class="o">=</span> <span class="o">{</span>
		<span class="s">"my.value=MY_VALUE"</span><span class="o">,</span>
		<span class="s">"test=TEST"</span>
	<span class="o">}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
  <span class="nd">@Value</span><span class="o">(</span><span class="s">"${my.value}"</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">a</span><span class="o">;</span> <span class="c1">// =&gt; MY_VALUE</span>
<p><span class="nd">@Value</span><span class="o">(</span><span class="s">â€${test}â€</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">b</span><span class="o">;</span> <span class="c1">// =&gt; TEST</span></p>
<p><span class="nd">@DisplayName</span><span class="o">(</span><span class="s">â€œê°’ í™•ì¸â€</span><span class="o">)</span>
<span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">â€œa = â€œ</span> <span class="o">+</span> <span class="n">a</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">â€œb = â€œ</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<br/></p>
<h3 id="section-2">ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ ë³€ê²½</h3>
<ul>
<li>í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code>/src/main/resources/application.properties</code> ì„ ì„¤ì •ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</li>
<li><strong><code>properties</code> ì†ì„±ì„ í†µí•´, ìŠ¤í”„ë§ì˜ ì„¤ì •íŒŒì¼ì„ <code>application.properties</code> ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê²ƒìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</strong></li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span><span class="o">(</span>
  <span class="n">properties</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s">"spring.config.location=classpath:application-test.properties"</span>
	<span class="o">}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{}</span>
<span class="o">}</span>
</code></pre></div></div>
<br/>
<h3 id="section-3">ì›¹ í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„ íƒ</h3>
<ul>
<li>í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Mock ì„œë¸”ë¦¿ì„ í…ŒìŠ¤íŠ¸ í™˜ê²½ìœ¼ë¡œ ì„ íƒí•œë‹¤.
<ul>
<li>Mock ì„œë¸”ë¦¿ì´ë€
<ul>
<li>ë‚´ì¥ëœ ì‹¤ì œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì•„ë‹Œ ê°€ì§œ ì„œë¸”ë¦¿</li>
</ul>
</li>
<li>Mock ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
<ul>
<li><strong>ë¸Œë¼ìš°ì €ì—ì„œÂ ìš”ì²­ê³¼Â ì‘ë‹µì„Â ì˜ë¯¸í•˜ëŠ”Â ê°ì²´ë¡œì„œÂ ControllerÂ í…ŒìŠ¤íŠ¸ì„Â ìš©ì´í•˜ê²ŒÂ í•´ì¤€ë‹¤.</strong></li>
</ul>
</li>
<li><code>@AutoConfigureMockMvc</code>
<ul>
<li><code>@AutoConfigureMockMvc</code> ê³¼ MockMvcì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, ë³„ë„ì˜ ì„¤ì •ì—†ì´ MockMvcë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong><code>webEnviroment</code> ì†ì„±ì„ í†µí•´, í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ MockMvcë¡œ êµ¬ë™í•  ê²ƒì¸ì§€, ì‹¤ì œ MVCë¡œ êµ¬ë™í•  ê²ƒì¸ì§€ ì„ íƒí•  ìˆ˜ ìˆë‹¤.</strong>
<ul>
<li><code>webEnviroment=WebEnvironment.Mock</code> â‡’ MockMvc</li>
<li><code>SpringBootTest.WebEnvironment.RANDOM_PORT</code> â‡’ ì‹¤ì œ ë‚´ì¥ ì„œë¸”ë¦¿</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>MockMvc</code> ê°ì²´ì˜ ë©”ì„œë“œ
<ul>
<li><code>perform()</code>
<ul>
<li>í•´ë‹¹ ë©”ì„œë“œë¥¼ í†µí•´, ë¸Œë¼ìš°ì €ì—ì„œ ì„œë²„ì— URL ìš”ì²­ì„ í•˜ë“¯ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</li>
<li><code>RequestBuilder</code> ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</li>
<li><code>RequestBuilder</code> ê°ì²´ëŠ” <code>MockMvcRequestBuilder</code>ì˜ ì •ì  ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ ìƒì„±í•œë‹¤.</li>
<li><code>MockMvcRequestBuilder</code> ì€ GET, POST, PUT, DELETE ìš”ì²­ ë°©ì‹ê³¼ ë§¤í•‘ë˜ëŠ” <code>get()</code>, <code>post()</code>, <code>put()</code>, <code>delete()</code> ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.</li>
</ul>
</li>
<li><code>andExpect()</code>
<ul>
<li><code>perform()</code> ì„ í†µí•´ ì „ì†¡í•œ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ê²€ì¦í•œë‹¤.</li>
<li>ì‘ë‹µ ìƒíƒœ ì½”ë“œ ê²€ì¦: <code>status()</code></li>
<li>ë·°/ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²€ì¦: <code>view()</code></li>
<li>ëª¨ë¸ ì •ë³´ ê²€ì¦: <code>model()</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ MockMvcë¡œ ì„ íƒ</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@AutoConfigureMockMvc</span>
<span class="nd">@SpringBootTest</span><span class="o">(</span>
  <span class="n">webEnvironment</span> <span class="o">=</span> <span class="nc">SpringBootTest</span><span class="o">.</span><span class="na">WebEnvironment</span><span class="o">.</span><span class="na">MOCK</span>
<span class="o">)</span>
<span class="kd">class</span> <span class="nc">ArticleMapperTest</span> <span class="o">{</span>
<p><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span></p>
<p><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
<span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">â€/board/1â€</span><span class="o">))</span>
<span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">());</span>
<span class="o">}</span></p>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ë‚´ë¶€ ì„œë¸”ë¦¿(ì‹¤ì œ MVC)ë¡œ ì„ íƒ</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span><span class="o">(</span>
  <span class="n">webEnvironment</span> <span class="o">=</span> <span class="nc">SpringBootTest</span><span class="o">.</span><span class="na">WebEnvironment</span><span class="o">.</span><span class="na">RANDOM_PORT</span>
<span class="o">)</span>
<span class="kd">class</span> <span class="nc">ArticleMapperTest</span> <span class="o">{</span>
<p><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
<span class="c1">//í…ŒìŠ¤íŠ¸ì½”ë“œ</span>
<span class="o">}</span></p>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
</ul>
<p><br/><br/></p>
<h2 id="codetransactionalcode-">ì°¸ê³ : <code>@Transactional</code> ì• ë„ˆí…Œì´ì…˜</h2>
<h3 id="codetransactionalcode--1"><code>@Transactional</code> ì• ë„ˆí…Œì´ì…˜ì´ë€?</h3>
<ul>
<li>íŠ¸ëœì­ì…˜ í…ŒìŠ¤íŠ¸ì‹œ, í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ DBì„œë²„ì— ë‚¨ê¸°ì§€ ì•Šë„ë¡ Rollback ì‹œí‚¤ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤.</li>
<li><strong>RAMDOM_PORT ë“±ì„ í†µí•´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì‹œ, ë³„ë„ì˜ ì“°ë ˆë“œì—ì„œ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— Rollbackë˜ì§€ ì•ŠëŠ”ë‹¤.</strong></li>
</ul>
<br/>
<h3 id="section-4">ì ìš© ì½”ë“œ</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@AutoConfigureMybatis</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ArticleMapperTest</span> <span class="o">{</span>
<p><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">ArticleMapper</span> <span class="n">articleMapper</span><span class="o">;</span></p>
<p><span class="nd">@Transactional</span>
<span class="nd">@DisplayName</span><span class="o">(</span><span class="s">â€œInsert &amp; Select í…ŒìŠ¤íŠ¸â€</span><span class="o">)</span>
<span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
<span class="nc">Article</span> <span class="n">article</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Article</span><span class="o">();</span>
<span class="n">article</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">â€œTestâ€</span><span class="o">);</span>
<span class="n">article</span><span class="o">.</span><span class="na">setDateTime</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
<span class="n">article</span><span class="o">.</span><span class="na">setWriter</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">article</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="s">â€œTest Contentâ€</span><span class="o">);</span>
<span class="n">articleMapper</span><span class="o">.</span><span class="na">insertArticle</span><span class="o">(</span><span class="n">article</span><span class="o">);</span></p>
<pre><code>&lt;span class=&quot;nc&quot;&gt;Article&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selectArticle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;articleMapper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;article&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;article&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selectArticle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<br></p>
<hr />
<br>
<ul>
<li><em>ë³¸ ê²Œì‹œê¸€ì€ ê°“ëŒ€í¬ë‹˜ì˜ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.</em><br />
<a href="https://goddaehee.tistory.com/211">ê°“ëŒ€í¬ì˜ ì‘ì€ê³µê°„</a></li>
</ul>
:ET