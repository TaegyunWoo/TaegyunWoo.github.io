I"0™<p><br/><br/></p>
<ul>
<li>ì´ì „ ê²Œì‹œê¸€
<ol>
<li><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_LoginBasicProject">ë¡œê·¸ì¸ì²˜ë¦¬ - ê¸°ë³¸ í”„ë¡œì íŠ¸ ì„¤ì •</a></li>
</ol>
</li>
</ul>
<p><br/><br/></p>
<h1 id="section">ì¿ í‚¤</h1>
<h2 id="section-1">ê°œìš”</h2>
<ul>
<li>ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ, ì¿ í‚¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
<li>ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´, ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<br/>
<h3 id="section-2">ëª©í‘œ</h3>
<ul>
<li>ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ í•˜ë©´, ë¡œê·¸ì¸ ìƒíƒœê°€ ìœ ì§€ëœë‹¤.</li>
<li>ë¡œê·¸ì¸ ì§í›„, íšŒì› ì „ìš© í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ëœë‹¤.</li>
</ul>
<p><br/><br/></p>
<h2 id="section-3">ì¿ í‚¤ ë™ì‘ ì›ë¦¬</h2>
<ul>
<li>
<p><strong>ì¿ í‚¤ ìƒì„±</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2029.png" alt="ì¿ í‚¤ ìƒì„±" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2030.png" alt="í´ë¼ì´ì–¸íŠ¸ ìš”ì²­" /></p>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-4">ì¿ í‚¤ì˜ ì¢…ë¥˜</h2>
<p>ì¿ í‚¤ì˜ ì¢…ë¥˜ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>
<ul>
<li><strong>ì˜ì† ì¿ í‚¤</strong>
<ul>
<li>ë§Œë£Œ ë‚ ì§œë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ë‚ ì§œê¹Œì§€ ìœ ì§€ëœë‹¤.</li>
</ul>
</li>
<li><strong>ì„¸ì…˜ ì¿ í‚¤</strong>
<ul>
<li>ë§Œë£Œ ë‚ ì§œë¥¼ ìƒëµí•˜ë©´ ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œ ê¹Œì§€ë§Œ ìœ ì§€ëœë‹¤.</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-5">ì¿ í‚¤ì™€ ë³´ì•ˆ ë¬¸ì œ</h2>
<p>ì¿ í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì¸ Idë¥¼ ì„œë²„ì— ì „ë‹¬í•˜ë©´, ë¡œê·¸ì¸ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì—¬ê¸°ì—ëŠ” ë³´ì•ˆ ë¬¸ì œê°€ ìˆë‹¤.</p>
<br/>
<h3 id="section-6">ë³´ì•ˆ ë¬¸ì œ</h3>
<ul>
<li><strong>ì¿ í‚¤ ê°’ì´ ì„ì˜ë¡œ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.</strong>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ ì¿ í‚¤ë¥¼ ê°•ì œë¡œ ë³€ê²½í•˜ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ëœë‹¤.</li>
</ul>
</li>
<li><strong>ì¿ í‚¤ì— ë³´ê´€ëœ ì •ë³´ëŠ” í›”ì³ê°ˆ ìˆ˜ ìˆë‹¤.</strong>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ì˜ PCê°€ í„¸ë ¤ì„œ, ì¿ í‚¤ ì •ë³´ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
<li><strong>í•´ì»¤ê°€ ì¿ í‚¤ë¥¼ í•œë²ˆ í›”ì¹˜ë©´ í‰ìƒ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</strong>
<ul>
<li>ì¿ í‚¤ì— ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ í•´ì»¤ê°€ ê³„ì†í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-7">ëŒ€ì•ˆ</h3>
<ul>
<li><strong>ì¿ í‚¤ì— ì¤‘ìš”í•œ ê°’(ì‚¬ìš©ì ì •ë³´ ë“±)ì„ ë…¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤. ì‚¬ìš©ì ë³„ë¡œ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì„ì˜ì˜ í† í°ì„ ë…¸ì¶œì‹œí‚¨ í›„, ì„œë²„ì—ì„œ í† í°ê³¼ ì‚¬ìš©ì idë¥¼ ë§¤í•‘í•´ì„œ ì¸ì‹í•œë‹¤.</strong></li>
<li><strong>í† í°ì€ í•´ì»¤ê°€ ì„ì˜ì˜ ê°’ì„ ë„£ì–´ë„ ì°¾ì„ ìˆ˜ ì—†ë„ë¡ ì˜ˆìƒ ë¶ˆê°€ëŠ¥ í•´ì•¼ í•œë‹¤.</strong>
<ul>
<li>(ë¬¸ì œ ì˜ˆ. â€œí† í°=1â€ì¼ë•Œ, â€œí† í°=2â€ë¥¼ ë„£ìœ¼ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ê³„ì •ì— ì ‘ê·¼í•  ìˆ˜ ìˆê² ë‹¤! )</li>
</ul>
</li>
<li><strong>í† í° ë§Œë£Œì‹œê°„ì„ ì§§ê²Œ ìœ ì§€í•˜ì—¬, í•´ì»¤ê°€ í„¸ì–´ê°€ë„ ì‹œê°„ì´ ì§€ë‚˜ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.</strong></li>
</ul>
<p><br/><br/><br/></p>
<h1 id="section-8">ì„¸ì…˜</h1>
<h2 id="section-9">ê°œìš”</h2>
<ul>
<li>ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´, ì‹¬ê°í•œ ë³´ì•ˆ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.</li>
<li>ì„¸ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<p><br/><br/></p>
<h2 id="section-10">ì„¸ì…˜ ë™ì‘ ì›ë¦¬</h2>
<ul>
<li>
<p><strong>ë¡œê·¸ì¸</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2031.png" alt="ë¡œê·¸ì¸" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ì„¸ì…˜ ìƒì„±</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2032.png" alt="ì„¸ì…˜ ìƒì„±" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ì„¸ì…˜ idë¥¼ ì¿ í‚¤ë¡œ ì „ë‹¬ (í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ì „ë‹¬)</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2033.png" alt="í´ë¼ì´ì–¸íŠ¸ì¸¡ì „ë‹¬" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ì„¸ì…˜ idë¥¼ ì¿ í‚¤ì—ì„œ ì „ë‹¬ (ì„œë²„ ì¸¡ì— ì „ë‹¬)</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2034.png" alt="ì„œë²„ì¸¡ì „ë‹¬" /></p>
</li>
</ul>
<br/>
<h3 id="section-11">ì£¼ìš” í¬ì¸íŠ¸</h3>
<ul>
<li><strong>íšŒì› ê´€ë ¨ ì •ë³´ëŠ” ì „í˜€ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•˜ì§€ ì•Šê³ , ì˜¤ì§ ì„œë²„ì—ì„œë§Œ ê´€ë¦¬í•œë‹¤.</strong>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì¿ í‚¤ê°€ í„¸ë ¤ë„, ê±°ê¸°ì—ëŠ” ì¤‘ìš”í•œ ì •ë³´ê°€ ì—†ë‹¤.</li>
</ul>
</li>
<li><strong>ì¶”ì • ë¶ˆê°€ëŠ¥í•œ ì„¸ì…˜ idë§Œ ì¿ í‚¤ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.</strong>
<ul>
<li>í•˜ë‚˜ì˜ ì„¸ì…˜ idì„ í†µí•´, ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì„¸ì…˜ idë¥¼ ìœ ì¶”í•  ìˆ˜ ì—†ë‹¤.</li>
</ul>
</li>
<li><strong>ì„¸ì…˜ì˜ ë§Œë£Œì‹œê°„ì„ ì§§ê²Œ ìœ ì§€í•œë‹¤.</strong>
<ul>
<li>ì„¸ì…˜ idê°€ í„¸ë ¤ë„, ì‹œê°„ì´ ì§€ë‚˜ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-12">ë¡œê·¸ì¸ ì²˜ë¦¬: ì„¸ì…˜ ì§ì ‘ êµ¬í˜„</h2>
<blockquote>
<p><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_LoginBasicProject#1">ì´ì „ì— ì‘ì„±í•´ë‘” í”„ë¡œì íŠ¸</a>ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•œë‹¤.</p>
</blockquote>
<p>ë¨¼ì € ì„¸ì…˜ì„ ì§ì ‘ êµ¬í˜„í•´ë³´ê³ , ê·¸ ë‹¤ìŒ ìë°”ì™€ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ì„¸ì…˜ì„ ì‚¬ìš©í•´ë³´ì.</p>
<br/>
<h3 id="section-13">êµ¬í˜„í•  ê¸°ëŠ¥</h3>
<ul>
<li><strong>ì„¸ì…˜ ìƒì„±</strong>
<ul>
<li>sessionId ìƒì„± (ì„ì˜ì˜ ì¶”ì • ë¶ˆê°€ëŠ¥í•œ ëœë¤ ê°’)</li>
<li>ì„¸ì…˜ ì €ì¥ì†Œì— sessionIdì™€ ë³´ê´€í•  ê°’ ì €ì¥</li>
<li>ì‘ë‹µì¿ í‚¤ë¥¼ ìƒì„±í•´ì„œ sessionId ê°’ì„ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>ì„¸ì…˜ ì¡°íšŒ</strong>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­(ì „ì†¡)í•œ sessionId ì¿ í‚¤ì˜ ê°’ìœ¼ë¡œ, ì„¸ì…˜ ì €ì¥ì†Œì— ë³´ê´€í•œ ê°’ ì¡°íšŒ</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>ì„¸ì…˜ ë§Œë£Œ</strong>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ sessionId ì¿ í‚¤ì˜ ê°’ìœ¼ë¡œ, ì„¸ì…˜ ì €ì¥ì†Œì— ë³´ê´€í•œ sessionIdì™€ ê°’ ì œê±°</li>
</ul>
</li>
</ul>
<br/>
<h3 id="codesessionmanagercode-">ì„¸ì…˜ ê¸°ëŠ¥ êµ¬í˜„: <code>SessionManager</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SessionManager</span> <span class="o">{</span></p>
<p><span class="c1">//í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•  ì„¸ì…˜ id ê°’ì˜ Key ê°’</span>
<span class="c1">//(mySessionId, ì„¸ì„ id)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">SESSION_COOKIE_NAME</span> <span class="o">=</span> <span class="s">â€œmySessionIdâ€</span><span class="o">;</span></p>
<p><span class="c1">//ì„¸ì…˜ ì €ì¥ì†Œ</span>
<span class="c1">//CocurrentHashMap =&gt; ë™ì‹œì„± ë¬¸ì œ í•´ê²°</span>
<span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">sessionStorage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConcurrentHashMap</span><span class="o">&lt;&gt;();</span></p>
<p><span class="cm">/*
ì„¸ì…˜ ìƒì„±
*/</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">createSession</span><span class="o">(</span><span class="nc">Object</span> <span class="n">value</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
<span class="nc">String</span> <span class="n">sessionId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span></p>
<pre><code>  &lt;span class=&quot;c1&quot;&gt;//ì„¸ì…˜ ì €ì¥ì†Œì— ì €ì¥&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sessionStorage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sessionId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//ì„¸ì…˜ idë¥¼ ì¿ í‚¤ë¡œ ì‘ë‹µ&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;Cookie&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cookie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cookie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SESSION_COOKIE_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;cookie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//ê²½ë¡œ ì„¤ì •&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addCookie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cookie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
</code></pre>
<p><span class="o">}</span></p>
<p><span class="cm">/*
ì„¸ì…˜ ì¡°íšŒ
*/</span>
<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">getSession</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
<span class="nc">Cookie</span><span class="o">[]</span> <span class="n">cookies</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getCookies</span><span class="o">();</span>
<span class="nc">Cookie</span> <span class="n">sessionIdCookie</span> <span class="o">=</span> <span class="n">findSessionIdCookie</span><span class="o">(</span><span class="n">cookies</span><span class="o">,</span> <span class="no">SESSION_COOKIE_NAME</span><span class="o">);</span></p>
<pre><code>  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sessionIdCookie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionStorage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sessionIdCookie&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
</code></pre>
<p><span class="o">}</span></p>
<p><span class="cm">/*
ì„¸ì…˜ ë§Œë£Œ
*/</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">expire</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
<span class="nc">Cookie</span> <span class="n">sessionIdCookie</span> <span class="o">=</span> <span class="n">findSessionIdCookie</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getCookies</span><span class="o">(),</span> <span class="no">SESSION_COOKIE_NAME</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">sessionIdCookie</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
<span class="n">sessionStorage</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">sessionIdCookie</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
<span class="o">}</span>
<span class="o">}</span></p>
<p><span class="cm">/**</p>
<ul>
<li>@return í•´ë‹¹ cookieì´ë¦„ì„ ì°¾ìœ¼ë©´ cookie, ëª»ì°¾ìœ¼ë©´ null
*/</span>
<span class="kd">private</span> <span class="nc">Cookie</span> <span class="nf">findSessionIdCookie</span><span class="o">(</span><span class="nc">Cookie</span><span class="o">[]</span> <span class="n">cookies</span><span class="o">,</span> <span class="nc">String</span> <span class="n">cookieName</span><span class="o">)</span> <span class="o">{</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">:</span> <span class="n">cookies</span><span class="o">)</span> <span class="o">{</span>
<span class="k">if</span> <span class="o">(</span><span class="n">cookie</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">cookieName</span><span class="o">))</span> <span class="o">{</span>
<span class="k">return</span> <span class="n">cookie</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">}</span>
<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span></li>
</ul>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li>ì¿ í‚¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¤„ë•Œ, <code>setPath()</code> ë¥¼ í†µí•´ ê²½ë¡œë¥¼ ì§€ì •í•´ì•¼ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•œë‹¤.</li>
</ul>
<br/>
<h3 id="codelogincontrollercode-">ì„¸ì…˜ ì ìš©: <code>LoginController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * ë¡œê·¸ì¸
 */</span>
<span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/login"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">login</span><span class="o">(</span><span class="nd">@Validated</span> <span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">)</span> <span class="nc">LoginUserForm</span> <span class="n">form</span><span class="o">,</span>
                    <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">,</span>
                    <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ê²€ì¦ ì˜¤ë¥˜ì‹œ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bindingResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasErrors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ ì‹¤í–‰&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loginService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ, ì˜¤ë¸Œì íŠ¸ ì—ëŸ¬&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bindingResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrongUser&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ ì„±ê³µì‹œ&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ì„¸ì…˜ ìƒì„±&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sessionManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;redirect:/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
</code></pre>
<p><span class="o">}</span></p>
<p><span class="cm">/**</p>
<ul>
<li>
<p>ë¡œê·¸ì•„ì›ƒ
*/</span>
<span class="nd">@PostMapping</span><span class="o">(</span><span class="s">â€/logoutâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">logout</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span></p>
<p><span class="c1">//ì„¸ì…˜ ì¢…ë£Œ</span>
<span class="n">sessionManager</span><span class="o">.</span><span class="na">expire</span><span class="o">(</span><span class="n">request</span><span class="o">);</span></p>
<p><span class="k">return</span> <span class="s">â€œredirect:/â€</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div></p>
</li>
</ul>
<br/>
<h3 id="codehomecontrollercode-">ì„¸ì…˜ í™œìš©: <code>HomeController</code> í´ë˜ìŠ¤</h3>
<ul>
<li>ë¡œê·¸ì¸ëœ ì‚¬ìš©ì â‡’ ì‚¬ìš©ì ì •ë³´ í˜ì´ì§€</li>
<li>ë¡œê·¸ì¸ ì•ˆëœ ì‚¬ìš©ì â‡’ ê¸°ë³¸ home í˜ì´ì§€</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SessionManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;HomeController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;SessionManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sessionManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;home&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessionManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ X ì¼ë•Œ, ê¸°ë³¸ í™ˆí˜ì´ì§€ë¡œ&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;home&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ O ì¼ë•Œ, ì‚¬ìš©ì ì •ë³´ í˜ì´ì§€ë¡œ&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;userPage&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div>
<br/></p>
<h3 id="section-14">ê²°ê³¼</h3>
<ul>
<li>
<p><strong>ì²« ì ‘ì† (ë¡œê·¸ì¸ Xì¼ë•Œ)</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2035.png" alt="ì²« ì ‘ì†" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ë¡œê·¸ì¸</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2036.png" alt="ë¡œê·¸ì¸" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ë¡œê·¸ì¸ ì„±ê³µ</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2037.png" alt="ë¡œê·¸ì¸ ì„±ê³µ" /></p>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-15">ë¡œê·¸ì¸ ì²˜ë¦¬: ì„œë¸”ë¦¿ì´ ì œê³µí•˜ëŠ” ì„¸ì…˜</h2>
<ul>
<li>ì„œë¸”ë¦¿ì€ <code>HttpSession</code> ì´ë¼ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ì„¸ì…˜ì„ ì§€ì›í•œë‹¤.</li>
</ul>
<br/>
<h3 id="codehttpsessioncode-"><code>HttpSession</code> ì´ë€?</h3>
<ul>
<li><code>HttpSession</code> ë„ ìœ„ì—ì„œ êµ¬í˜„í•œ ê²ƒì²˜ëŸ¼ ë™ì‘í•œë‹¤.</li>
<li>ì„œë¸”ë¦¿ì„ í†µí•´ <code>HttpSession</code> ì„ ìƒì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¿ í‚¤ë¥¼ ìƒì„±í•œë‹¤.
<ul>
<li><code>JSESSIONID=ì¶”ì •ë¶ˆê°€ëŠ¥í•œê°’</code></li>
</ul>
</li>
</ul>
<br/>
<h3 id="codelogincontrollercode--1">ì„¸ì…˜ ì ìš©: <code>LoginController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">â€/memberâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginController</span> <span class="o">{</span></p>
<p><span class="kd">private</span> <span class="kd">final</span> <span class="nc">LoginService</span> <span class="n">loginService</span><span class="o">;</span></p>
<p><span class="nd">@Autowired</span>
<span class="kd">public</span> <span class="nf">LoginController</span><span class="o">(</span><span class="nc">LoginService</span> <span class="n">loginService</span><span class="o">,</span> <span class="nc">SessionManager</span> <span class="n">sessionManager</span><span class="o">)</span> <span class="o">{</span>
<span class="k">this</span><span class="o">.</span><span class="na">loginService</span> <span class="o">=</span> <span class="n">loginService</span><span class="o">;</span>
<span class="k">this</span><span class="o">.</span><span class="na">sessionManager</span> <span class="o">=</span> <span class="n">sessionManager</span><span class="o">;</span>
<span class="o">}</span></p>
<p><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">â€/loginâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">viewUserLoginForm</span><span class="o">(</span><span class="nd">@ModelAttribute</span> <span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
<span class="k">return</span> <span class="s">â€œloginâ€</span><span class="o">;</span>
<span class="o">}</span></p>
<p><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">â€/loginâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">login</span><span class="o">(</span><span class="nd">@Validated</span> <span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">â€œuserâ€</span><span class="o">)</span> <span class="nc">LoginUserForm</span> <span class="n">form</span><span class="o">,</span>
<span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">,</span>
<span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span></p>
<pre><code>  &lt;span class=&quot;c1&quot;&gt;//ê²€ì¦ ì˜¤ë¥˜ì‹œ&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bindingResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasErrors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ ì‹¤í–‰&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loginService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ, ì˜¤ë¸Œì íŠ¸ ì—ëŸ¬&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;bindingResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrongUser&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ ì„±ê³µì‹œ&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//ì„¸ì…˜ ìƒì„± í›„, ê°’ ì¶”ê°€&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;HttpSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;loginUser&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;redirect:/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
</code></pre>
<p><span class="o">}</span></p>
<p><span class="cm">/**</p>
<ul>
<li>
<p>ë¡œê·¸ì•„ì›ƒ
*/</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">â€/logoutâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">logout</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span></p>
<p><span class="c1">//ì„¸ì…˜ ì‚­ì œ</span>
<span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
<span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">invalidate</span><span class="o">();</span>
<span class="o">}</span></p>
<p><span class="k">return</span> <span class="s">â€œredirect:/â€</span><span class="o">;</span>
<span class="o">}</span></p>
</li>
</ul>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><strong><code>request.getSession(true)</code> , <code>request.getSession()</code></strong>
<ul>
<li>
<p>ì„¸ì…˜ì´ ìˆìœ¼ë©´ ê¸°ì¡´ ì„¸ì…˜ì„ ë°˜í™˜í•œë‹¤.</p>
<blockquote>
<p><strong>ì„¸ì…˜</strong>: ì´ì „ì— êµ¬í˜„í•´ë³¸ <code>sessionStorage</code> ì™€ ìœ ì‚¬í•œ ê°œë…</p>
</blockquote>
</li>
<li>
<p><strong>ì„¸ì…˜ì€ ì‚¬ìš©ìë³„ë¡œ ìƒì„±ëœë‹¤.</strong></p>
</li>
<li>
<p>ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.</p>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong><code>request.getSession(false)</code></strong>
<ul>
<li>ì„¸ì…˜ì´ ìˆìœ¼ë©´ ê¸°ì¡´ ì„¸ì…˜ì„ ë°˜í™˜í•œë‹¤.</li>
<li>ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šê³ , nullì„ ë°˜í™˜í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong><code>HttpSession</code> ì›ë¦¬</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginSession/Untitled%2038.png" alt="HttpSession" /></p>
<ul>
<li>í•˜ë‚˜ì˜ ì„¸ì…˜ì— ì—¬ëŸ¬ê°€ì§€ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="codehomecontrollercode--1">ì„¸ì…˜ í™œìš©: <code>HomeController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">prac.myPrac.controller</span><span class="o">;</span>
<p><span class="kn">import</span> <span class="nn">â€¦</span></p>
<p><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span></p>
<p><span class="kd">private</span> <span class="kd">final</span> <span class="nc">SessionManager</span> <span class="n">sessionManager</span><span class="o">;</span></p>
<p><span class="nd">@Autowired</span>
<span class="kd">public</span> <span class="nf">HomeController</span><span class="o">(</span><span class="nc">SessionManager</span> <span class="n">sessionManager</span><span class="o">)</span> <span class="o">{</span>
<span class="k">this</span><span class="o">.</span><span class="na">sessionManager</span> <span class="o">=</span> <span class="n">sessionManager</span><span class="o">;</span>
<span class="o">}</span></p>
<pre><code>&lt;span class=&quot;cm&quot;&gt;/**
 * @SessionAttribute ë¥¼ í†µí•´ ì„¸ì…˜ì— ì ‘ê·¼
 */&lt;/span&gt;
</code></pre>
<p><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">â€/â€</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">home</span><span class="o">(</span>
<span class="nd">@SessionAttribute</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">â€œloginUserâ€</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">User</span> <span class="n">user</span><span class="o">,</span>
<span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span></p>
<pre><code>  &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ X ì¼ë•Œ, ê¸°ë³¸ í™ˆí˜ì´ì§€ë¡œ&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;home&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//ë¡œê·¸ì¸ O ì¼ë•Œ, ì‚¬ìš©ì ì •ë³´ í˜ì´ì§€ë¡œ&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;userPage&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>@SessionAttribute(name = &quot;loginUser&quot; , required = false)</code>
<ul>
<li><code>request.getSession(false).getAttribute(&quot;loginUser&quot;)</code> ì™€ ë™ì¼í•œ ê¸°ëŠ¥ì„ í•œë‹¤.</li>
<li><code>@SessionAttribute</code> ëŠ” ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
<li><code>required = false</code> ëŠ” <code>user</code> ê°ì²´ì— ê°’ì„ í•„ìˆ˜ì ìœ¼ë¡œ ë°›ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ëœ»ì´ë‹¤.</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-16">ì„¸ì…˜ì˜ ë¶€ê°€ê¸°ëŠ¥</h2>
<h3 id="trackingmodes">TrackingModes</h3>
<ul>
<li>ë¡œê·¸ì¸ì„ ì²˜ìŒ ì‹œë„í•˜ë©´ URLì´ <code>jsessionid</code> ê°’ì„ í¬í•¨í•˜ê³  ìˆë‹¤.
<ul>
<li>ì˜ˆì‹œ) <code>http://localhost:8080/;jsessionid=F26137183SASD23</code></li>
</ul>
</li>
<li>ì´ê²ƒì€ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì¿ í‚¤ë¥¼ ì§€ì›í•˜ì§€ ì•Šì„ ë•Œì— ëŒ€ë¹„í•˜ì—¬ ì‘ì„±ëœ URLì´ë‹¤.</li>
<li>í•´ë‹¹ ê¸°ëŠ¥ì´ ë°”ë¡œ TrackingModes ì´ë‹¤.</li>
<li>í•´ë‹¹ ê¸°ëŠ¥ì„ ë„ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
<ul>
<li><code>application.properties</code> íŒŒì¼ì— ì‘ì„±
<ul>
<li><code>server.servlet.session.tracking-modes=cookie</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-17">ì„¸ì…˜ ì •ë³´ í™•ì¸</h3>
<ul>
<li><code>session.getId()</code>
<ul>
<li>ì„¸ì…˜Id, ì¦‰ <code>jsessionid</code> ê°’ì´ë‹¤.</li>
</ul>
</li>
<li><code>session.getMaxInactiveInterval()</code>
<ul>
<li>ì„¸ì…˜ì˜ ìœ íš¨ ì‹œê°„ (ì´ˆ ë‹¨ìœ„)</li>
</ul>
</li>
<li><code>session.getCreationTime()</code>
<ul>
<li>ì„¸ì…˜ ìƒì„±ì¼ì‹œ</li>
<li>java.util.Date íƒ€ì… ë°˜í™˜</li>
</ul>
</li>
<li><code>session.getLastAccessedTime()</code>
<ul>
<li>ì„¸ì…˜ê³¼ ì—°ê²°ëœ ì‚¬ìš©ìê°€ ìµœê·¼ì— ì„œë²„ì— ì ‘ê·¼í•œ ì‹œê°„</li>
<li>java.util.Date íƒ€ì… ë°˜í™˜</li>
</ul>
</li>
<li><code>session.isNew()</code>
<ul>
<li>ìƒˆë¡œ ìƒì„±ëœ ì„¸ì…˜ì¸ì§€, ì•„ë‹Œì§€</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-18">ì„¸ì…˜ ê¸°ë³¸ ì¢…ë£Œ ì‹œì </h3>
<ul>
<li><strong>ì„¸ì…˜ì€ ì‚¬ìš©ìê°€ ì„œë²„ì— ìµœê·¼ì— ìš”ì²­í•œ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ 30ë¶„ ì •ë„ë¥¼ ìœ ì§€í•œë‹¤.</strong>
<ul>
<li>ì„¸ì…˜ìœ ì§€ ì‹œê°„ = <code>session.getLastAccessedTime()</code> + 30ë¶„</li>
</ul>
</li>
</ul>
<br>
<hr />
<br>
<p><a href="https://inf.run/YPER"><img src="/assets/img/Inflearn_Spring_MVC2/logo.png" width="400px" height="300px"></a></p>
<ul>
<li><em>ë³¸ ê²Œì‹œê¸€ì€ ê¹€ì˜í•œë‹˜ì˜ ê°•ì˜ë¥¼ í† ëŒ€ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.</em></li>
<li><em>ë” ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì´ ê³„ì‹ ë‹¤ë©´, í•´ë‹¹ ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</em></li>
</ul>
:ET