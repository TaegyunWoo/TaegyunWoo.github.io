I"³l<p><br/><br/></p>
<ul>
<li>ì´ì „ ê²Œì‹œê¸€
<ol>
<li><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_LoginBasicProject">ë¡œê·¸ì¸ì²˜ë¦¬ - ê¸°ë³¸ í”„ë¡œì íŠ¸ ì„¤ì •</a></li>
<li><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_LoginSession">ë¡œê·¸ì¸ì²˜ë¦¬ - ì¿ í‚¤ì™€ ì„¸ì…˜</a></li>
</ol>
</li>
</ul>
<br/>
<h1 id="section">ì„œë¸”ë¦¿ í•„í„°</h1>
<h2 id="section-1">ê°œìš”</h2>
<ul>
<li>
<p><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_LoginSession">ì´ì „ ê²Œì‹œê¸€</a>ì—ì„œ ë‹¤ë£¬ í”„ë¡œì íŠ¸ì— ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì.</p>
<ul>
<li>
<p>ë·° í…œí”Œë¦¿ (<code>userPage.html</code>) - ê¸°ì¡´ ì½”ë“œ ìˆ˜ì •</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;style&gt;</span>
    <span class="nt">body</span> <span class="p">{</span>
      <span class="nl">font-size</span><span class="p">:</span> <span class="nb">larger</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;h1&gt;</span>ì‚¬ìš©ì í˜ì´ì§€<span class="nt">&lt;/h1&gt;</span>
  ì•„ì´ë””: <span class="nt">&lt;span</span> <span class="na">th:text=</span><span class="s">"${user.id}"</span><span class="nt">&gt;</span>ì‚¬ìš©ì ì•„ì´ë””<span class="nt">&lt;/span&gt;</span> <span class="nt">&lt;br/&gt;</span>
  ì´ë¦„: <span class="nt">&lt;span</span> <span class="na">th:text=</span><span class="s">"${user.name}"</span><span class="nt">&gt;</span>ì‚¬ìš©ì ì´ë¦„<span class="nt">&lt;/span&gt;</span> <span class="nt">&lt;br/&gt;</span>
<pre><code>&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ì¶”ê°€ëœ ë²„íŠ¼ --&amp;gt;&lt;/span&gt;
</code></pre>
<p><span class="nt">&lt;button</span> <span class="na">th:onclick=</span><span class="s">â€|location.href=â€™@{/service}â€™|â€</span><span class="nt">&gt;</span>ì„œë¹„ìŠ¤<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;button</span> <span class="na">th:onclick=</span><span class="s">â€|location.href=â€™@{/member/logout}â€™|â€</span><span class="nt">&gt;</span>ë¡œê·¸ì•„ì›ƒ<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div></p>
</li>
<li>
<p>ë·° í…œí”Œë¦¿ (<code>serviceOnlyForUser.html</code>)</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;h1&gt;</span>ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
</li>
<li>
<p>ì»¨íŠ¸ë¡¤ëŸ¬ (<code>OnlyUserController.java</code>)</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">prac.myPrac.controller</span><span class="o">;</span>
<p><span class="kn">import</span> <span class="nn">â€¦</span></p>
<p><span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">â€/serviceâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OnlyUserController</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@GetMapping&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewForUser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@ModelAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;serviceOnlyForUser&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
</ul>
</li>
<li>
<p>ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´, ìœ„ì™€ ê°™ì€ ì½”ë“œë¥¼ ì¶”ê°€í–ˆë‹¤.</p>
</li>
<li>
<p><strong>í•˜ì§€ë§Œ, ê¸°ëŒ€ì™€ëŠ” ë‹¬ë¦¬ URLë§Œ ì•Œê³ ìˆë‹¤ë©´ ëˆ„êµ¬ë‚˜ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. (<code>http://localhost/service</code>)</strong></p>
</li>
<li>
<p>í•´ë‹¹ ë¬¸ì œë¥¼ ìˆ˜ì •í•´ë³´ì!</p>
</li>
</ul>
<br/>
<h3 id="section-2">ì˜ë„í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ íë¦„</h3>
<ul>
<li>
<p><strong>ì²« ì ‘ì†</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginFilter/Untitled%2039.png" alt="ì²« ì ‘ì†" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ë¡œê·¸ì¸</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginFilter/Untitled%2040.png" alt="ë¡œê·¸ì¸" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ì„œë¹„ìŠ¤ ì ‘ê·¼</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginFilter/Untitled%2041.png" alt="ì„œë¹„ìŠ¤ ì ‘ê·¼" /></p>
</li>
</ul>
<br/>
<h3 id="section-3">ëª©í‘œ</h3>
<ul>
<li>ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìë§Œ ì„œë¹„ìŠ¤ í˜ì´ì§€ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤.</li>
<li>í•´ê²°í•´ì•¼ í•˜ëŠ” ë¬¸ì œ
<ul>
<li>ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•„ë„, URLì„ ì§ì ‘ ì…ë ¥í•˜ì—¬ ì„œë¹„ìŠ¤ í˜ì´ì§€ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-4">ì„œë¸”ë¦¿ í•„í„°</h2>
<h3 id="section-5">ì„œë¸”ë¦¿ í•„í„°ë€?</h3>
<ul>
<li>ì„œë¸”ë¦¿ì´ ì§€ì›í•˜ëŠ” ìˆ˜ë¬¸ì¥ì´ë‹¤.</li>
</ul>
<br/>
<h3 id="section-6">í•„í„° íë¦„</h3>
<pre><code>HTTPìš”ì²­ -&gt; WAS -&gt; í•„í„° -&gt; ì„œë¸”ë¦¿ -&gt; ì»¨íŠ¸ë¡¤ëŸ¬
</code></pre>
<ul>
<li>í•„í„° ì ìš©ì‹œ, <strong>í•„í„°ê°€ í˜¸ì¶œëœ ë’¤ ì„œë¸”ë¦¿ì´ í˜¸ì¶œëœë‹¤.</strong></li>
<li>ì°¸ê³ : ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, <strong>ì„œë¸”ë¦¿==ë””ìŠ¤íŒ¨ì²˜_ì„œë¸”ë¦¿</strong></li>
</ul>
<br/>
<h3 id="section-7">í•„í„° ì œí•œ</h3>
<pre><code>ë¡œê·¸ì¸O: HTTPìš”ì²­ -&gt; WAS -&gt; í•„í„° -&gt; ì„œë¸”ë¦¿ -&gt; ì»¨íŠ¸ë¡¤ëŸ¬
ë¡œê·¸ì¸X: HTTPìš”ì²­ -&gt; WAS -&gt; í•„í„° -&gt; (ë¹„ì •ìƒì ì¸ ìš”ì²­ì´ë¼ê³  íŒë‹¨, ì„œë¸”ë¦¿ í˜¸ì¶œX)
</code></pre>
<br/>
<h3 id="section-8">í•„í„° ì²´ì¸</h3>
<pre><code>HTTPìš”ì²­ -&gt; WAS -&gt; í•„í„°1 -&gt; í•„í„°2 -&gt; ... -&gt; ì„œë¸”ë¦¿ -&gt; ì»¨íŠ¸ë¡¤ëŸ¬
</code></pre>
<ul>
<li>í•„í„°ëŠ” ì²´ì¸ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.</li>
<li>ì¤‘ê°„ì— í•„í„°ë¥¼ ììœ ë¡­ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<p><br/><br/></p>
<h2 id="section-9">ì¸ì¦ ì²´í¬ í•„í„° êµ¬í˜„</h2>
<h3 id="codelogincheckfiltercode-">ì¸ì¦ ì²´í¬ í•„í„°: <code>LoginCheckFilter</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginCheckFilter</span> <span class="kd">implements</span> <span class="nc">Filter</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whitelist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/member/add&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/member/login&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/member/logout&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/**
 * ì‹¤ì œ í•„í„° ë¡œì§ ì‘ì„±
 */&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FilterChain&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;chain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IOException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ServletException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isLoginCheckPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getRequestURI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;HttpSession&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;loginUser&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

                &lt;span class=&quot;cm&quot;&gt;/*
                ë¡œê·¸ì¸ Xì¼ë•Œ login í™”ë©´ìœ¼ë¡œ redirect
                ë‹¤ì‹œ ëŒì•„ì˜¬ urlì„ íŒŒë¼ë¯¸í„°ë¡œ ê°™ì´ ë„˜ê²¨ì¤Œ
                 */&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;httpResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sendRedirect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/member/login?redirectURL=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;httpRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getRequestURI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//ë”ì´ìƒ ì§„í–‰X&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;chain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;doFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/**
 * ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë  ë•Œ í˜¸ì¶œëœë‹¤.
 */&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;FilterConfig&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filterConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ServletException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Filter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filterConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/**
 * ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ í˜¸ì¶œëœë‹¤.
 */&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Filter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/**
 * whitelist ìš”ì†Œì— í¬í•¨ëœ url =&amp;gt; false
 * whitelist ìš”ì†Œì— í¬í•¨ë˜ì§€ ì•Šì€ url =&amp;gt; true
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isLoginCheckPath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requestUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;PatternMatchUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;simpleMatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;whitelist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requestUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>implements Filter</code>
<ul>
<li>í•„í„°ë¥¼ êµ¬í˜„í•  ë•ŒëŠ”, í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>init()</code>
<ul>
<li>í•„í„° ì´ˆê¸°í™” ë©”ì„œë“œ, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë  ë•Œ í˜¸ì¶œëœë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>doFilter()</code>
<ul>
<li>ê³ ê°ì˜ ìš”ì²­ì´ ì˜¬ ë•Œë§ˆë‹¤, í•´ë‹¹ ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.</li>
<li>í•„í„°ì˜ ë¡œì§ì„ êµ¬í˜„í•˜ë©´ ëœë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>destroy()</code>
<ul>
<li>í•„í„° ì¢…ë£Œ ë©”ì„œë“œ, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ í˜¸ì¶œëœë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>whitelist = {&quot;/&quot;, &quot;/member/add&quot;, &quot;/member/login&quot;, &quot;/member/logout&quot;}</code>
<ul>
<li>ì¸ì¦ í•„í„°ë¥¼ ì ìš©í•´ë„, í•´ë‹¹ urlì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>isLoginCheckPath(requestURI)</code>
<ul>
<li>í™”ì´íŠ¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ì œì™¸í•œ ëª¨ë“  ê²½ìš°ì— ì¸ì¦ ì²´í¬ ë¡œì§ì„ ì ìš©í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>httpResponse.sendRedirect(&quot;/member/login?redirectURL=&quot; + httpRequest.getRequestURI())</code>
<ul>
<li>ë¯¸ì¸ì¦ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•œë‹¤.</li>
<li>ë¡œê·¸ì¸ í™”ë©´ì—ì„œ ë¡œê·¸ì¸ì„ ì™„ë£Œí•˜ë©´, ë‹¤ì‹œ ì›ë˜ í˜ì´ì§€ë¡œ ëŒì•„ì˜¬ ìˆ˜ ìˆë‹¤.
<ul>
<li>ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ëŒì•„ì˜¬ URLì„ ë¡œê·¸ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬í–ˆê¸° ë•Œë¬¸ì—</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>return;</code>
<ul>
<li>ë¯¸ì¸ì¦ ì‚¬ìš©ìê°€ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë„ë¡ ë§‰ëŠ”ë‹¤.</li>
<li>ì•ì„œì„œ <code>sendRedirect</code> ë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì—, <code>redirect</code>ê°€ ì‘ë‹µìœ¼ë¡œ ì ìš©ë˜ê³  ìš”ì²­ì´ ëë‚œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="codewebconfigcode-">í•„í„° ë“±ë¡: <code>WebConfig</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@Bean&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FilterRegistrationBean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loginCheckFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;FilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Filter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Filter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LoginCheckFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ë¡œê·¸ì¸ í•„í„° ë“±ë¡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOrder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// í•„í„° ìˆœì„œ=1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addUrlPatterns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ì ìš©í•  url&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>setFilter(new LoginCheckFilter())</code>
<ul>
<li>LoginCheckFilter ë¥¼ í•„í„°ë¡œ ë“±ë¡í•œë‹¤.</li>
</ul>
</li>
<li><code>setOrder(1)</code>
<ul>
<li>í•„í„° ì ìš© ìˆœì„œì´ë‹¤.</li>
<li>ì²«ë²ˆì§¸ ìˆœì„œë¡œ í˜¸ì¶œëœë‹¤.</li>
</ul>
</li>
<li><code>addUrlPatterns(&quot;/*&quot;)</code>
<ul>
<li>í•´ë‹¹ í•„í„°ë¥¼ ì ìš©í•  urlì„ ì„¤ì •í•œë‹¤.</li>
<li>/* ì€ ëª¨ë“  urlì„ ì˜ë¯¸í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="url--codelogincontrollercode-">ë¡œê·¸ì¸ ì„±ê³µì‹œ ê¸°ì¡´ urlë¡œ ëŒì•„ì˜¤ê¸°: <code>LoginController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/login"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">login</span><span class="o">(</span><span class="nd">@Validated</span> <span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">)</span> <span class="nc">LoginUserForm</span> <span class="n">form</span><span class="o">,</span>
                    <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">,</span>
                    <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"/"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">redirectURL</span> <span class="o">,</span>
                    <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
<p><span class="c1">//ê²€ì¦ ì˜¤ë¥˜ì‹œ</span>
<span class="k">if</span> <span class="o">(</span><span class="n">bindingResult</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
<span class="k">return</span> <span class="s">â€œloginâ€</span><span class="o">;</span>
<span class="o">}</span></p>
<p><span class="c1">//ë¡œê·¸ì¸ ì‹¤í–‰</span>
<span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">loginService</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">form</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">form</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span></p>
<p><span class="c1">//ë¡œê·¸ì¸ ì‹¤íŒ¨ì‹œ, ì˜¤ë¸Œì íŠ¸ ì—ëŸ¬</span>
<span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
<span class="n">bindingResult</span><span class="o">.</span><span class="na">reject</span><span class="o">(</span><span class="s">â€œwrongUserâ€</span><span class="o">,</span> <span class="s">â€œì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.â€</span><span class="o">);</span>
<span class="k">return</span> <span class="s">â€œloginâ€</span><span class="o">;</span>
<span class="o">}</span></p>
<p><span class="c1">//ë¡œê·¸ì¸ ì„±ê³µì‹œ</span></p>
<p><span class="c1">//ì„¸ì…˜ ìƒì„± í›„, ê°’ ì¶”ê°€</span>
<span class="nc">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
<span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="nc">SessionConst</span><span class="o">.</span><span class="na">LOGIN_USER</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span></p>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ë‹¤ì‹œ ëŒì•„ê°€ê¸°&lt;/span&gt;
</code></pre>
<p><span class="k">return</span> <span class="s">â€œredirect:â€</span> <span class="o">+</span> <span class="n">redirectURL</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>@RequestParam(defaultValue = &quot;/&quot;) String redirectURL</code>
<ul>
<li>í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì„ ê°–ëŠ” ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì„ ë°›ì•„ì˜¨ë‹¤.</li>
<li><code>defaultValue</code> : í•´ë‹¹ ì´ë¦„ì´ ì—†ì„ ë•Œì˜ ê¸°ë³¸ ê°’</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-10">ê²°ê³¼</h3>
<ul>
<li>
<p><strong>ë¡œê·¸ì¸X, ë°”ë¡œ URL(<code>http://localhost:8080/service</code>) ì ‘ê·¼</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginFilter/Untitled%2042.png" alt="ë¯¸ì¸ì¦ì‹œ" /></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>ë¡œê·¸ì¸ ì™„ë£Œ</strong></p>
<p><img src="/assets/img/2021-08-15-SPRING_MVC_LoginFilter/Untitled%2043.png" alt="ë¡œê·¸ì¸ ì™„ë£Œì‹œ" /></p>
</li>
</ul>
<br>
<hr />
<br>
<p><a href="https://inf.run/YPER"><img src="/assets/img/Inflearn_Spring_MVC2/logo.png" width="400px" height="300px"></a></p>
<ul>
<li><em>ë³¸ ê²Œì‹œê¸€ì€ ê¹€ì˜í•œë‹˜ì˜ ê°•ì˜ë¥¼ í† ëŒ€ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.</em></li>
<li><em>ë” ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì´ ê³„ì‹ ë‹¤ë©´, í•´ë‹¹ ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</em></li>
</ul>
:ET