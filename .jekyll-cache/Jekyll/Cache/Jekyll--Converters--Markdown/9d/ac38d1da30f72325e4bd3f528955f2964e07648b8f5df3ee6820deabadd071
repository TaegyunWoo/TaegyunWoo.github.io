I"D<p><br/><br/></p>
<h1 id="stomp">STOMP</h1>
<h2 id="section">ê°œìš”</h2>
<h3 id="stomp-1">STOMPë€?</h3>
<ul>
<li>Simple/Stream Text Oriented Messaging Protocolì˜ ì•½ìë¡œ, ê°„ë‹¨í•œ ë¬¸ì ê¸°ë°˜ ë©”ì‹œì§• í”„ë¡œí† ì½œì´ë‹¤.</li>
<li>HTTPì™€ ë§ˆì°¬ê°€ì§€ë¡œ, Frameì„ ì‚¬ìš©í•´ ì „ì†¡í•˜ëŠ” í”„ë¡œí† ì½œì´ë‹¤.
<ul>
<li>Frame: ì£¼ì†Œì™€ ëª…ë ¹, ëª…ë ¹ ìˆ˜í–‰ì„ ìœ„í•œ ë°ì´í„°ê°€ ëª¨ë‘ í¬í•¨ëœ ë°ì´í„°</li>
</ul>
</li>
<li>TCP/IP ìœ„ì—ì„œ ë™ì‘í•œë‹¤.</li>
<li>STOMPëŠ” ì¼ì¢…ì˜ ìŠ¤í™(ëª…ì„¸ì„œ)ìœ¼ë¡œ, ê¸°ëŠ¥ êµ¬í˜„ì€ ì „ì ìœ¼ë¡œ ì„œë²„ì— ë‹¬ë ¤ìˆë‹¤.
<ul>
<li>STOMP ìŠ¤í™ì— ë§ì¶° ì§ì ‘ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ë‹¤. <code>org.springframework.boot:spring-boot-starter-websocket</code> ì´ ê´€ë ¨ ë¡œì§ì„ ì œê³µí•œë‹¤.</li>
</ul>
</li>
<li>STOMPëŠ” ì›¹ì†Œì¼“ ìœ„ì— ì–¹ì–´ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•˜ìœ„(ì„œë¸Œ) í”„ë¡œí† ì½œì´ë‹¤.</li>
<li><strong>PUB/SUB êµ¬ì¡°ë¥¼ ê°–ëŠ”ë‹¤.</strong></li>
<li><strong>Message Brokerê°€ ì¤‘ê°„ì—ì„œ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•œë‹¤.</strong></li>
</ul>
<br/>
<h3 id="pubsub-">Pub/Sub êµ¬ì¡°</h3>
<ul>
<li>ì•„ë˜ ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì ¸, ë©”ì‹œì§• ì²˜ë¦¬ë¥¼ í•˜ëŠ” êµ¬ì¡°ë¥¼ ëœ»í•œë‹¤.
<ul>
<li><strong>ë©”ì‹œì§€ ê³µê¸‰ ì£¼ì²´ (Publisher)</strong></li>
<li><strong>ë©”ì‹œì§€ ì†Œë¹„ ì£¼ì²´ (Subscriber)</strong></li>
<li><strong>ë©”ì‹œì§€ ì£¼ì œ (Topic)</strong></li>
</ul>
</li>
<li>í–‰ìœ„ë³„ ì •ë¦¬
<ul>
<li>ì±„íŒ…ë°© ìƒì„± â‡’ Topicë¥¼ ìƒì„±í•˜ëŠ” ê²ƒ</li>
<li>íŠ¹ì • ì±„íŒ…ë°© ì…ì¥ â‡’ í•´ë‹¹ Topicì— ëŒ€í•œ Subscriberê°€ ë˜ëŠ” ê²ƒ</li>
<li>íŠ¹ì • ì±„íŒ…ë°©ì— ì±„íŒ…ì„ ë³´ë‚´ëŠ” ê²ƒ â‡’ í•´ë‹¹ Topicì— ëŒ€í•´ Publisherê°€ ë˜ëŠ” ê²ƒ</li>
</ul>
</li>
</ul>
<br/>
<h3 id="message-broker">Message Broker</h3>
<ul>
<li>Message Brokerë€
<ul>
<li>Publisherê°€ ì „ë‹¬í•œ msgë¥¼ Subscriberì—ê²Œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.</li>
<li>STOMPê°€ Pub/Sub êµ¬ì¡°ë¡œ ë™ì‘í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ì£¼ì²´ì´ë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="websocket-vs-stomp">WebSocket vs STOMP</h3>
<ul>
<li>WebSocketì€ ë©”ì‹œì§€ì˜ í˜•ì‹ì´ ì •í•´ì ¸ ìˆì§€ ì•Šë‹¤.</li>
<li>ë”°ë¼ì„œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— WebSocketì„ ì ìš©í•˜ê¸°ì—”, ì–´ë ¤ì›€ì´ ë§ë‹¤.</li>
<li>ê·¸ì— ë°˜í•´ STOMPëŠ” ë©”ì‹œì§€ ì†¡Â·ìˆ˜ì‹  ì‹œ, <strong>ë¯¸ë¦¬ ì •ì˜ëœ ê·œì¹™ì„ ì‚¬ìš©</strong>í•œë‹¤.</li>
<li>ë˜í•œ ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, <strong>í…ìŠ¤íŠ¸ ê¸°ë°˜ í”„ë¡œí† ì½œ</strong>ì´ë‹¤.
<ul>
<li>ë”°ë¼ì„œ ë©”ì‹œì§€ ì‘ì„± ì‹œ, í…ìŠ¤íŠ¸ë¡œ ëª¨ë“  ê²ƒì„ ì‘ì„±í•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="stomp-frame-">STOMPì˜ Frame êµ¬ì¡°</h3>
<ul>
<li><strong>Frameì€ í…ìŠ¤íŠ¸ ë¼ì¸ë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.</strong>
<ul>
<li>í…ìŠ¤íŠ¸ ê¸°ë°˜ í”„ë¡œí† ì½œì´ê¸° ë•Œë¬¸ì—</li>
</ul>
</li>
<li>UTF-8 ì¸ì½”ë”© ë°©ì‹ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>COMMAND 
header1:value1 
header2:value2 
<p>Body^@
</code></pre></div></div></p>
<ul>
<li>
<p>êµ¬ì„±ìš”ì†Œ</p>
<ul>
<li><strong>ëª…ë ¹(COMMAND) - í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ì‹œ, ì‚¬ìš©í•˜ëŠ” ì£¼ìš” COMMAND</strong>
<ul>
<li>
<p><code>CONNECT</code></p>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ì˜ TCP/IP ì—°ê²° ìš”ì²­</li>
<li><code>accept-version</code> í—¤ë”ì— ìˆ˜ìš©í•  STOMP ë²„ì „ì„ ë°˜ë“œì‹œ ëª…ì‹œí•´ì•¼ í•œë‹¤.</li>
<li><code>host</code> í—¤ë”ì— ì—°ê²°í•  í˜¸ìŠ¤íŠ¸ëª…ì„ ë°˜ë“œì‹œ ëª…ì‹œí•´ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONNECT
accept-version:1.0,1.1,2.0
host:stomp.github.org
<p>^@
</code></pre></div></div></p>
<blockquote>
<p>ë‹¹ì—°íˆ ë°”ë””ë¶€ë¶„ì€ í•„ìš”ì—†ë‹¤.</p>
</blockquote>
</li>
<li>
<p><code>SEND</code></p>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸(Publisher)ê°€ msgë¥¼ ë³´ë‚¸ë‹¤.</li>
<li><code>destination</code> í—¤ë”ì— msgë¥¼ ë³´ë‚¼ Topicì„ ë°˜ë“œì‹œ ì§€ì •í•´ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SEND
destination:/queue/a
<p>hello queue a
^@
</code></pre></div></div></p>
</li>
<li>
<p><code>SUBSCRIBE</code></p>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ íŠ¹ì • Topicì— ëŒ€í•´, êµ¬ë…ì„ í•œë‹¤. â‡’ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ëŠ” Subscriberê°€ ëœë‹¤.</li>
<li>í•´ë‹¹ Topicìœ¼ë¡œ ì˜¤ëŠ” ëª¨ë“  msgë¥¼ í´ë¼ì´ì–¸íŠ¸(Subscriber)ê°€ ë°›ê²Œ ëœë‹¤.</li>
<li><code>destination</code> í—¤ë”ë¡œ Subscribeí•  Topicì„ ë°˜ë“œì‹œ ì§€ì •í•´ì•¼ í•œë‹¤.</li>
<li><code>id</code> í—¤ë”ë¡œ ìœ ë‹ˆí¬í•œ Subscribe Idë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SUBSCRIBE
id:0
destination:/queue/foo
ack:client
<p>^@
</code></pre></div></div></p>
<blockquote>
<p>ë‹¹ì—°íˆ <code>SUBSCRIBE</code> ì—ëŠ” Body ë¶€ë¶„ì´ í•„ìš”ì—†ë‹¤.</p>
</blockquote>
</li>
<li>
<p><code>UNSUBSCRIBE</code></p>
<ul>
<li>ë§ ê·¸ëŒ€ë¡œ, Subscribeì„ ì·¨ì†Œí•œë‹¤.</li>
<li><code>id</code> í—¤ë”ì— <code>Subscribe</code> ë•Œ ì„¤ì •í•œ <code>id</code> ë¥¼ ë°˜ë“œì‹œ ë„£ì–´ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UNSUBSCRIBE
id:0
<p>^@
</code></pre></div></div></p>
</li>
<li>
<p><code>DISCONNECT</code></p>
<ul>
<li>ì—°ê²°ì„ í•´ì§€í•œë‹¤. í•´ì§€ ìˆœì„œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</li>
</ul>
<ol>
<li>
<p>í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìš”ì²­ msg</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DISCONNECT
receipt:77
<p>^@
</code></pre></div></div></p>
</li>
<li>
<p>ì´ì— ëŒ€í•œ ì„œë²„ ì¸¡ ì‘ë‹µ msg</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RECEIPT
receipt-id:77
<p>^@
</code></pre></div></div></p>
<ul>
<li>ì´ë•Œ í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ <code>receipt</code> ì˜ ê°’ê³¼ ì„œë²„ê°€ ë³´ë‚¸ <code>receipt-id</code> ì˜ ê°’ì´ ê°™ì•„ì•¼ í•œë‹¤.</li>
</ul>
</li>
<li>
<p>ì†Œì¼“ì„ ë‹«ëŠ”ë‹¤.</p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
  <br/>
<ul>
<li>
<p><strong>ëª…ë ¹(COMMAND) - ì„œë²„ê°€ ì‘ë‹µ ì‹œ, ì‚¬ìš©í•˜ëŠ” ì£¼ìš” COMMAND</strong></p>
<ul>
<li>
<p><code>CONNECTED</code></p>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ <code>CONNECT</code> í”„ë ˆì„ì„ ë³´ë‚´ë©´, ì•„ë˜ì™€ ê°™ì´ ì‘ë‹µí•´ì•¼ í•œë‹¤.</li>
<li><code>version</code> í—¤ë”ì— í˜„ì¬ STOMP ë²„ì „ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONNECTED
version:1.2
<p>^@
</code></pre></div></div></p>
</li>
<li>
<p><code>MESSAGE</code></p>
<ul>
<li>ì„œë²„ê°€ í•´ë‹¹ Topic(<code>destination</code>)ë¥¼ Subscribeí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë“¤ì—ê²Œ msgë¥¼ ë³´ë‚¸ë‹¤.</li>
</ul>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MESSAGE
subscription:0
message-id:007
destination:/queue/a
<p>hello queue a^@
</code></pre></div></div></p>
</li>
<li>
<p><code>RECEIPT</code></p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RECEIPT
receipt-id:message-12345
<p>^@
</code></pre></div></div></p>
</li>
<li>
<p><code>ERROR</code></p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR
receipt-id:message-12345
content-type:text/plain
content-length:170
message:malformed frame received
<h2 id="the-message">The message:</h2>
<p>MESSAGE
destined:/queue/a
receipt:message-12345</p>
<h2 id="hello-queue-a">Hello queue a!</h2>
<p>Did not contain a destination header, which is REQUIRED
for message propagation.
^@
</code></pre></div></div></p>
</li>
</ul>
</li>
<li>
<p><strong>í—¤ë”(Header)</strong></p>
</li>
<li>
<p><strong>ë°”ë””(Body)</strong></p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>ìì„¸í•œ ê²ƒì€ <a href="https://stomp.github.io/stomp-specification-1.2.html#STOMP_Frames">STOMP ë ˆí¼ëŸ°ìŠ¤</a> ì°¸ê³ </p>
</blockquote>
<p><br/><br/></p>
<h2 id="stomp--with-spring-boot">STOMP êµ¬í˜„ (With Spring-boot)</h2>
<h3 id="stomp--">ìŠ¤í”„ë§ì—ì„œì˜ STOMP í†µì‹  íë¦„</h3>
<p><img src="/assets/img/2021-12-23-Tech_STOMP/Untitled.png" alt="ì°¸ê³  ì˜ìƒ: [10ë¶„ í…Œì½”í†¡] ì•„ë¡ ì˜ ì›¹ì†Œì¼“&amp;ìŠ¤í”„ë§" /></p>
<p>ì°¸ê³  ì˜ìƒ: <a href="https://www.youtube.com/watch?v=rvss-_t6gzg">[10ë¶„ í…Œì½”í†¡] ì•„ë¡ ì˜ ì›¹ì†Œì¼“&amp;ìŠ¤í”„ë§</a></p>
<ul>
<li>ê°€ì •
<ul>
<li>êµ¬ë…ì(Subscriber)ë“¤ì´ <code>/topic</code> ì´ë¼ëŠ” Topicì„ í˜„ì¬ êµ¬ë… ì¤‘ì´ë‹¤.</li>
<li>ë°œì‹ ì(Publisher)ê°€ <code>/topic</code> ì— msgë¥¼ ë³´ë‚´ê³ ì í•œë‹¤.</li>
</ul>
</li>
<li>ì´ë•Œ ë°œì‹ ìê°€ ì„ íƒí•  ìˆ˜ ìˆëŠ” ì„ íƒì§€ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
<ul>
<li><strong><code>SEND</code> í”„ë ˆì„ì˜ <code>destination</code> í—¤ë”ì— <code>/topic</code> ì„ ë„£ì–´, ë°”ë¡œ msgì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•</strong></li>
<li><strong>ë©”ì‹œì§€ ê°€ê³µ ë° ì²˜ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´, <code>SEND</code> í”„ë ˆì„ì˜ <code>destination</code> í—¤ë”ì— <code>/app</code> ì„ ë„£ì–´ msgë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•</strong></li>
</ul>
</li>
</ul>
<br/>
<h3 id="codewebsocketbrokerconfigcode">ì›¹ì†Œì¼“ë©”ì‹œì§€ë¸Œë¡œì»¤ ë“±ë¡: <code>WebSocketBrokerConfig</code></h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@EnableWebSocketMessageBroker</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebSocketBrokerConfig</span> <span class="kd">implements</span> <span class="nc">WebSocketMessageBrokerConfigurer</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ë©”ì‹œì§€ ë¸Œë¡œì»¤ ê´€ë ¨ ì„¤ì •&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;configureMessageBroker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MessageBrokerRegistry&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;//ë°œì‹ ìê°€ ì„ íƒí•  ìˆ˜ ìˆëŠ” 1ë²ˆ ë°©ë²•&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;enableSimpleBroker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/queue&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/topic&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;//ë°œì‹ ìê°€ ì„ íƒí•  ìˆ˜ ìˆëŠ” 2ë²ˆ ë°©ë²• (ë©”ì‹œì§€ ê°€ê³µ)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setApplicationDestinationPrefixes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/app&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;registerStompEndpoints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StompEndpointRegistry&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addEndpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/stomp-websocket&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;withSockJS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>implements WebSocketMessageBrokerConfigurer</code>
<ul>
<li>STOMP ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ë ¤ë©´, í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>enableSimpleBroker(&quot;/queue&quot;, &quot;/topic&quot;)</code>
<ul>
<li>ë‚´ì¥ ë©”ì‹œì§€ ë¸Œë¡œì»¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•œë‹¤.</li>
<li>â€œ<code>SEND</code> í”„ë ˆì„ì˜ <code>destination</code> í—¤ë”ì— <code>/topic</code> ì„ ë„£ì–´, ë°”ë¡œ msgì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•â€ ì— í•´ë‹¹ëœë‹¤.</li>
<li><strong>íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì€ ê°’ì´ msgì˜ <code>destination</code> í—¤ë”ì˜ prefixë¡œì„œ ì‚¬ìš©ë˜ë©´, ë‚´ì¥ ë©”ì‹œì§€ ë¸Œë¡œì»¤ê°€ ì²˜ë¦¬í•œë‹¤.</strong></li>
<li>ìœ„ ì˜ˆì‹œ ì½”ë“œì˜ ê²½ìš°, <code>/queue</code> ë‚˜ <code>/topic</code> ì´ <code>destination</code> í—¤ë”ì˜ prefixë¡œ ì‚¬ìš©ë˜ë©´ ë‚´ì¥ ë©”ì‹œì§€ ë¸Œë¡œì»¤ì¸ <code>SimpleBroker</code> ê°€ ê·¸ ë©”ì‹œì§€ë¥¼ ë°›ì•„ êµ¬ë…ìë“¤ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤.</li>
<li>ê´€ë¡€ì ì¸ prefixë“¤
<ul>
<li><strong>/queue</strong> : ë©”ì‹œì§€ê°€ ì¼ëŒ€ì¼ë¡œ ì „ì†¡ë  ë•Œ</li>
<li><strong>/topic</strong> : ë©”ì‹œì§€ê°€ ì¼ëŒ€ë‹¤ë¡œ ë¸Œë¡œë“œìºìŠ¤íŒ… ë  ë•Œ</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>setApplicationDestinationPrefixes(&quot;/app&quot;)</code>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì „ë‹¬ë°›ì€ msgë¥¼ êµ¬ë…ì(Subscriber)ë“¤ì—ê²Œ ì „ë‹¬í•˜ê¸° ì „ì—, ë©”ì‹œì§€ ê°€ê³µì´ í•„ìš”í•œ ê²½ìš°ì˜ prefixë¥¼ ì„¤ì •í•œë‹¤.</li>
<li>â€œë©”ì‹œì§€ ê°€ê³µ ë° ì²˜ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´, <code>SEND</code> í”„ë ˆì„ì˜ <code>destination</code> í—¤ë”ì— <code>/app</code> ì„ ë„£ì–´ msgë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•â€ ì— í•´ë‹¹ëœë‹¤.</li>
<li>ìœ„ ì˜ˆì‹œ ì½”ë“œì˜ ê²½ìš°, <code>/app</code> ì´ <code>destination</code> í—¤ë”ì˜ prefixë¡œ ì‚¬ìš©ë˜ë©´ msgë¥¼ ê°€ê³µí•˜ëŠ” í•¸ë“¤ëŸ¬ë¡œ msgê°€ ì „ë‹¬ëœë‹¤.</li>
<li>ì¼ë°˜ WebSocketì²˜ëŸ¼ ì¼ì¼ì´ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
<ul>
<li>ì¼ë°˜ ì»¨íŠ¸ë¡¤ëŸ¬ì²˜ëŸ¼ í•¸ë“¤ëŸ¬ê°€ ë§¤í•‘ë˜ë¯€ë¡œ</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>addEndpoint(&quot;/stomp-websocket&quot;)</code>
<ul>
<li>HTTP HandShakingì„ í•  ë•Œ, ì‚¬ìš©ë  ì£¼ì†Œë¥¼ ì§€ì •í•œë‹¤.</li>
<li>ì¦‰, ì›¹ì†Œì¼“ì„ <strong>ì—°ê²°(Connection)</strong> í•  ì£¼ì†Œë¥¼ ì§€ì •í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="codemsgprocesscontrollercode">ë©”ì‹œì§€ ê°€ê³µ í•¸ë“¤ëŸ¬: <code>MsgProcessController</code></h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MsgProcessController</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@MessageMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/hello&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@SendTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/topic/roomId&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MessageResponseDto&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MessageRequestDto&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;MessageResponseDto&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
		&lt;span class=&quot;s&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;!&quot;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>@MessageMapping(&quot;/hello&quot;)</code>
<ul>
<li>
<p>ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ì—ì„œ â€œ../helloâ€ ë¼ëŠ” apië¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´, <code>process()</code> ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.</p>
<blockquote>
<p><code>WebSocketBrokerConfig</code> ì—ì„œ ì„¤ì •í–ˆë˜ <code>/app</code> ê³¼ í•©ì³ì ¸, <code>/app/hello</code> ë¥¼ <code>destination</code> í—¤ë” ê°’ìœ¼ë¡œ ê°–ëŠ” ë©”ì‹œì§€ë“¤ì´ <code>process()</code> ë©”ì„œë“œì— ì „ë‹¬ë˜ê²Œ ëœë‹¤.</p>
</blockquote>
</li>
<li>
<p>ê·¸ë¦¬ê³  <code>process()</code> ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„°ì¸ <code>MessageRequestDto</code> ì— ì „ì†¡ëœ msgê°€ ë°”ì¸ë”©ëœë‹¤.</p>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><code>@SendTo(&quot;/topic/roomId&quot;)</code>
<ul>
<li>â€œ/topic/roomIdâ€ ë¼ëŠ” Topicì„ êµ¬ë…í•˜ê³  ìˆëŠ” í´ë¼ì´ì–¸íŠ¸(Subscriber)ë“¤ì—ê²Œ â€˜<code>process()</code> ë©”ì„œë“œì—ì„œ returní•˜ëŠ” ê°’â€™ì„ msgë¡œì„œ ë¸Œë¡œë“œìºìŠ¤íŒ…í•œë‹¤.</li>
<li>â€œ/topic/â€¦â€ ì— msgë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ë‹ˆ, ë¦¬í„´ê°’ì´ ë°”ë¡œ Simple Brokerë¡œ ì „ë‹¬ëœë‹¤.</li>
</ul>
</li>
</ul>
:ET