I"³%<p><br/><br/></p>
<h1 id="swagger-jsessionid--">Swaggerì—ì„œì˜ jsessionid ì¸ì¦ ì‚¬ìš©</h1>
<h2 id="section">ê°œìš”</h2>
<ul>
<li>Swagger ë¥¼ í†µí•´ RestAPI ë¬¸ì„œë¥¼ ì‘ì„±í•  ë•Œ, ì¸ê°€(Authorization)ê°€ í•„ìš”í•œ APIë¥¼ ì‘ì„±í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.</li>
<li>ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” Endpointë¥¼ Swaggerì—ì„œ í…ŒìŠ¤íŒ…í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?</li>
<li>ë³¸ ê¸€ì—ì„  Swaggerì—ì„œ ì¸ê°€ê°€ í•„ìš”í•œ APIì— ì ‘ê·¼í•˜ê¸° ìœ„í•´, ì¸ì¦ ë° ì¸ê°€ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.
<ul>
<li>ì¸ì¦Â·ì¸ê°€ ë°©ì‹ì—ëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ìˆì§€ë§Œ, ê·¸ ì¤‘ ì¿ í‚¤ ê¸°ë°˜ (<code>JSESSIONID</code>) ë°©ì‹ì— ëŒ€í•´ ë‹¤ë£¬ë‹¤.</li>
</ul>
</li>
<li><strong>ì¦‰ Swaggerì—ì„œ ì¿ í‚¤ ê¸°ë°˜ ì¸ê°€ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì.</strong></li>
</ul>
<p><br/><br/></p>
<h2 id="section-1">ì½”ë“œ</h2>
<h3 id="codebuildgradlecode-">ì˜ì¡´ì„± ì¶”ê°€: <code>build.gradle</code> íŒŒì¼</h3>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>implementation 'org.springdoc:spring-boot-springdoc:3.1.2'
</code></pre></div></div>
<blockquote>
<p>Swaggerë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>
</blockquote>
<br/>
<h3 id="swagger--codeswaggerconfigjavacode">Swagger ì„¤ì •: <code>SwaggerConfig.java</code></h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.Components</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.OpenAPI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.info.Contact</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.info.Info</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.info.License</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.security.SecurityRequirement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.swagger.v3.oas.models.security.SecurityScheme</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<p><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwaggerConfig</span> <span class="o">{</span></p>
<p><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">OpenAPI</span> <span class="nf">api</span><span class="o">()</span> <span class="o">{</span>
<span class="nc">Info</span> <span class="n">info</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Info</span><span class="o">()</span>
<span class="o">.</span><span class="na">title</span><span class="o">(</span><span class="s">â€œì œëª©â€</span><span class="o">)</span>
<span class="o">.</span><span class="na">version</span><span class="o">(</span><span class="s">â€œV1.0â€</span><span class="o">)</span>
<span class="o">.</span><span class="na">contact</span><span class="o">(</span><span class="k">new</span> <span class="nc">Contact</span><span class="o">()</span>
<span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">â€œWeb Siteâ€</span><span class="o">)</span>
<span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">â€œë°°í¬ ì£¼ì†Œâ€</span><span class="o">))</span>
<span class="o">.</span><span class="na">license</span><span class="o">(</span><span class="k">new</span> <span class="nc">License</span><span class="o">()</span>
<span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">â€œApache License Version 2.0â€</span><span class="o">)</span>
<span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">â€œ<a href="http://www.apache.org/license/LICENSE-2.0">http://www.apache.org/license/LICENSE-2.0</a>â€</span><span class="o">));</span></p>
<pre><code>	&lt;span class=&quot;c1&quot;&gt;//-------------------- ì¸ê°€ ë°©ì‹ ì§€ì • ---------------------&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;SecurityScheme&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;auth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SecurityScheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;SecurityScheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;APIKEY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;SecurityScheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;In&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;COOKIE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;JSESSIONID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;SecurityRequirement&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;securityRequirement&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SecurityRequirement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;basicAuth&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OpenAPI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Components&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addSecuritySchemes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;basicAuth&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;auth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addSecurityItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;securityRequirement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
</code></pre>
<p><span class="o">}</span></p>
<p><span class="o">}</span>
</code></pre></div></div>
<br/></p>
<ul>
<li>ìƒì„¸ ì„¤ëª…
<ul>
<li>ì¿ í‚¤ ê¸°ë°˜ ì¸ê°€ ë°©ì‹
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì¦(Authorization)ì— ì„±ê³µí•˜ë©´, ì„œë²„ê°€ HTTP ì‘ë‹µ MSGì˜ í—¤ë”ì— <code>Set-Cookie: JSESSIONID=ê°’</code> ì„ ë‹´ì•„ì„œ ë³´ë‚¸ë‹¤.</li>
<li>í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ê°€ ë³´ë‚¸ <code>JSESSIONID</code> ê°’ì„ ì¿ í‚¤ì— ì €ì¥í•œë‹¤.</li>
<li>í´ë¼ì´ì–¸íŠ¸ê°€ HTTP ìš”ì²­ MSGë¥¼ ë³´ë‚¼ ë•Œ, í—¤ë”ë¶€ë¶„ì— <code>Cookie: JSESSIONID=ê°’</code> ë¥¼ í•¨ê»˜ ë³´ë‚¸ë‹¤.</li>
<li>ê·¸ë¦¬ê³  ì„œë²„ê°€ í•´ë‹¹ <code>JSESSIONID</code> ê°’ì„ í™•ì¸í•˜ì—¬, ì¸ì¦ëœ ì‚¬ìš©ìì¸ì§€ í™•ì¸(ì¸ê°€)í•œë‹¤.</li>
<li>ìœ„ì™€ ê°™ì€ ë°©ì‹ì„ <code>APIKEY</code> ë°©ì‹ì´ë¼ê³  í•œë‹¤.</li>
<li>ìì„¸í•œ ê²ƒì€ <a href="https://swagger.io/docs/specification/authentication/api-keys/">ê³µì‹ë¬¸ì„œ</a> ë¥¼ ì°¸ê³ í•˜ì.</li>
</ul>
</li>
<li><code>.type(SecurityScheme.Type.APIKEY)</code>
<ul>
<li>ìš°ë¦¬ëŠ” í˜„ì¬ ì¿ í‚¤ ê¸°ë°˜ ì¸ê°€ ë°©ì‹ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, <code>APIKEY</code> íƒ€ì…ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
<li><code>.in(SecurityScheme.In.COOKIE)</code>
<ul>
<li><code>APIKEY</code> ê°’ì´ ì¿ í‚¤ì— ë‹´ê²¨ìˆìœ¼ë¯€ë¡œ, <code>COOKIE</code> ë¡œ ì§€ì •í•œë‹¤.</li>
</ul>
</li>
<li><code>.name(&quot;JSESSIONID&quot;)</code>
<ul>
<li>ì¸ê°€ì— ì‚¬ìš©ë˜ëŠ” í‚¤(Key)ê°€ <code>JSESSIONID</code> ì´ë¯€ë¡œ, nameì„ <code>JSESSIONID</code> ë¡œ ì§€ì •í•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h1 id="reference">Reference</h1>
<ul>
<li><a href="https://swagger.io/docs/specification/authentication/cookie-authentication/">https://swagger.io/docs/specification/authentication/cookie-authentication/</a></li>
<li><a href="https://swagger.io/docs/specification/authentication/api-keys/">https://swagger.io/docs/specification/authentication/api-keys/</a></li>
<li><a href="https://prodo-developer.tistory.com/50">https://prodo-developer.tistory.com/50</a></li>
</ul>
:ET