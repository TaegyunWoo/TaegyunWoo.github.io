I"›<p><br/><br/></p>
<ul>
<li><a href="https://github.com/TaegyunWoo/jpa-study/tree/master/BasicJpaApp">ì˜ˆì‹œ í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ</a></li>
</ul>
<p><br/><br/></p>
<h1 id="jpa-">JPA ì‹œì‘í•˜ê¸°</h1>
<h2 id="section">ê°œìš”</h2>
<h3 id="section-1">ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬</h3>
<ul>
<li>hibernate-entitymanager</li>
<li>h2</li>
</ul>
<p>h2 DBë¥¼ ì„¤ì¹˜í•˜ì—¬, í•™ìŠµìš© DBë¡œ ì‚¬ìš©í•œë‹¤. ë˜í•œ, JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ hibernate ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.</p>
<p><br/><br/></p>
<h2 id="section-2">ê°ì²´ ë§¤í•‘</h2>
<ul>
<li>
<p>ê¸°ì´ˆì ì¸ ìë°” í”„ë¡œì íŠ¸ë¥¼ mavenê³¼ í•¨ê»˜ ìƒì„±í•˜ì—¬, ê°ì²´ ë§¤í•‘ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.</p>
<blockquote>
<p>ì°¸ê³ ë¡œ, springì´ë‚˜ spring bootë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¨ìˆœíˆ main ë©”ì„œë“œë¡œ ë™ì‘í•˜ëŠ” í”„ë¡œì íŠ¸ì´ë‹¤.</p>
</blockquote>
</li>
<li>
<p>ì˜ˆì‹œ í”„ë¡œì íŠ¸ì˜ ë§í¬ëŠ” ìƒë‹¨ì— ì‘ì„±í•´ë‘ì—ˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œê¸° ë°”ë€ë‹¤.</p>
</li>
</ul>
<br/>
<h3 id="section-3">íšŒì› í…Œì´ë¸” ìƒì„±</h3>
<ul>
<li>H2 ì½˜ì†”ì„ í†µí•´ ì•„ë˜ SQLì„ ì…ë ¥í•˜ì—¬, MEMBER í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤.</li>
</ul>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">MEMBER</span> <span class="p">(</span>
	<span class="n">ID</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
	<span class="n">NAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
	<span class="n">AGE</span> <span class="nb">INTEGER</span><span class="p">,</span>
	<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">ID</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>
<br/>
<h3 id="section-4">íšŒì› í´ë˜ìŠ¤</h3>
<ul>
<li>JPA ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë  íšŒì› í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œë‹¤.</li>
<li>í•´ë‹¹ í´ë˜ìŠ¤ëŠ” MEMBER í…Œì´ë¸”ê³¼ ë§¤í•‘ë  í´ë˜ìŠ¤ì´ë‹¤.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>
<p><span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span></p>
<p><span class="kd">private</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">;</span></p>
<pre><code>&lt;span class=&quot;c1&quot;&gt;// Getter, Setter ìƒëµ&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div>
<br/></p>
<h3 id="section-5">ë§¤í•‘ ì• ë„ˆí…Œì´ì…˜ ì„¤ì •</h3>
<ul>
<li>JPAë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ê°€ì¥ ë¨¼ì € íšŒì› í´ë˜ìŠ¤ì™€ íšŒì› í…Œì´ë¸”ì„ ë§¤í•‘í•´ì•¼ í•œë‹¤.</li>
<li>ì• ë„ˆí…Œì´ì…˜ì„ í†µí•´ ë§¤í•‘í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"MEMBER"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<p><span class="nd">@Id</span>
<span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">â€œIDâ€</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span></p>
<p><span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">â€œNAMEâ€</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span></p>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ë§¤í•‘ì •ë³´ê°€ ì—†ë‹¤.&lt;/span&gt;
</code></pre>
<p><span class="kd">private</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">;</span></p>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//Getter, Setter ìƒëµ&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li>ì‚¬ìš©ëœ ì• ë„ˆí…Œì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
<ul>
<li><code>@Entity</code></li>
<li><code>@Table</code></li>
<li><code>@Id</code></li>
<li><code>@Column</code></li>
</ul>
</li>
<li>ì• ë„ˆí…Œì´ì…˜ ì„¤ëª…ì€ ì•„ë˜ì—ì„œ ê³„ì†í•œë‹¤.</li>
</ul>
<br/>
<h3 id="section-6">ë§¤í•‘ ì• ë„ˆí…Œì´ì…˜ ì„¤ëª…</h3>
<ul>
<li><code>@Entity</code>
<ul>
<li>í´ë˜ìŠ¤ ë ˆë²¨ì— ì ìš©í•œë‹¤.</li>
<li><strong>í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ í…Œì´ë¸”ê³¼ ë§¤í•‘í•œë‹¤ê³  JPAì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì—­í• </strong>ì„ í•œë‹¤.</li>
<li>í•´ë‹¹ ì• ë„ˆí…Œì´ì…˜ì´ ì ìš©ëœ í´ë˜ìŠ¤ë¥¼ <strong>ì—”í‹°í‹° í´ë˜ìŠ¤</strong>ë¼ê³  í•œë‹¤.</li>
</ul>
</li>
<li><code>@Table</code>
<ul>
<li>í´ë˜ìŠ¤ ë ˆë²¨ì— ì ìš©í•œë‹¤.</li>
<li><strong>ì—”í‹°í‹° í´ë˜ìŠ¤ì— ë§¤í•‘í•  í…Œì´ë¸” ì •ë³´ë¥¼ JPAì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì—­í• </strong>ì„ í•œë‹¤.</li>
<li>ìœ„ ì˜ˆì‹œ ì½”ë“œì—ì„œëŠ” <code>name</code> ì†ì„±ìœ¼ë¡œ í…Œì´ë¸”ì˜ ì´ë¦„ì„ ì§€ì •í•˜ì—¬, â€˜MEMBER í…Œì´ë¸”â€™ê³¼ â€˜Member ì—”í‹°í‹°â€™ë¥¼ ë§¤í•‘í•˜ì˜€ë‹¤.
<ul>
<li><code>@Table(name = &quot;í…Œì´ë¸”ì´ë¦„&quot;)</code></li>
</ul>
</li>
<li>í•´ë‹¹ ì• ë„ˆí…Œì´ì…˜ì„ ìƒëµí•˜ë©´ í´ë˜ìŠ¤ ì´ë¦„ì„ í…Œì´ë¸” ì´ë¦„ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.</li>
</ul>
</li>
<li><code>@Id</code>
<ul>
<li>í•„ë“œ ë ˆë²¨ì— ì ìš©í•œë‹¤.</li>
<li><strong>ì—”í‹°í‹° í´ë˜ìŠ¤ì˜ í•„ë“œë¥¼ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ (Primary Key)ì— ë§¤í•‘í•œë‹¤.</strong></li>
<li>í•´ë‹¹ ì• ë„ˆí…Œì´ì…˜ì´ ì ìš©ëœ í•„ë“œë¥¼ <strong>ì‹ë³„ì í•„ë“œ</strong>ë¼ê³  í•œë‹¤.</li>
</ul>
</li>
<li><code>@Column</code>
<ul>
<li>í•„ë“œ ë ˆë²¨ì— ì ìš©í•œë‹¤.</li>
<li><strong>í•´ë‹¹ í•„ë“œë¥¼ ì»¬ëŸ¼ì— ë§¤í•‘í•œë‹¤.</strong></li>
<li>ìœ„ ì˜ˆì‹œ ì½”ë“œì—ì„œëŠ” <code>name</code> ì†ì„±ìœ¼ë¡œ ë§¤í•‘í•  ì»¬ëŸ¼ì˜ ì´ë¦„ì„ ì§€ì •í•˜ì—¬, â€˜MEMBER í…Œì´ë¸”ì˜ NAME ì»¬ëŸ¼â€™ê³¼ â€˜name í•„ë“œâ€™ë¥¼ ë§¤í•‘í•˜ì˜€ë‹¤.
<ul>
<li><code>@Column(name = &quot;ë§¤í•‘í•  ì»¬ëŸ¼ëª…&quot;)</code></li>
</ul>
</li>
</ul>
</li>
<li>ë§¤í•‘ ì •ë³´ê°€ ì—†ëŠ” í•„ë“œ
<ul>
<li>ë§¤í•‘ ì• ë„ˆí…Œì´ì…˜ì„ ìƒëµí•˜ë©´ í•„ë“œëª…ì„ ì‚¬ìš©í•´ì„œ ì»¬ëŸ¼ëª…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.</li>
<li>ì´ë¦„ì´ ageì¸ í•„ë“œì— ë§¤í•‘ ì •ë³´ë¥¼ ìƒëµí•˜ë©´, ageì»¬ëŸ¼ìœ¼ë¡œ ìë™ ë§¤í•‘í•œë‹¤.</li>
<li><strong>ë§Œì•½, ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•˜ëŠ” DBë¥¼ ì‚¬ìš©í•˜ë©´, <code>@Column</code> ì„ ì‚¬ìš©í•˜ì—¬ ëª…ì‹œì ìœ¼ë¡œ ë§¤í•‘í•´ì•¼ í•œë‹¤.</strong></li>
</ul>
</li>
</ul>
<blockquote>
<p><code>javax.persistence</code> : JPA ì• ë„ˆí…Œì´ì…˜ì˜ íŒ¨í‚¤ì§€</p>
</blockquote>
<p><br/><br/></p>
<h2 id="codepersistencexmlcode-"><code>persistence.xml</code> ì„¤ì •</h2>
<h3 id="codepersistencexmlcode--1"><code>persistence.xml</code> ì´ë€?</h3>
<ul>
<li><strong>JPAëŠ” <code>persistence.xml</code> ë¥¼ í†µí•´ í•„ìš”í•œ ì„¤ì • ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤.</strong></li>
<li>í•´ë‹¹ xml íŒŒì¼ì€ <code>/src/main/resource/META-INF</code> ê²½ë¡œì— ìœ„ì¹˜í•œë‹¤.</li>
<li>í•´ë‹¹ ê²½ë¡œì— ìœ„ì¹˜í–ˆì„ ë•Œ, ë³„ë„ì˜ ì„¤ì •ì—†ì´ í•´ë‹¹ <code>persistence.xml</code> íŒŒì¼ì„ JPAê°€ ì¸ì‹í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<br/>
<h3 id="codepersistencexmlcode--2"><code>persistence.xml</code> ì‘ì„±</h3>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;persistence</span> <span class="na">xmlns=</span><span class="s">"http://xmlns.jcp.org/xml/ns/persistence"</span> <span class="na">version=</span><span class="s">"2.1"</span><span class="nt">&gt;</span>
<p><span class="nt">&lt;persistence-unit</span> <span class="na">name=</span><span class="s">â€œjpabookâ€</span><span class="nt">&gt;</span></p>
<pre><code>&lt;span class=&quot;nt&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- í•„ìˆ˜ ì†ì„± --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;javax.persistence.jdbc.driver&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;org.h2.Driver&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;javax.persistence.jdbc.user&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;sa&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;javax.persistence.jdbc.password&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;javax.persistence.jdbc.url&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;jdbc:h2:tcp://localhost/~/test&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hibernate.dialect&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;org.hibernate.dialect.H2Dialect&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ì˜µì…˜ --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hibernate.show_sql&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hibernate.format_sql&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hibernate.use_sql_comments&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hibernate.id.new_generator_mappings&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
</code></pre>
<p><span class="nt">&lt;/persistence-unit&gt;</span></p>
<p><span class="nt">&lt;/persistence&gt;</span>
</code></pre></div></div></p>
<ul>
<li>ì„¤ì • ë¶„ì„
<ul>
<li><code>&lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; version=&quot;2.1&quot;&gt;</code>
<ul>
<li>ì„¤ì • íŒŒì¼ì€ <code>persistence</code> íƒœê·¸ë¡œ ì‹œì‘í•œë‹¤.</li>
</ul>
</li>
<li><code>&lt;persistence-unit name=&quot;jpabook&quot;&gt;</code>
<ul>
<li>JPA ì„¤ì •ì€ <strong>ì˜ì†ì„± ìœ ë‹›(persistence-unit)</strong> ì´ë¼ëŠ” ê²ƒë¶€í„° ì‹œì‘í•˜ê²Œ ëœë‹¤.</li>
<li>í•´ë‹¹ íƒœê·¸ë¥¼ í†µí•´, ì—°ê²°í•  ë°ì´í„°ë² ì´ìŠ¤ë‹¹ í•˜ë‚˜ì˜ ì˜ì†ì„± ìœ ë‹›ì„ ë“±ë¡í•œë‹¤.</li>
<li>ì˜ì†ì„± ìœ ë‹›ì—ëŠ” ê³ ìœ í•œ ì´ë¦„ìœ¼ë¡œ ë¶€ì—¬í•´ì•¼ í•œë‹¤.
<ul>
<li>ìœ„ ì½”ë“œì—ì„  â€˜jpabookâ€™ì´ë¼ëŠ” ì´ë¦„ì„ ë¶€ì—¬í–ˆë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>ì†ì„± ë¶„ì„
<ul>
<li>
<p><strong>JPA í‘œì¤€ ì†ì„±</strong></p>
<ul>
<li><code>javax.persistence.jdbc.driver</code> : JDBC ë“œë¼ì´ë²„</li>
<li><code>javax.persistence.jdbc.user</code> : DB ì ‘ì† ì•„ì´ë””</li>
<li><code>javax.persistence.jdbc.password</code> : DB ì ‘ì† ë¹„ë°€ë²ˆí˜¸</li>
<li><code>javax.persistence.jdbc.url</code> : DB ì ‘ì† URL</li>
</ul>
</li>
<li>
<p><strong>í•˜ì´ë²„ë„¤ì´íŠ¸ ì†ì„±</strong></p>
<ul>
<li>
<p><code>hibernate.dialect</code> : DB ë°©ì–¸ ì„¤ì •</p>
</li>
<li>
<p><code>hibernate.show_sql</code> : í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì‹¤í–‰í•œ SQLì„ ì¶œë ¥í•œë‹¤.</p>
</li>
<li>
<p><code>hibernate.format_sql</code> : í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì‹¤í–‰í•œ SQLì„ ì¶œë ¥í•  ë•Œ ë³´ê¸° ì‰½ê²Œ ì •ë ¬í•œë‹¤.</p>
</li>
<li>
<p><code>hibernate.use_sql_comments</code> : ì¿¼ë¦¬ë¥¼ ì¶œë ¥í•  ë•Œ ì£¼ì„ë„ í•¨ê»˜ ì¶œë ¥í•œë‹¤.</p>
</li>
<li>
<p><code>hibernate.id.new_generator_mappings</code> : JPA í‘œì¤€ì— ë§ì¶˜ ìƒˆë¡œìš´ í‚¤ ìƒì„± ì „ëµì„ ì‚¬ìš©í•œë‹¤.</p>
<blockquote>
<p>í•´ë‹¹ ì‚¬í•­ì€ ë‚˜ì¤‘ì— ìì„¸íˆ ë‹¤ë£¬ë‹¤.</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>ì„¤ëª…</p>
<ul>
<li>ì´ë¦„ì´ <code>javax.persistence</code> ë¡œ ì‹œì‘í•˜ëŠ” ì†ì„±ì€ JPA í‘œì¤€ ì†ì„±ì´ë‹¤. ë”°ë¼ì„œ íŠ¹ì • êµ¬í˜„ì²´ (Hibernate ë“±)ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>
<li><code>hibernate</code> ë¡œ ì‹œì‘í•˜ëŠ” ì†ì„±ì€ í•˜ì´ë²„ë„¤ì´íŠ¸ ì „ìš© ì†ì„±ì´ë¯€ë¡œ í•˜ì´ë²„ë„¤ì´íŠ¸ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<blockquote>
<p>DB ë°©ì–¸ì— ëŒ€í•´ì„œëŠ” ì•„ë˜ì—ì„œ ìì„¸íˆ ë‹¤ë£¬ë‹¤.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-7">ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸</h3>
<ul>
<li>JPAëŠ” íŠ¹ì • DBì— ì¢…ì†ì ì´ì§€ ì•Šì€ ê¸°ìˆ ì´ë‹¤.</li>
<li>ë”°ë¼ì„œ, ë‹¤ë¥¸ DBë¡œ ì†ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤.</li>
<li><strong>í•˜ì§€ë§Œ ê° DBë§ˆë‹¤ SQL ë¬¸ë²•ê³¼ í•¨ìˆ˜ê°€ ì¡°ê¸ˆì”© ë‹¤ë¥´ë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.</strong></li>
<li>SQL í‘œì¤€ì„ ì§€í‚¤ì§€ ì•Šê±°ë‚˜ íŠ¹ì • DBë§Œì˜ ê³ ìœ í•œ ê¸°ëŠ¥ì„ JPAì—ì„œëŠ” <strong>ë°©ì–¸</strong>ì´ë¼ê³  í•œë‹¤.</li>
<li><strong>ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì, JPA êµ¬í˜„ì²´(Hibernate ë“±)ì—ì„œëŠ” ë‹¤ì–‘í•œ DB ë°©ì–¸ í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤.</strong>
<ul>
<li>íŠ¹ì • DBì— ì˜ì¡´ì ì¸ SQLì„ DB ë°©ì–¸ì´ ì²˜ë¦¬í•´ì¤€ë‹¤.</li>
<li>ë”°ë¼ì„œ, DBê°€ ë³€ê²½ë˜ì–´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ë³€ê²½í•  í•„ìš” ì—†ì´, DB ë°©ì–¸ë§Œ êµì²´í•˜ë©´ ëœë‹¤.</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-8">ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ</h2>
<h3 id="jpa----main">JPA ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ í´ë˜ìŠ¤ (main)</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JpaMain</span> <span class="o">{</span>
<p><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ìƒì„±&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;EntityManagerFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Persistence&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createEntityManagerFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;jpabook&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;EntityManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;em&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;emf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createEntityManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;EntityTransaction&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getTransaction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ íšë“&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//íŠ¸ëœì­ì…˜ ì‹œì‘&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;logic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;commit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//íŠ¸ëœì­ì…˜ ì»¤ë°‹&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rollback&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//íŠ¸ëœì­ì…˜ ë¡¤ë°±&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//ì—”í‹°í‹° ë§¤ë‹ˆì € ì¢…ë£Œ&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;emf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ì¢…ë£Œ&lt;/span&gt;
</code></pre>
<p><span class="o">}</span></p>
<p><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">logic</span><span class="o">(</span><span class="nc">EntityManager</span> <span class="n">em</span><span class="o">)</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;id1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;member&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setUsername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ì§€í•œ&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ë“±ë¡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;persist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ìˆ˜ì •&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//í•œ ê±´ ì¡°íšŒ&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;findMember&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;findMember=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;findMember&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getUsername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;, age=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;findMember&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ëª©ë¡ ì¡°íšŒ&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;members&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createQuery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;select m from Member m&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getResultList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;members.size=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;members&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ì‚­ì œ&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li>ìœ„ ì½”ë“œëŠ” í¬ê²Œ ì•„ë˜ì²˜ëŸ¼ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
<ul>
<li>ì—”í‹°í‹° ë§¤ë‹ˆì € ì„¤ì •</li>
<li>íŠ¸ëœì­ì…˜ ê´€ë¦¬</li>
<li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</li>
</ul>
</li>
<li>ê° í•­ëª©ì— ëŒ€í•´ í•˜ë‚˜ì”© ì•Œì•„ë³´ì.</li>
</ul>
<br/>
<h3 id="section-9">ì—”í‹°í‹° ë§¤ë‹ˆì € ì„¤ì •</h3>
<ol>
<li>ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ ìƒì„±
<ul>
<li><code>EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;jpabook&quot;);</code>
<ul>
<li>ìœ„ ì½”ë“œë¥¼ ì‘ì„±ì‹œ, <code>META-INF/persistence.xml</code> íŒŒì¼ì—ì„œ <strong>ì´ë¦„ì´ jpabookì¸ ì˜ì†ì„± ìœ ë‹›ì„ ì°¾ì•„ì„œ ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ìƒì„±</strong>í•œë‹¤.
<ul>
<li>ì¦‰ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë°›ì€, í•´ë‹¹ ì´ë¦„ì„ ê°–ëŠ” ì˜ì†ì„± ìœ ë‹›ì„ <code>persistence.xml</code> ì—ì„œ ì°¾ì•„ë‚´ì–´, í•´ë‹¹ ì •ë³´ë¡œ ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ìƒì„±í•œë‹¤.</li>
</ul>
</li>
<li><strong>ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ë”± í•œ ë²ˆë§Œ ìƒì„±í•˜ê³  ê³µìœ í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</strong>
<ul>
<li>ì™œëƒí•˜ë©´, ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ ì†Œìš”ë˜ëŠ” ë¹„ìš©ì´ ë§¤ìš° í¬ë‹¤.</li>
<li>ì†Œìš” ë¹„ìš©
<ul>
<li><code>persistence.xml</code> ì„¤ì • ì •ë³´ ì½ì€ ë’¤, JPAë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ê¸°ë°˜ ê°ì²´ ìƒì„±</li>
<li>JPA êµ¬í˜„ì²´ì— ë”°ë¼ì„œëŠ” DB ì»¤ë„¥ì…˜ í’€ê¹Œì§€ ìƒì„±</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>JPA ì‹œì‘ ì „ì— ë¨¼ì €, <code>**persistence.xml</code> ì˜ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.**</li>
<li>ì´ë•Œ <code>Persistence</code> í´ë˜ìŠ¤ê°€ ì‚¬ìš©ëœë‹¤.
<ul>
<li>í•´ë‹¹ í´ë˜ìŠ¤ëŠ” ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë¥¼ ìƒì„±í•´ì„œ JPAë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì¤€ë¹„í•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<ol start="2">
<li>ì—”í‹°í‹° ë§¤ë‹ˆì € ìƒì„±
<ul>
<li><code>EntityManager em = emf.createEntityManager();</code>
<ul>
<li>ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ì—ì„œ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ìƒì„±í•œë‹¤.</li>
</ul>
</li>
<li>ì—”í‹°í‹° ë§¤ë‹ˆì €
<ul>
<li><strong>JPAì˜ ê¸°ëŠ¥ ëŒ€ë¶€ë¶„ì€ ì—”í‹°í‹° ë§¤ë‹ˆì €ê°€ ì œê³µí•œë‹¤.</strong>
<ul>
<li>ëŒ€í‘œì ì¸ ê¸°ëŠ¥ìœ¼ë¡œ, ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•œ ì—”í‹°í‹° CRUD ì‘ì—…ì´ ì¡´ì¬í•œë‹¤.</li>
</ul>
</li>
<li>ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” ë‚´ë¶€ì— ë°ì´í„°ì†ŒìŠ¤(DB ì»¤ë„¥ì…˜)ì„ ìœ ì§€í•˜ë©´ì„œ DBì™€ í†µì‹ í•œë‹¤.
<ul>
<li>ë”°ë¼ì„œ, ê°œë°œìëŠ” ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ê°€ìƒì˜ DBë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
<li><strong>ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” DB ì»¤ë„¥ì…˜ê³¼ ë°€ì ‘í•œ ê´€ê³„ê°€ ìˆìœ¼ë¯€ë¡œ, ì“°ë ˆë“œ ê°„ì˜ ê³µìœ ë‚˜ ì¬ì‚¬ìš©ì„ í•˜ë©´ ì•ˆëœë‹¤.</strong></li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<ol start="3">
<li>ì¢…ë£Œ
<ul>
<li><code>em.close();</code>
<ul>
<li>ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ì´ ëë‚œ ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” ìœ„ì™€ ê°™ì´ ë°˜ë“œì‹œ ì¢…ë£Œí•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
<li><code>emf.close();</code>
<ul>
<li>ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•  ë•Œ, ì—”í‹°í‹° ë§¤ë‹ˆì € íŒ©í† ë¦¬ë„ ìœ„ì™€ ê°™ì´ ë°˜ë“œì‹œ ì¢…ë£Œí•´ì•¼ í•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ol>
<br/>
<h3 id="section-10">íŠ¸ëœì­ì…˜ ê´€ë¦¬</h3>
<ul>
<li>JPAë¥¼ ì‚¬ìš©í•˜ë©´, í•­ìƒ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.</li>
<li>íŠ¸ëœì­ì…˜ ì—†ì´ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.</li>
<li>íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´, ì—”í‹°í‹° ë§¤ë‹ˆì €ì—ì„œ íŠ¸ëœì­ì…˜ APIë¥¼ ë°›ì•„ì™€ì•¼ í•œë‹¤.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">EntityTransaction</span> <span class="n">tx</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span> <span class="c1">//íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ íšë“</span>
<p><span class="k">try</span> <span class="o">{</span>
<span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span> <span class="c1">//íŠ¸ëœì­ì…˜ ì‹œì‘</span>
<span class="n">logic</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>  <span class="c1">//ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</span>
<span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span><span class="c1">//íŠ¸ëœì­ì…˜ ì»¤ë°‹</span></p>
<p><span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="n">tx</span><span class="o">.</span><span class="na">rollback</span><span class="o">();</span> <span class="c1">//íŠ¸ëœì­ì…˜ ë¡¤ë°±</span></p>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>EntityTransaction tx = em.getTransaction();</code>
<ul>
<li>ì—”í‹°í‹° ë§¤ë‹ˆì €ë¡œë¶€í„° íŠ¸ëœì­ì…˜ì„ ë°›ì•„ì˜¨ë‹¤.</li>
</ul>
</li>
<li><code>tx.commit();</code>
<ul>
<li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì •ìƒ ë™ì‘í•˜ë©´, íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•œë‹¤.</li>
</ul>
</li>
<li><code>tx.rollback();</code>
<ul>
<li>ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ íŠ¸ëœì­ì…˜ì„ ë¡¤ë°±í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-11">ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</h3>
<ul>
<li>
<p>ìœ„ ì˜ˆì‹œì—ì„œì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li>íšŒì› ì—”í‹°í‹°ë¥¼ í•˜ë‚˜ ìƒì„±í•œ ë‹¤ìŒ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•´ DBì— CRUD ì‘ì—…ì„ í•œë‹¤.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">logic</span><span class="o">(</span><span class="nc">EntityManager</span> <span class="n">em</span><span class="o">)</span> <span class="o">{</span>
<p><span class="nc">String</span> <span class="n">id</span> <span class="o">=</span> <span class="s">â€œid1â€</span><span class="o">;</span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="n">member</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">â€œì§€í•œâ€</span><span class="o">);</span>
<span class="n">member</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span></p>
<p><span class="c1">//ë“±ë¡</span>
<span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span></p>
<p><span class="c1">//ìˆ˜ì •</span>
<span class="n">member</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span></p>
<p><span class="c1">//í•œ ê±´ ì¡°íšŒ</span>
<span class="nc">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">â€œfindMember=â€</span> <span class="o">+</span> <span class="n">findMember</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">+</span> <span class="s">â€, age=â€</span> <span class="o">+</span> <span class="n">findMember</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span></p>
<p><span class="c1">//ëª©ë¡ ì¡°íšŒ</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">â€œselect m from Member mâ€</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">â€œmembers.size=â€</span> <span class="o">+</span> <span class="n">members</span><span class="o">.</span><span class="na">size</span><span class="o">());</span></p>
<p><span class="c1">//ì‚­ì œ</span>
<span class="n">em</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">member</span><span class="o">);</span></p>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li>ë“±ë¡, ìˆ˜ì •, ì‚­ì œ, ì¡°íšŒ ì‘ì—…ì´ ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ í†µí•´ì„œ ìˆ˜í–‰ëœë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>ë“±ë¡
<ul>
<li><code>em.persist(member);</code></li>
<li>ì—”í‹°í‹°ë¥¼ ì €ì¥í•˜ë ¤ë©´, ì—”í‹°í‹° ë§¤ë‹ˆì €ì˜ <code>persist()</code> ë©”ì„œë“œì— ì €ì¥í•  ì—”í‹°í‹°ë¥¼ ë„˜ê²¨ì£¼ë©´ ëœë‹¤.</li>
<li>JPAê°€ ë§¤í•‘ ì •ë³´(ì• ë„ˆí…Œì´ì…˜)ë¥¼ ë¶„ì„í•´ì„œ ë§Œë“¤ì–´ë‚¸ SQL
<ul>
<li><code>INSERT INTO MEMBER (ID, NAME, AGE) VALUES ('id1', 'ì§€í•œ', 2)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>ìˆ˜ì •
<ul>
<li><code>member.setAge(20);</code></li>
<li>ì—”í‹°í‹°ë¥¼ ìˆ˜ì •í•œ í›„ì— ìˆ˜ì • ë‚´ìš©ì„ ë°˜ì˜í•˜ë ¤ë©´, <strong>ê·¸ì € ì—”í‹°í‹°ì˜ í”„ë¡œí¼í‹°ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì „ë¶€</strong>ì´ë‹¤.</li>
<li>JPAëŠ” ì–´ë–¤ ì—”í‹°í‹°ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì¶”ì í•˜ëŠ” ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, <strong>ì—”í‹°í‹°ì˜ ê°’ë§Œ ë³€ê²½í•˜ë©´ ì•Œì•„ì„œ <code>UPDATE</code> SQLì„ ìƒì„±í•˜ì—¬ DBì— ê°’ì„ ë³€ê²½í•œë‹¤.</strong></li>
<li>JPAê°€ ë§¤í•‘ ì •ë³´(ì• ë„ˆí…Œì´ì…˜)ë¥¼ ë¶„ì„í•´ì„œ ë§Œë“¤ì–´ë‚¸ SQL
<ul>
<li><code>UPDATE MEMBER SET AGE=20, NAME='ì§€í•œ' WHERE ID='id1'</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>ì‚­ì œ
<ul>
<li><code>em.remove(member);</code></li>
<li>ì—”í‹°í‹°ë¥¼ ì‚­ì œí•˜ë ¤ë©´, ì—”í‹°í‹° ë§¤ë‹ˆì €ì˜ <code>remove()</code> ë©”ì†Œë“œì— ì‚­ì œí•˜ë ¤ëŠ” ì—”í‹°í‹°ë¥¼ ë„˜ê²¨ì¤€ë‹¤.</li>
<li>JPAê°€ ë§¤í•‘ ì •ë³´(ì• ë„ˆí…Œì´ì…˜)ë¥¼ ë¶„ì„í•´ì„œ ë§Œë“¤ì–´ë‚¸ SQL
<ul>
<li><code>DELETE FROM MEMBER WHERE ID='id1'</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>í•œ ê±´ ì¡°íšŒ
<ul>
<li><code>Member findMember = em.find(Member.class, id);</code></li>
<li>â€˜ì¡°íšŒí•  ì—”í‹°í‹° íƒ€ì…â€™ê³¼ â€˜@IDâ€™ì„ í†µí•´, DB í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ì™€ ë§¤í•‘í•œ ì‹ë³„ì ê°’ìœ¼ë¡œ ì—”í‹°í‹° í•˜ë‚˜ë¥¼ ì¡°íšŒí•œë‹¤.</li>
<li>JPAê°€ ë§¤í•‘ ì •ë³´(ì• ë„ˆí…Œì´ì…˜)ë¥¼ ë¶„ì„í•´ì„œ ë§Œë“¤ì–´ë‚¸ SQL
<ul>
<li><code>SELECT * FROM MEMBER WHERE ID='id1'</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>ì—¬ëŸ¬ ê±´ ì¡°íšŒ
<ul>
<li>ì•„ë˜ì—ì„œ ìì„¸íˆ ì„¤ëª…í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="jpql">JPQL</h3>
<ul>
<li>í•˜ë‚˜ ì´ìƒì˜ íšŒì› ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ì½”ë“œë¥¼ ìì„¸íˆ ì‚´í´ë³´ì.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select m from Member m"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div></div>
<ul>
<li>ì›ë˜ JPAëŠ” ì—”í‹°í‹° ê°ì²´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œí•˜ë¯€ë¡œ, ê²€ìƒ‰ì„ í•  ë•Œë„ í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰í•´ì•¼ í•œë‹¤. ì´ì— ëŒ€í•œ ê³¼ì •ì„ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.
<ul>
<li>DBì˜ ëª¨ë“  ë°ì´í„°ë¥¼ APPìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤.</li>
<li>ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ ëª¨ë‘ ì—”í‹°í‹° ê°ì²´ë¡œ ë³€ê²½í•œë‹¤.</li>
<li>ê²€ìƒ‰ì„ ì§„í–‰í•œë‹¤.</li>
</ul>
</li>
<li><strong>í•˜ì§€ë§Œ ì´ëŸ¬í•œ ê³¼ì •ì€ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•˜ë‹¤.</strong></li>
<li><strong>ë”°ë¼ì„œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•„ìš”í•œ ë°ì´í„°ë§Œ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ ê²°êµ­ ê²€ìƒ‰ ì¡°ê±´ì´ í¬í•¨ëœ SQLì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</strong>
<ul>
<li>JPAëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ JPQLì´ë¼ëŠ” ì¿¼ë¦¬ ì–¸ì–´ë¡œ í•´ê²°í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>JPQL
<ul>
<li>ì¿¼ë¦¬ ì–¸ì–´ì˜ í•œ ì¢…ë¥˜ì´ë‹¤.</li>
<li>SQLê³¼ ë¬¸ë²•ì´ ê±°ì˜ ìœ ì‚¬í•˜ì—¬ SELECT, FROM, WHERE, GROUP BY, BAVING, JOIN ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
<li>SQLê³¼ì˜ ì°¨ì´ì 
<ul>
<li>JPQL: <strong>ì—”í‹°í‹° ê°ì²´</strong>ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•œë‹¤.</li>
<li>SQL: <strong>DB í…Œì´ë¸”</strong>ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬í•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>JPQL ì˜ˆì‹œ
<ul>
<li><code>select m from Member</code></li>
<li>ì—¬ê¸°ì„œì˜ <code>from Member</code> ëŠ” íšŒì› ì—”í‹°í‹° ê°ì²´ë¥¼ ëœ»í•œë‹¤. (<strong>MEMBER í…Œì´ë¸”ì„ ëœ»í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.</strong>)</li>
<li>JPQLì€ DBí…Œì´ë¸”ì„ ì „í˜€ ì•Œì§€ ëª»í•œë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>JPQL ì‚¬ìš©
<ul>
<li>JPQLì„ ì‚¬ìš©í•˜ë ¤ë©´, ë¨¼ì € <code>em.createQuery(JPQL, ë°˜í™˜ íƒ€ì…)</code> ë©”ì„œë“œë¥¼ ì‹¤í–‰í•´ì„œ ì¿¼ë¦¬ ê°ì²´ë¥¼ ìƒì„±í•œ í›„, ì¿¼ë¦¬ ê°ì²´ì˜ <code>getResultList()</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëœë‹¤.</li>
<li>JPAê°€ ë§¤í•‘ ì •ë³´(ì• ë„ˆí…Œì´ì…˜)ë¥¼ ë¶„ì„í•´ì„œ ë§Œë“¤ì–´ë‚¸ SQL
<ul>
<li><code>SELECT M.ID, M.NAME, M.AGE FROM MEMBER M</code></li>
</ul>
</li>
</ul>
</li>
<li>ë³´ë‹¤ ìì„¸í•œ ë‚´ìš©ì€ ì¶”í›„ì— ë‹¤ë£¨ê² ë‹¤.</li>
</ul>
<p><br><br></p>
<hr />
<br>
<div style="font-style: italic;color: gray;">
  <ul>
    <li>ê¹€ì˜í•œ, ã€ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°ã€, ì—ì´ì½˜</li>
  </ul>
  ë³¸ ê²Œì‹œê¸€ì€ ìœ„ êµì¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.
</div>
:ET