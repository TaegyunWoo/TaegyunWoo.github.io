I"…s<p><br/><br/></p>
<h1 id="section">ì„œë¸”ë¦¿ ì˜ˆì™¸ ì²˜ë¦¬</h1>
<h2 id="section-1">ê°œìš”</h2>
<ul>
<li>
<p>ìŠ¤í”„ë§ì˜ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì„¤ëª…í•˜ê¸° ì „, ìˆœìˆ˜í•œ ì„œë¸”ë¦¿ì´ ì˜ˆì™¸ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ì•Œì•„ë³´ì.</p>
</li>
<li>
<p>ë¨¼ì € ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì.</p>
<blockquote>
<p><a href="https://github.com/TaegyunWoo/TaegyunWoo.github.io/blob/master/ExampleProjects/exception.zip">í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ</a></p>
</blockquote>
</li>
</ul>
<br/>
<h3 id="section-2">ì„œë¸”ë¦¿ì´ ì²˜ë¦¬í•˜ëŠ” ì˜ˆì™¸ ì¢…ë¥˜</h3>
<ul>
<li>ì¼ë°˜ ì˜ˆì™¸ (Exception)</li>
<li>response.sendError(HTTPìƒíƒœì½”ë“œ, ì˜¤ë¥˜ë©”ì‹œì§€)</li>
</ul>
<h3 id="codeapplicationpropertiescode">ì˜ˆì™¸ì²˜ë¦¬ ì„¤ëª…ì„ ìœ„í•œ ì„¤ì •: <code>application.properties</code></h3>
<pre><code>server.error.whitelabel.enabled=false
</code></pre>
<blockquote>
<p>ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì˜ˆì™¸ í˜ì´ì§€(WhiteLabel)ë¥¼ ì ì‹œ êº¼ë‘¬ì•¼í•œë‹¤.</p>
</blockquote>
<p><br/><br/></p>
<h2 id="section-3">ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ˆì™¸ íë¦„</h2>
<h3 id="exception-">ì˜ˆì™¸(Exception) íë¦„</h3>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled.png" alt="ì˜ˆì™¸ íë¦„" /></p>
<ul>
<li>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©ì ìš”ì²­ë³„ë¡œ ì“°ë ˆë“œê°€ í• ë‹¹ë˜ê³ , ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ ì‹¤í–‰ëœë‹¤.</li>
<li>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì˜ˆì™¸ë¥¼ ì¡ì§€ ëª»í•˜ê³  ì„œë¸”ë¦¿ ë°–ìœ¼ë¡œ ì˜ˆì™¸ê°€ ì „ë‹¬ë˜ë©´, <strong>ê²°êµ­ WAS(í†°ìº£)ê¹Œì§€ ì˜ˆì™¸ê°€ ì „ë‹¬ë˜ê³  ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.</strong></li>
</ul>
<br/>
<h3 id="responsesenderror-">response.sendError() íë¦„</h3>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%201.png" alt="sendError íë¦„" /></p>
<ul>
<li>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ì˜¤ì§ <code>sendError()</code> ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ, <strong>ì¸í„°ì…‰í„°ì™€ ì„œë¸”ë¦¿, í•„í„°, WASì— ì˜ˆì™¸ê°€ ì „íŒŒë˜ì§€ ì•ŠëŠ”ë‹¤.</strong>
<ul>
<li>ì™œëƒí•˜ë©´, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•œ ì ì´ ì—†ê³  ë‹¨ìˆœíˆ <code>sendError()</code> ë¥¼ í˜¸ì¶œí–ˆê¸° ë•Œë¬¸ì´ë‹¤.</li>
</ul>
</li>
<li>WASê¹Œì§€ ì „ë‹¬ë°›ì€ ì˜ˆì™¸ê°€ ì—†ì§€ë§Œ, <strong><code>sendError()</code> ê°€ í˜¸ì¶œëœ ê¸°ë¡ì„ WASê°€ í™•ì¸í•˜ì—¬ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.</strong></li>
</ul>
<p><br/><br/></p>
<h2 id="section-4">ì˜ˆì™¸ ì²˜ë¦¬ ì˜ˆì‹œ</h2>
<h3 id="codeexceptioncontrollercode-">ì˜ˆì™¸ ë°œìƒ ì½”ë“œ: <code>ExceptionController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExceptionController</span> <span class="o">{</span></p>
<p><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">â€/exceptionâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">throwException</span><span class="o">()</span> <span class="o">{</span>
<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">â€œì‚¬ìš©ì ì˜ˆì™¸ ë°œìƒ!â€</span><span class="o">);</span>
<span class="o">}</span></p>
<p><span class="o">}</span>
</code></pre></div></div>
<br/></p>
<h3 id="section-5">í˜¸ì¶œ ê²°ê³¼</h3>
<ul>
<li>í˜¸ì¶œ: <code>http://localhost:8080/exception</code></li>
</ul>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%202.png" alt="í˜¸ì¶œ ê²°ê³¼" /></p>
<ul>
<li><strong>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ê°€ ì²˜ë¦¬ë˜ì§€ ëª»í•˜ê³  WASê¹Œì§€ ì „íŒŒë˜ì–´, í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì—ëŸ¬í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.</strong></li>
</ul>
<p><br/><br/></p>
<h2 id="senderror--">sendError() ì²˜ë¦¬ ì˜ˆì‹œ</h2>
<h3 id="senderror--codeexceptioncontrollercode-">sendError() ì½”ë“œ: <code>ExceptionController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExceptionController</span> <span class="o">{</span></p>
<p><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">â€/exceptionâ€</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">throwException</span><span class="o">()</span> <span class="o">{</span>
<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">â€œì‚¬ìš©ì ì˜ˆì™¸ ë°œìƒ!â€</span><span class="o">);</span>
<span class="o">}</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/sendError&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
</code></pre>
<p><span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendErrorToWAS</span><span class="o">(</span><span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
<span class="n">response</span><span class="o">.</span><span class="na">sendError</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="s">â€œsendError í˜¸ì¶œ!â€</span><span class="o">);</span>
<span class="o">}</span></p>
<p><span class="o">}</span>
</code></pre></div></div>
<br/></p>
<h3 id="section-6">í˜¸ì¶œ ê²°ê³¼</h3>
<ul>
<li>í˜¸ì¶œ: <code>http://localhost:8080/sendError</code></li>
</ul>
<br/>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%203.png" alt="í˜¸ì¶œ ê²°ê³¼" /></p>
<br/>
<ul>
<li><strong>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í˜¸ì¶œí•œ <code>sendError()</code>ê°€ ì²˜ë¦¬ë˜ì§€ ëª»í•˜ê³  WASê°€ í˜¸ì¶œê¸°ë¡ì„ í™•ì¸í•˜ì—¬, í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì—ëŸ¬í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.</strong></li>
</ul>
<p><br/><br/></p>
<h2 id="section-7">ì˜¤ë¥˜ í™”ë©´ ì œê³µ</h2>
<ul>
<li>ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì œê³µí•˜ëŠ” ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬ í™”ë©´ì€ ê³ ê° ì¹œí™”ì ì´ì§€ ì•Šë‹¤.</li>
<li>ìˆœìˆ˜ ì„œë¸”ë¦¿: <code>web.xml</code> íŒŒì¼ì„ í†µí•´ ì˜¤ë¥˜ í˜ì´ì§€ ë“±ë¡</li>
<li>ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ í†µí•œ ì„œë¸”ë¦¿: <code>implements WebServerFactoryCustomizer&lt;ConfigurableWebServerFactory&gt;</code></li>
</ul>
<br/>
<h3 id="codewebservercustomizercode-">ì˜¤ë¥˜ í™”ë©´ ë“±ë¡: <code>WebServerCustomizer</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebServerCustomizer</span> <span class="kd">implements</span> <span class="nc">WebServerFactoryCustomizer</span><span class="o">&lt;</span><span class="nc">ConfigurableWebServerFactory</span><span class="o">&gt;</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;customize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ConfigurableWebServerFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ErrorPage&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorPage404&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ErrorPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NOT_FOUND&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/error-page/404&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ErrorPage&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorPage500&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ErrorPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;INTERNAL_SERVER_ERROR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/error-page/500&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ErrorPage&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorPageEx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ErrorPage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/error-page/500&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addErrorPages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errorPage404&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errorPage500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>ErrorPage(ì„¤ì •í• _ì˜¤ë¥˜_ì¢…ë¥˜, ë‚´ë¶€ìš”ì²­í• _URL)</code></li>
</ul>
<br/>
<h3 id="codeerrorpagecontrollercode-">ì¬ìš”ì²­ ì²˜ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬: <code>ErrorPageController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorPageController</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/error-page/404&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;errorPage404&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;error-page/404&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/error-page/500&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;errorPage500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;error-page/500&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<blockquote>
<p>ì¬ìš”ì²­ì— ëŒ€í•´ì„  ë’¤ì— ìì„¸íˆ ì„¤ëª…í•œë‹¤. ì¼ë‹¨ ì½”ë“œì— ì§‘ì¤‘í•˜ì.</p>
</blockquote>
<br/>
<h3 id="code404htmlcode">ì˜¤ë¥˜ì²˜ë¦¬ ë·° í…œí”Œë¦¿: <code>404.html</code></h3>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>404 ì˜¤ë¥˜ í˜ì´ì§€!<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<br/>
<h3 id="code500htmlcode">ì˜¤ë¥˜ì²˜ë¦¬ ë·° í…œí”Œë¦¿: <code>500.html</code></h3>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>500 ì˜¤ë¥˜ í˜ì´ì§€!<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<br/>
<h3 id="section-8">ê²°ê³¼ 1</h3>
<ul>
<li>
<p>ìš”ì²­URL</p>
<p><code>http://localhost:8080/ì¡´ì¬í•˜ì§€ì•ŠëŠ”í˜ì´ì§€</code></p>
</li>
<li>
<p>ê²°ê³¼</p>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%204.png" alt="ê²°ê³¼" /></p>
</li>
</ul>
<br/>
<h3 id="section-9">ê²°ê³¼ 2</h3>
<ul>
<li>
<p>ìš”ì²­URL</p>
<p><code>http://localhost:8080/sendError</code></p>
</li>
<li>
<p>ê²°ê³¼</p>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%205.png" alt="ê²°ê³¼" /></p>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-10">ì˜¤ë¥˜ í˜ì´ì§€ ì‘ë™ ì›ë¦¬</h2>
<ul>
<li><strong><code>Exception</code> (ì˜ˆì™¸)ê°€ ë°œìƒí•˜ì—¬ ì„œë¸”ë¦¿ ë°–ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê²½ìš°</strong></li>
<li><strong><code>response.sendError()</code> ê°€ í˜¸ì¶œë˜ëŠ” ê²½ìš°</strong></li>
</ul>
<p>ì„œë¸”ë¦¿ì€ ìœ„ ë‘ê°€ì§€ ê²½ìš°ì— ì„¤ì •ëœ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ì°¾ëŠ”ë‹¤.</p>
<br/>
<h3 id="section-11">ì˜ˆì™¸ ë°œìƒ íë¦„ê³¼ ë‚´ë¶€ìš”ì²­</h3>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%206.png" alt="ì˜ˆì™¸ ë°œìƒ íë¦„ê³¼ ë‚´ë¶€ìš”ì²­" /></p>
<ol>
<li>WASëŠ” <strong>í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜¤ë¥˜ í˜ì´ì§€ ì •ë³´ë¥¼ í™•ì¸</strong>í•œë‹¤.
<ul>
<li><code>new ErrorPage(ì˜¤ë¥˜ì¢…ë¥˜, ë‚´ë¶€ìš”ì²­í• _URL)</code></li>
<li><code>new ErrorPage(RuntimeException.class, &quot;/error-page/500&quot;)</code> ë“±</li>
</ul>
</li>
<li>í•´ë‹¹ ì˜¤ë¥˜ í˜ì´ì§€ ì •ë³´ ì¤‘ <strong>â€œë‚´ë¶€ìš”ì²­í•  URL ì •ë³´â€ë¥¼ ì°¸ê³ í•˜ì—¬ ì¬ìš”ì²­í•œë‹¤.</strong></li>
</ol>
<br/>
<h3 id="codesenderrorcode--"><code>sendError()</code> íë¦„ê³¼ ë‚´ë¶€ìš”ì²­</h3>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%207.png" alt="sendError()" /></p>
<ol>
<li>WASëŠ” <strong>í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜¤ë¥˜ í˜ì´ì§€ ì •ë³´ë¥¼ í™•ì¸</strong>í•œë‹¤.
<ul>
<li><code>new ErrorPage(ì˜¤ë¥˜ì¢…ë¥˜, ë‚´ë¶€ìš”ì²­í• _URL)</code></li>
<li><code>new ErrorPage(RuntimeException.class, &quot;/error-page/500&quot;)</code> ë“±</li>
</ul>
</li>
<li>í•´ë‹¹ ì˜¤ë¥˜ í˜ì´ì§€ ì •ë³´ ì¤‘ <strong>â€œë‚´ë¶€ìš”ì²­í•  URL ì •ë³´â€ë¥¼ ì°¸ê³ í•˜ì—¬ ì¬ìš”ì²­í•œë‹¤.</strong></li>
</ol>
<br/>
<h3 id="point">Point!</h3>
<ul>
<li><strong>ì›¹ ë¸Œë¼ìš°ì €(í´ë¼ì´ì–¸íŠ¸)ëŠ” ì„œë²„ ë‚´ë¶€ì—ì„œ ì´ëŸ° ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì „í˜€ ëª¨ë¥¸ë‹¤.</strong></li>
<li><strong>ì˜¤ì§ ì„œë²„ ë‚´ë¶€ì—ì„œ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ì°¾ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ í˜¸ì¶œì„ í•œë‹¤.</strong></li>
</ul>
<p><br/><br/></p>
<h2 id="section-12">ì˜ˆì™¸ ë°œìƒì‹œ, ì„œë²„ê°€ ë‹´ì•„ì£¼ëŠ” ì˜ˆì™¸ ì •ë³´</h2>
<ul>
<li>ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´, WASê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì¬ìš”ì²­ì„ ìˆ˜í–‰í•œë‹¤.</li>
<li><strong>ì´ë•Œ, <code>HttpServletRequest</code> ê°ì²´ì— ì˜¤ë¥˜ ì •ë³´ë¥¼ ë‹´ì•„ì¤€ë‹¤.</strong></li>
</ul>
<br/>
<h3 id="section-13">ì˜¤ë¥˜ ì •ë³´ ì¢…ë¥˜</h3>
<ul>
<li><code>javax.servlet.error.exception</code>
<ul>
<li>ì˜ˆì™¸</li>
</ul>
</li>
<li><code>javax.servlet.error.exception_type</code>
<ul>
<li>ì˜ˆì™¸ íƒ€ì…</li>
</ul>
</li>
<li><code>javax.servlet.error.message</code>
<ul>
<li>ì˜¤ë¥˜ ë©”ì‹œì§€</li>
</ul>
</li>
<li><code>javax.servlet.error.request_uri</code>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ URI</li>
</ul>
</li>
<li><code>javax.servlet.error.servlet_name</code>
<ul>
<li>ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì„œë¸”ë¦¿ ì´ë¦„</li>
</ul>
</li>
<li><code>javax.servlet.error.status_code</code>
<ul>
<li>HTTP ìƒíƒœ ì½”ë“œ</li>
</ul>
</li>
</ul>
<br/>
<h3 id="codeerrorpagecontrollercode--1">ì˜¤ë¥˜ ì •ë³´ ì‚¬ìš© ì˜ˆì‹œ: <code>ErrorPageController</code> í´ë˜ìŠ¤</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorPageController</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/error-page/500&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;errorPage500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HttpServletResponse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAttribute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;javax.servlet.error.status_code&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<p><br/><br/></p>
<h2 id="section-14">í•„í„°ë¥¼ í™œìš©í•œ ì˜ˆì™¸ ì²˜ë¦¬</h2>
<ul>
<li>ì„œë²„ ë‚´ë¶€ì—ì„œ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤, í•„í„°ì™€ ì¸í„°ì…‰í„°ê°€ ë‹¤ì‹œ í˜¸ì¶œëœë‹¤. ì´ê²ƒì€ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë‹¤.</li>
<li><code>DispatcherType</code> ì´ë¼ëŠ” ì¶”ê°€ ì •ë³´ë¥¼ í†µí•´, ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</li>
<li><code>DispatcherType</code> ì€ ì–´ë–¤ ì¢…ë¥˜ì˜ ìš”ì²­ì¸ì§€ ì•Œë ¤ì¤€ë‹¤.</li>
</ul>
<br/>
<h3 id="codedispatchertypecode--"><code>DispatcherType</code> ì˜ ì¢…ë¥˜</h3>
<ul>
<li><code>REQUEST</code>
<ul>
<li>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­</li>
</ul>
</li>
<li><code>ERROR</code>
<ul>
<li>ì˜¤ë¥˜ ìš”ì²­</li>
</ul>
</li>
<li><code>FORWARD</code>
<ul>
<li>ì„œë¸”ë¦¿ì—ì„œ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPë¥¼ í˜¸ì¶œí•  ë•Œ</li>
</ul>
</li>
<li><code>INCLUDE</code>
<ul>
<li>ì„œë¸”ë¦¿ì—ì„œ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPì˜ ê²°ê³¼ë¥¼ í¬í•¨í•  ë•Œ</li>
</ul>
</li>
<li><code>ASYNC</code>
<ul>
<li>ì„œë¸”ë¦¿ ë¹„ë™ê¸° í˜¸ì¶œ</li>
</ul>
</li>
</ul>
<br/>
<h3 id="codedispatchertypecode-">í•„í„°ì™€ <code>DispatcherType</code> í™œìš©</h3>
<ul>
<li>
<p>Logë¥¼ ì°ëŠ” í•„í„°ì— <code>DispatcherType</code> ì„ ì ìš©í•˜ì—¬, <strong>ë‚´ë¶€í˜¸ì¶œì—ëŠ” í•„í„°ê°€ ì ìš©ë˜ì§€ ì•Šë„ë¡ êµ¬í˜„í•œë‹¤. (ëª©í‘œ: ì˜¤ë¥˜ì‹œì—ëŠ” ë¡œê·¸ë¥¼ ì°ì§€ ì•Šë„ë¡ êµ¬í˜„)</strong></p>
<blockquote>
<p>ì›ë˜ ì˜¤ë¥˜ì‹œì— ë¡œê¹…ì„ í†µí•´ ê¸°ë¡ì„ ë‚¨ê¸°ëŠ” ê²ƒì´ ì¢‹ì§€ë§Œ, ì˜ˆì‹œë¥¼ ìœ„í•´ ì´ì™€ ê°™ì´ ì§„í–‰í•œë‹¤.</p>
</blockquote>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>í•„í„° êµ¬í˜„: <code>LogFilter</code> í´ë˜ìŠ¤</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogFilter</span> <span class="kd">implements</span> <span class="nc">Filter</span> <span class="o">{</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">doFilter</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">FilterChain</span> <span class="n">chain</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ServletException</span> <span class="o">{</span>
<span class="k">try</span> <span class="o">{</span>
<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">â€œë¡œê·¸ í•„í„° doFilter í˜¸ì¶œâ€</span><span class="o">);</span>
<span class="n">chain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
<span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
<span class="o">}</span></p>
<pre><code>&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;FilterConfig&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filterConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ServletException&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ë¡œê·¸ í•„í„° init í˜¸ì¶œ&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ë¡œê·¸ í•„í„° destroy í˜¸ì¶œ&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
</ul>
<br/>
<ul>
<li>
<p><strong>í•„í„° ë“±ë¡: <code>WebConfig</code> í´ë˜ìŠ¤</strong></p>
<ul>
<li><code>DispatcherType</code> ì„ í™œìš©í•˜ì—¬, í•„í„°ë¥¼ ì ìš©í•˜ì§€ ì•Šì„ ìš”ì²­ êµ¬ë¶„</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">...</span>
<p><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="o">{</span></p>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@Bean&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FilterRegistrationBean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;logFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;FilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Filter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LogFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOrder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addUrlPatterns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//DispatcherType ì´ REQUESTì¸ ê²½ìš°ì—ë§Œ í•„í„° í˜¸ì¶œ&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setDispatcherTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;DispatcherType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;REQUEST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;cm&quot;&gt;/*
    filterFilterRegistrationBean.setDispatcherTypes(DispatcherType.ERROR);
    ìœ„ ì½”ë“œì‘ì„±ì‹œ, ERROR ì¼ë•Œë§Œ (ë‚´ë¶€í˜¸ì¶œì¼ë•Œ) í•„í„°ê°€ ì ìš©ëœë‹¤.
     */&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filterFilterRegistrationBean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li><code>setDispatcherTypes(DispatcherType.REQUEST)</code>
<ul>
<li><code>DispatcherType</code> ì´ REQUESTì¸ ìš”ì²­ì— ëŒ€í•´ì„œë§Œ í•„í„°ê°€ ë™ì‘í•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-15">ì „ì²´ íë¦„ ì •ë¦¬</h2>
<h3 id="codehellocode--"><code>/hello</code> ì •ìƒ ìš”ì²­</h3>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%208.png" alt="/hello" /></p>
<br/>
<h3 id="codeexceptioncode--"><code>/exception</code> ì˜¤ë¥˜ ìš”ì²­</h3>
<ul>
<li>í•„í„°ëŠ” <code>DispatchType</code> ìœ¼ë¡œ ì¤‘ë³µ í˜¸ì¶œ ì œê±°</li>
</ul>
<blockquote>
<p>ì¸í„°ì…‰í„°ì˜ ê²½ìš°, <code>excludePathPatterns()</code> ë©”ì„œë“œë¥¼ í†µí•´ í˜¸ì¶œì´ ì•ˆë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ë„ ìˆë‹¤.</p>
</blockquote>
<p><img src="/assets/img/2021-08-16-SPRING_MVC_ExceptionServlet/Untitled%209.png" alt="ì˜¤ë¥˜ ìš”ì²­" /></p>
<br>
<hr />
<br>
<p><a href="https://inf.run/YPER"><img src="/assets/img/Inflearn_Spring_MVC2/logo.png" width="400px" height="300px"></a></p>
<ul>
<li><em>ë³¸ ê²Œì‹œê¸€ì€ ê¹€ì˜í•œë‹˜ì˜ ê°•ì˜ë¥¼ í† ëŒ€ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.</em></li>
<li><em>ë” ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì´ ê³„ì‹ ë‹¤ë©´, í•´ë‹¹ ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</em></li>
</ul>
:ET