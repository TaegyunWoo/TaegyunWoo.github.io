I"Át<p><br/><br/></p>
<ul>
<li>ì´ì „ ê²Œì‹œê¸€
<ol>
<li><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_Validation">ê²€ì¦ - ê¸°ì´ˆ</a></li>
<li><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_ValidationAndMessage">ê²€ì¦ - ì˜¤ë¥˜ì½”ë“œì™€ ë©”ì‹œì§€ì²˜ë¦¬</a></li>
</ol>
</li>
</ul>
<p><br/><br/></p>
<h1 id="section">ê²€ì¦ë¡œì§ê³¼ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶„ë¦¬</h1>
<h2 id="section-1">ê°œìš”</h2>
<p><a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_ValidationAndMessage">ì´ì „ ê¸€</a>ì—ì„œ ì‘ì„±í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë³´ì. ê²€ì¦ ê´€ë ¨ ë¡œì§ì´ ìƒë‹¹íˆ ë³µì¡í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ë²ˆ ê²Œì‹œê¸€ì—ì„œëŠ” ì´ëŸ° ë³µì¡í•œ ê²€ì¦ ë¡œì§ì„ ë”°ë¡œ ë–¼ì–´ë‚´ì–´ë‚´ëŠ” ë°©ë²•ì„ ì„¤ëª…í•  ê²ƒì´ë‹¤.</p>
<br/>
<h3 id="section-2">ëª©í‘œ</h3>
<ul>
<li>ë³µì¡í•œ ê²€ì¦ ë¡œì§ì„ ë³„ë„ë¡œ ë¶„ë¦¬í•œë‹¤.</li>
</ul>
<p><br/><br/></p>
<h2 id="codevalidatorcode-"><code>Validator</code> ì¸í„°í˜ì´ìŠ¤</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Validator</span> <span class="o">{</span>
	<span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span><span class="o">);</span>
	<span class="kt">void</span> <span class="nf">validate</span><span class="o">(</span><span class="nc">Object</span> <span class="n">target</span><span class="o">,</span> <span class="nc">Errors</span> <span class="n">errors</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<ul>
<li>ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” <code>Validator</code> ì¸í„°í˜ì´ìŠ¤ëŠ” ê²€ì¦ì„ ì²´ê³„ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ìœ„í•œ ê²ƒì´ë‹¤.</li>
<li><code>Validator</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬, ê²€ì¦ë¡œì§ì„ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë”°ë¡œ ë–¼ì–´ë‚¼ ìˆ˜ ìˆë‹¤.</li>
</ul>
<br/>
<h3 id="section-3">ë©”ì„œë“œ ì„¤ëª…</h3>
<ul>
<li><code>supports()</code>
<ul>
<li>í•´ë‹¹ ê²€ì¦ê¸°ë¥¼ ì§€ì›í•˜ëŠ” ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ</li>
</ul>
</li>
<li><code>validator()</code>
<ul>
<li>ê²€ì¦ ëŒ€ìƒ ê°ì²´ì™€ <code>BindingResult</code></li>
</ul>
</li>
</ul>
<p>ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë³´ì.</p>
<p><br/><br/></p>
<h2 id="section-4">ê¸°ì¡´ ì½”ë“œ</h2>
<p>ê¸°ì¡´ ì½”ë“œëŠ” <a href="https://taegyunwoo.github.io/spring-mvc/SPRING_MVC_ValidationAndMessage">ì´ì „ ê¸€</a>ì—ì„œ ì‚¬ìš©í•œ ê²ƒì„ ì´ìš©í•œë‹¤. ì°¸ê³ í•˜ì.</p>
<br/>
<h3 id="codeapplicationpropertiescode-"><code>application.properties</code> íŒŒì¼</h3>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring.messages.basename=messages,errors
</code></pre></div></div>
<br/>
<h3 id="codeerrorspropertiescode-"><code>errors.properties</code> íŒŒì¼</h3>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>required.item.itemName=ì•„ì´í…œ ì´ë¦„ì€ í•„ìˆ˜ë¡œ ì…ë ¥í•´ì•¼í•©ë‹ˆë‹¤.
colored.item.itemColor=ì•„ì´í…œ ìƒ‰ìƒì€ {0} ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
appleAndQuantity=ì‚¬ê³¼ëŠ” ìˆ˜ëŸ‰ì´ {0}ë³´ë‹¤ ì»¤ì•¼í•©ë‹ˆë‹¤. í˜„ì¬ ìˆ˜ëŸ‰ì€ {1} ì…ë‹ˆë‹¤.
</code></pre></div></div>
<br/>
<h3 id="section-5">ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">prac.myPrac.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">...</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ItemController</span> <span class="o">{</span>

    <span class="c1">//ì‚¬ìš©ìì—ê²Œ viewë¥¼ ì œê³µ</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/item"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">viewItemForm</span><span class="o">(</span><span class="nd">@ModelAttribute</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"itemform"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/item"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">validationWithRejectValue</span><span class="o">(</span><span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"item"</span><span class="o">)</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">,</span> <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//ì²« ë²ˆì§¸ ê²€ì¦ ì¡°ê±´ (FieldError)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">hasText</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemName</span><span class="o">()))</span> <span class="o">{</span>
            <span class="n">bindingResult</span><span class="o">.</span><span class="na">rejectValue</span><span class="o">(</span><span class="s">"itemName"</span><span class="o">,</span> <span class="s">"required"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//ë‘ ë²ˆì§¸ ê²€ì¦ ì¡°ê±´ (FieldError)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">item</span><span class="o">.</span><span class="na">getItemColor</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"GREEN"</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">Object</span><span class="o">[]</span> <span class="n">param</span> <span class="o">=</span> <span class="o">{</span><span class="s">"GREEN"</span><span class="o">};</span>
            <span class="n">bindingResult</span><span class="o">.</span><span class="na">rejectValue</span><span class="o">(</span><span class="s">"itemColor"</span><span class="o">,</span> <span class="s">"colored"</span><span class="o">,</span> <span class="n">param</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//ì„¸ ë²ˆì§¸ ê²€ì¦ ì¡°ê±´ (ObjectError)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">isAppleOver5</span><span class="o">(</span><span class="n">item</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">Object</span><span class="o">[]</span> <span class="n">param</span> <span class="o">=</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemQuantity</span><span class="o">()};</span>
            <span class="n">bindingResult</span><span class="o">.</span><span class="na">reject</span><span class="o">(</span><span class="s">"appleAndQuantity"</span><span class="o">,</span> <span class="n">param</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//ê²€ì¦ ì‹¤íŒ¨ì‹œ</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">bindingResult</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"itemform"</span><span class="o">;</span> <span class="c1">//ë‹¤ì‹œ Item ì…ë ¥ í¼ìœ¼ë¡œ</span>
        <span class="o">}</span>

        <span class="c1">//ê²€ì¦ ì„±ê³µì‹œ ë¡œì§...</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isAppleOver5</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">itemName</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemName</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">itemQuantity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemQuantity</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">itemName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Apple"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">itemQuantity</span><span class="o">&gt;</span><span class="mi">5</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<br/>
<h3 id="codeitemformhtmlcode">ë·° í…œí”Œë¦¿ (<code>itemform.html</code>)</h3>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nc">.error-class</span> <span class="p">{</span>
            <span class="nl">background-color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>ì•„ì´í…œ ì…ë ¥ í¼<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;form</span> <span class="na">th:object=</span><span class="s">"${item}"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">th:if=</span><span class="s">"${#fields.hasGlobalErrors()}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p</span> <span class="na">th:each=</span><span class="s">"error : ${#fields.globalErrors()}"</span> <span class="na">th:text=</span><span class="s">"${error}"</span><span class="nt">&gt;</span>
            ê¸€ë¡œë²Œ ì˜¤ë¥˜ (ì˜¤ë¸Œì íŠ¸ ì˜¤ë¥˜)ì‹œ, ì¶œë ¥ë˜ëŠ” íƒœê·¸
        <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">th:field=</span><span class="s">"*{itemName}"</span> <span class="na">placeholder=</span><span class="s">"ì•„ì´í…œì´ë¦„"</span> <span class="na">th:errorclass=</span><span class="s">"error-class"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">th:errors=</span><span class="s">"*{itemName}"</span><span class="nt">&gt;</span>
        ì•„ì´í…œ ì´ë¦„ ì˜¤ë¥˜ì‹œ, ì¶œë ¥ë˜ëŠ” íƒœê·¸
    <span class="nt">&lt;/div&gt;</span> <span class="nt">&lt;br/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">th:field=</span><span class="s">"*{itemColor}"</span> <span class="na">placeholder=</span><span class="s">"ì•„ì´í…œìƒ‰ìƒ"</span> <span class="na">th:errorclass=</span><span class="s">"error-class"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">th:errors=</span><span class="s">"*{itemColor}"</span><span class="nt">&gt;</span>
        ì•„ì´í…œ ìƒ‰ìƒ ì˜¤ë¥˜ì‹œ, ì¶œë ¥ë˜ëŠ” íƒœê·¸
    <span class="nt">&lt;/div&gt;</span> <span class="nt">&lt;br/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">th:field=</span><span class="s">"*{itemQuantity}"</span> <span class="na">placeholder=</span><span class="s">"ì•„ì´í…œê°œìˆ˜"</span> <span class="na">th:errorclass=</span><span class="s">"error-class"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<br/>
<h2 id="section-6">ê²€ì¦ ë¡œì§ ë¶„ë¦¬í•˜ê¸°</h2>
<p>ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ê²€ì¦ ê´€ë ¨ ë¡œì§ì„ ë–¼ì–´ë‚´ë³´ì.</p>
<br/>
<h3 id="codevalidatorcode---codeitemvalidatorcode-"><code>Validator</code> ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ (<code>ItemValidator</code> í´ë˜ìŠ¤)</h3>
<p>ì°¸ê³ ë¡œ ê²€ì¦ ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
<li><strong>itemNameì˜ ê°’ì€ ë¹ˆ ë¬¸ìì—´ì´ ì˜¬ ìˆ˜ ì—†ë‹¤.</strong></li>
<li><strong>itemColorì˜ ê°’ì€ â€œGREENâ€ ì´ì–´ì•¼ í•œë‹¤.</strong></li>
<li><strong>ë§Œì•½ itemNameì´ â€œAppleâ€ì´ë¼ë©´, itemQuantityì˜ ê°’ì€ 5ë³´ë‹¤ ì»¤ì•¼í•œë‹¤.</strong></li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">prac.myPrac.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">...</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ItemValidator</span> <span class="kd">implements</span> <span class="nc">Validator</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Item</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">isAssignableFrom</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span> <span class="c1">//Item ê°ì²´ì™€ clazz ê°ì²´ì˜ íƒ€ì…ì´ ê°™ëŠëƒ? (ìì‹í¬í•¨)</span>
    <span class="o">}</span>

    <span class="cm">/**
     * supports() ë©”ì„œë“œê°€ trueì´ë©´ í˜¸ì¶œë  ë©”ì„œë“œ
		 * ì‹¤ì œ ê²€ì¦ ë¡œì§ì„ ì‘ì„±í•œë‹¤.
     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">validate</span><span class="o">(</span><span class="nc">Object</span> <span class="n">target</span><span class="o">,</span> <span class="nc">Errors</span> <span class="n">errors</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Item</span><span class="o">)</span> <span class="n">target</span><span class="o">;</span>

        <span class="c1">//ì²« ë²ˆì§¸ ê²€ì¦ ì¡°ê±´ (FieldError)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">hasText</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemName</span><span class="o">()))</span> <span class="o">{</span>
            <span class="n">errors</span><span class="o">.</span><span class="na">rejectValue</span><span class="o">(</span><span class="s">"itemName"</span><span class="o">,</span> <span class="s">"required"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//ë‘ ë²ˆì§¸ ê²€ì¦ ì¡°ê±´ (FieldError)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">item</span><span class="o">.</span><span class="na">getItemColor</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"GREEN"</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">Object</span><span class="o">[]</span> <span class="n">param</span> <span class="o">=</span> <span class="o">{</span><span class="s">"GREEN"</span><span class="o">};</span>
            <span class="n">errors</span><span class="o">.</span><span class="na">rejectValue</span><span class="o">(</span><span class="s">"itemColor"</span><span class="o">,</span> <span class="s">"colored"</span><span class="o">,</span> <span class="n">param</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//ì„¸ ë²ˆì§¸ ê²€ì¦ ì¡°ê±´ (ObjectError)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">isAppleOver5</span><span class="o">(</span><span class="n">item</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">Object</span><span class="o">[]</span> <span class="n">param</span> <span class="o">=</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemQuantity</span><span class="o">()};</span>
            <span class="n">errors</span><span class="o">.</span><span class="na">reject</span><span class="o">(</span><span class="s">"appleAndQuantity"</span><span class="o">,</span> <span class="n">param</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isAppleOver5</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">itemName</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemName</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">itemQuantity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemQuantity</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">itemName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Apple"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">itemQuantity</span><span class="o">&gt;</span><span class="mi">5</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<ul>
<li><strong><code>validate()</code> ë©”ì„œë“œ ë‚´ë¶€ì— ì‘ì„±ëœ ì½”ë“œê°€ ê¸°ì¡´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê²€ì¦ë¶€ë¶„ê³¼ ê±°ì˜ ê°™ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</strong></li>
<li><code>@Component</code> ì„ í†µí•´ ë¹ˆ ë“±ë¡ì„ í•´ì•¼, ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì£¼ì…ë°›ì„ ìˆ˜ ìˆë‹¤.</li>
</ul>
<br/>
<h3 id="section-7">ê²€ì¦ë¡œì§ì´ ë¶„ë¦¬ëœ ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">prac.myPrac.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">...</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ItemController</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">ItemValidator</span> <span class="n">itemValidator</span><span class="o">;</span> <span class="c1">//ì˜ì¡´ê´€ê³„ ì£¼ì…</span>

  <span class="nd">@Autowired</span>
  <span class="kd">public</span> <span class="nf">ItemController</span><span class="o">(</span><span class="nc">ItemValidator</span> <span class="n">itemValidator</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">itemValidator</span> <span class="o">=</span> <span class="n">itemValidator</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">//ì‚¬ìš©ìì—ê²Œ viewë¥¼ ì œê³µ</span>
  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/item"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">viewItemForm</span><span class="o">(</span><span class="nd">@ModelAttribute</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">"itemform"</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/item"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">validationWithRejectValue</span><span class="o">(</span><span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"item"</span><span class="o">)</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">,</span> <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">)</span> <span class="o">{</span>

		<span class="cm">/*
		 * ê²€ì¦ ë¡œì§ ì‚­ì œ
		 */</span>

      <span class="n">itemValidator</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">item</span><span class="o">,</span> <span class="n">bindingResult</span><span class="o">);</span>

      <span class="c1">//ê²€ì¦ ì‹¤íŒ¨ì‹œ</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">bindingResult</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
          <span class="k">return</span> <span class="s">"itemform"</span><span class="o">;</span> <span class="c1">//ë‹¤ì‹œ Item ì…ë ¥ í¼ìœ¼ë¡œ</span>
      <span class="o">}</span>

      <span class="c1">//ê²€ì¦ ì„±ê³µì‹œ ë¡œì§...</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>
<ul>
<li><code>ItemValidator</code> ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì£¼ì… ë°›ì•„ì„œ ì§ì ‘ í˜¸ì¶œí–ˆë‹¤.</li>
<li><code>ItemValidator</code> ë¥¼ í†µí•´ ê²€ì¦ì„ ìˆ˜í–‰í–ˆë‹¤.</li>
<li><strong>ê²°ê³¼ì ìœ¼ë¡œ, ê²€ì¦ ë¡œì§ê³¼ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¶„ë¦¬ë˜ì—ˆë‹¤.</strong></li>
</ul>
<p><br/><br/></p>
<h2 id="codewebdatabindercode--codevalidatedcode"><code>WebDataBinder</code> ì™€ <code>@Validated</code></h2>
<p>ìœ„ì—ì„œ ì„¤ëª…í•œ ë°©ë²•ìœ¼ë¡œ ê²€ì¦ê¸°ë¥¼ ì¶©ë¶„íˆ ë¶„ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, ì¢€ ë” í¸ë¦¬í•œ ë°©ë²•ì´ ìˆë‹¤.</p>
<p><code>WebDataBinder</code> ì™€ <code>@Validated</code> ë¥¼ í™œìš©í•˜ë©´ ëœë‹¤.</p>
<br/>
<h3 id="codewebdatabindercode"><code>WebDataBinder</code></h3>
<ul>
<li><code>@InitBinder</code> ë¥¼ í†µí•´ ê²€ì¦ê¸° (<code>ItemValidator</code> ì™€ ê°™ì€) ë¥¼ <code>WebDataBinder</code> ì— ë“±ë¡í•˜ë©´, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê²€ì¦ê¸°ë¥¼ ìë™ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆë‹¤.</li>
<li><code>@InitBinder</code> ëŠ” í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë§Œ ì ìš©ëœë‹¤.</li>
</ul>
<br/>
<h3 id="codevalidatedcode"><code>@Validated</code></h3>
<ul>
<li><code>WebDataBinder</code> ì— ë“±ë¡í•œ ê²€ì¦ê¸°ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤.</li>
<li><code>ItemValidator</code> ì™€ ê°™ì€ ê²€ì¦ê¸°ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šê³ , ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.</li>
<li>êµ¬ì²´ì ì¸ ì‚¬ìš©ë°©ë²•ì€ ì•„ë˜ì—ì„œ ì„¤ëª…í•œë‹¤.</li>
</ul>
<br/>
<h3 id="codewebdatabindercode--codevalidatedcode---"><code>WebDataBinder</code> ì™€ <code>@Validated</code> ë¥¼ ì ìš©í•œ ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">prac.myPrac.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">...</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ItemController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ItemValidator</span> <span class="n">itemValidator</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">ItemController</span><span class="o">(</span><span class="nc">ItemValidator</span> <span class="n">itemValidator</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">itemValidator</span> <span class="o">=</span> <span class="n">itemValidator</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * dataBinder ëŠ” ë§¤ ìš”ì²­ë§ˆë‹¤ ìƒì„±ëœë‹¤.
     */</span>
    <span class="nd">@InitBinder</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="nc">WebDataBinder</span> <span class="n">dataBinder</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">dataBinder</span><span class="o">.</span><span class="na">addValidators</span><span class="o">(</span><span class="n">itemValidator</span><span class="o">);</span> <span class="c1">//ê²€ì¦ê¸° ë“±ë¡</span>
    <span class="o">}</span>

    <span class="c1">//ì‚¬ìš©ìì—ê²Œ viewë¥¼ ì œê³µ</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/item"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">viewItemForm</span><span class="o">(</span><span class="nd">@ModelAttribute</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"itemform"</span><span class="o">;</span>
    <span class="o">}</span>

		<span class="cm">/**
		 * ë§¤ê°œë³€ìˆ˜ì— @Validatedê°€ ì¶”ê°€ë˜ì—ˆë‹¤.
		 */</span>
    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/item"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">validationWithRejectValue</span><span class="o">(</span><span class="nd">@Validated</span> <span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"item"</span><span class="o">)</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">,</span> <span class="nc">BindingResult</span> <span class="n">bindingResult</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//ê²€ì¦ ì‹¤íŒ¨ì‹œ</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">bindingResult</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"itemform"</span><span class="o">;</span> <span class="c1">//ë‹¤ì‹œ Item ì…ë ¥ í¼ìœ¼ë¡œ</span>
        <span class="o">}</span>

        <span class="c1">//ê²€ì¦ ì„±ê³µì‹œ ë¡œì§...</span>

    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isAppleOver5</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">itemName</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemName</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">itemQuantity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="na">getItemQuantity</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">itemName</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Apple"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">itemQuantity</span><span class="o">&gt;</span><span class="mi">5</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<br/>
<h3 id="section-8">ë™ì‘ ë°©ì‹</h3>
<ol>
<li><code>@Validated</code> ëŠ” ê²€ì¦ê¸°ë¥¼ ì‹¤í–‰í•˜ë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.</li>
<li>ì–´ë–¤ ê²€ì¦ê¸°ë¥¼ ì‹¤í–‰í• ì§€ ì„ íƒí•˜ëŠ” ê¸°ì¤€ì´ ë°”ë¡œ <code>supports()</code> ì´ë‹¤.</li>
<li>ìœ„ ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì‹œì—ì„œëŠ” <code>supports(Item.class)</code> ê°€ í˜¸ì¶œë˜ê³ , ê²°ê³¼ê°€ <code>true</code> ì´ë‹¤.</li>
<li>ë”°ë¼ì„œ, <code>ItemValidator</code> ì˜ <code>validate()</code> ê°€ í˜¸ì¶œëœë‹¤.</li>
</ol>
<br/>
<h3 id="section-9">ì°¸ê³ </h3>
<ul>
<li><code>@Validated</code> ì™€ <code>@Valid</code> ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</li>
<li><code>@Validated</code> ì€ ìŠ¤í”„ë§ ì „ìš© ê²€ì¦ ì• ë…¸í…Œì´ì…˜ì´ë‹¤.</li>
<li><code>@Valid</code> ì€ ìë°” í‘œì¤€ ê²€ì¦ ì• ë…¸í…Œì´ì…˜ì´ë‹¤.</li>
</ul>
<br>
<hr />
<br>
<p><a href="https://inf.run/YPER"><img src="/assets/img/Inflearn_Spring_MVC2/logo.png" width="400px" height="300px"></a></p>
<ul>
<li><em>ë³¸ ê²Œì‹œê¸€ì€ ê¹€ì˜í•œë‹˜ì˜ ê°•ì˜ë¥¼ í† ëŒ€ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.</em></li>
<li><em>ë” ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì´ ê³„ì‹ ë‹¤ë©´, í•´ë‹¹ ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</em></li>
</ul>
:ET