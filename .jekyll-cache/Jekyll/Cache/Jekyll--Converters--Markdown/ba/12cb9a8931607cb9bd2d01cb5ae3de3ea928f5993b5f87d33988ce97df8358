I"°<p><br/><br/></p>
<h1 id="section">ë‹¤ë£° ë‚´ìš©</h1>
<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ë‹¤ë£° ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<ul>
<li><strong>í”„ë¡ì‹œ, ì¦‰ì‹œë¡œë”©, ì§€ì—°ë¡œë”©</strong>
<ul>
<li>í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë©´ ì—°ê´€ëœ ê°ì²´ë¥¼ ì²˜ìŒë¶€í„° DBì—ì„œ ì¡°íšŒí•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
<li>ì‹¤ì œ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— DBì—ì„œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
</ul>
<p>í•˜ë‚˜ì”© ì•Œì•„ë³´ì.</p>
<p><br/><br/><br/></p>
<h1 id="section-1">í”„ë¡ì‹œ</h1>
<h2 id="section-2">í”„ë¡ì‹œê°€ í•„ìš”í•œ ì´ìœ </h2>
<h3 id="section-3">ë°°ê²½</h3>
<ul>
<li><strong>íŠ¹ì • ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œ, ì´ì™€ ì—°ê´€ëœ ì—”í‹°í‹°ë“¤ì´ í•­ìƒ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.</strong>
<ul>
<li>ì˜ˆì‹œ) íšŒì› ì—”í‹°í‹° ì¡°íšŒ ì‹œ, ì´ì™€ ì—°ê´€ëœ íŒ€ ì—”í‹°í‹°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë”°ë¼ ì‚¬ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</li>
<li>ì˜ˆì‹œ ì½”ë“œë¥¼ í†µí•´ ì´ ê²½ìš°ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ì.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-4">ì˜ˆì‹œ ì½”ë“œ: ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°</h3>
<ul>
<li>
<p>íšŒì› ì—”í‹°í‹°</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ì—°ê´€&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@ManyToOne&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//getter, setter ìƒëµ&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
<li>
<p>íŒ€ ì—”í‹°í‹°</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Team</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//getter, setter ìƒëµ&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
<li>
<p>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ - ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ë¡œì§</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">printUserAndTeam</span><span class="o">(</span><span class="nc">String</span> <span class="n">memberId</span><span class="o">)</span> <span class="o">{</span>
	<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">memberId</span><span class="o">);</span>
	<span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">member</span><span class="o">.</span><span class="na">getTeam</span><span class="o">();</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"íšŒì›ì´ë¦„: "</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ì´ë•Œ, ì—°ê´€ëœ ì—”í‹°í‹° teamì´ ì‹¤ì œë¡œ ì‚¬ìš©ëœë‹¤.&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;íŒ€ì´ë¦„: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
<li>
<p>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ - ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¡œì§</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">printUser</span><span class="o">(</span><span class="nc">String</span> <span class="n">memberId</span><span class="o">)</span> <span class="o">{</span>
	<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">memberId</span><span class="o">);</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"íšŒì›ì´ë¦„: "</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>
</li>
</ul>
<br/>
<ul>
<li>ìƒì„¸ ì„¤ëª…
<ul>
<li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— í•´ë‹¹ë˜ëŠ” ë©”ì„œë“œ <code>printUserAndTeam</code> ì€ íšŒì›ê³¼ íŒ€ ì´ë¦„ì„ ì¶œë ¥í•œë‹¤.</li>
<li>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— í•´ë‹¹ë˜ëŠ” ë©”ì„œë“œ <code>printUser</code> ì€ ì˜¤ì§ íšŒì› ì´ë¦„ì„ ì¶œë ¥í•œë‹¤. (ì—°ê´€ëœ ì—”í‹°í‹° Teamì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.)</li>
<li><strong>íšŒì› ì—”í‹°í‹°ë§Œì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, <code>em.find()</code> ë¥¼ í†µí•´ íšŒì›ê³¼ ì—°ê´€ëœ íŒ€ ì—”í‹°í‹°ê¹Œì§€ DBì—ì„œ í•¨ê»˜ ì¡°íšŒí•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë‹¤.</strong></li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-5">í”„ë¡ì‹œì™€ ì§€ì—° ë¡œë”©</h3>
<ul>
<li>ìœ„ ì˜ˆì‹œì˜ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´, <strong>JPAëŠ” ì§€ì—° ë¡œë”©ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µ</strong>í•œë‹¤.
<ul>
<li><strong>ì§€ì—° ë¡œë”©: ì—”í‹°í‹°ê°€ ì‹¤ì œë¡œ ì‚¬ìš©ë  ë•Œê¹Œì§€ DBì¡°íšŒë¥¼ ì§€ì—°í•˜ëŠ” ê²ƒ</strong></li>
<li>ì§€ì—° ë¡œë”© ì˜ˆì‹œ) <code>team.getName()</code> ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ, ê·¸ì œì„œì•¼ team ì—”í‹°í‹°ë¥¼ DBì—ì„œ ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
<li><strong>í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´, ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</strong>
<ul>
<li><strong>í”„ë¡ì‹œ ê°ì²´: ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ ëŒ€ì‹  DB ì¡°íšŒë¥¼ ì§€ì—°í•  ìˆ˜ ìˆëŠ” ê°€ì§œ ê°ì²´</strong></li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-6">í”„ë¡ì‹œ ê¸°ì´ˆ</h2>
<h3 id="codeentitymanagerfindcode-"><code>EntityManager.find()</code> ë©”ì„œë“œ</h3>
<ul>
<li><code>EntityManager.find()</code> ë©”ì„œë“œëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì›í•˜ëŠ” ì—”í‹°í‹°ê°€ ì—†ìœ¼ë©´, DBë¥¼ ì¡°íšŒí•œë‹¤.</li>
<li><strong>ì´ ë©”ì„œë“œë¥¼ í†µí•´ ì—”í‹°í‹°ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ë©´, ì¡°íšŒí•œ ì—”í‹°í‹°ë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ë“  ì‚¬ìš©í•˜ì§€ ì•Šë“  DBë¥¼ ì¡°íšŒí•œë‹¤.</strong></li>
</ul>
<br/>
<h3 id="codeentitymanagergetreferencecode-"><code>EntityManager.getReference()</code> ë©”ì„œë“œ</h3>
<ul>
<li>
<p><code>EntityManager.getReference()</code> ë©”ì„œë“œëŠ” <code>EntityManager.find()</code> ë©”ì„œë“œì™€ëŠ” ë‹¤ë¥´ê²Œ, ì—”í‹°í‹°ë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ì‹œì ê¹Œì§€ DB ì¡°íšŒë¥¼ ë¯¸ë£° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.</p>
</li>
<li>
<p>ì‚¬ìš© ì˜ˆì‹œ ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"member1"</span><span class="o">);</span>
</code></pre></div></div>
</li>
<li>
<p><strong><code>EntityManager.getReference()</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ, DBë¥¼ ì¡°íšŒí•˜ì§€ ì•Šê³  ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤!</strong></p>
<ul>
<li>ëŒ€ì‹ ì— í•´ë‹¹ ë©”ì„œë“œëŠ” DB ì ‘ê·¼ì„ ìœ„ì„í•œ <strong>í”„ë¡ì‹œ ê°ì²´ë¥¼ ë°˜í™˜</strong>í•œë‹¤.</li>
</ul>
</li>
</ul>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2041.png" alt="Untitled" /></p>
<br/>
<h3 id="section-7">í”„ë¡ì‹œì˜ êµ¬ì¡°</h3>
<ul>
<li><strong>í”„ë¡ì‹œëŠ” ì‹¤ì œ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ë§Œë“¤ì–´ì§„ë‹¤.</strong></li>
<li><strong>ë”°ë¼ì„œ, ê²‰ëª¨ì–‘ì€ ì‹¤ì œ í´ë˜ìŠ¤ì™€ ê°™ë‹¤.</strong></li>
</ul>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2042.png" alt="Untitled" /></p>
<br/>
<h3 id="section-8">í”„ë¡ì‹œ ê°ì²´ì˜ ì´ˆê¸°í™”</h3>
<ul>
<li>
<p><strong>í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ì‚¬ìš©ë  ë•Œ DBë¥¼ ì¡°íšŒí•´ì„œ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</strong></p>
<ul>
<li>ì´ê²ƒì„ í”„ë¡ì‹œ <strong>ê°ì²´ ì´ˆê¸°í™”</strong>ë¼ê³  í•œë‹¤.</li>
</ul>
</li>
<li>
<p>í”„ë¡ì‹œ ì´ˆê¸°í™” ì˜ˆì œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//MemberProxyë¥¼ ì‹¤ì œ ì—”í‹°í‹° ëŒ€ì‹  ë°˜í™˜í•œë‹¤.</span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"id1"</span><span class="o">);</span>
<p><span class="c1">//ì•„ë˜ ì½”ë“œ ì‹¤í–‰ì‹œ, í”„ë¡ì‹œ ì´ˆê¸°í™”ê°€ ìˆ˜í–‰ëœë‹¤.</span>
<span class="n">member</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
</code></pre></div></div></p>
</li>
<li>
<p>ê·¸ë ‡ë‹¤ë©´ í”„ë¡ì‹œ í´ë˜ìŠ¤ëŠ” ì–´ë–»ê²Œ ì‘ì„±ë˜ì–´ìˆì„ê¹Œ? ì•„ë˜ ì½”ë“œëŠ” í”„ë¡ì‹œì˜ íŠ¹ì§•ì— ë§ì¶°, ì˜ˆìƒí•œ í”„ë¡ì‹œ í´ë˜ìŠ¤ ë‚´ìš©ì´ë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MemberProxy</span> <span class="kd">extends</span> <span class="nc">Member</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//ì‹¤ì œ ì—”í‹°í‹° ì¡°íšŒì‹œ, ê²°ê³¼ë¥¼ ë‹´ëŠ” í•„ë“œ (ì°¸ì¡°)&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ì˜¤ë²„ë¼ì´ë”©ëœ ë©”ì„œë“œ&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;//ë§Œì•½ ì‹¤ì œ ì—”í‹°í‹°ê°€ ì¡°íšŒëœì  ì—†ë‹¤ë©´: í”„ë¡ì‹œ ì´ˆê¸°í™” ì§„í–‰&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// 1. í”„ë¡ì‹œ ì´ˆê¸°í™” ìš”ì²­&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// 2. DB ì¡°íšŒ&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// 3. ì‹¤ì œ ì—”í‹°í‹° ìƒì„± ë° ì°¸ì¡° ë³´ê´€&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;//ì•„ë˜ ì½”ë“œë¥¼ í†µí•´, ì‹¤ì œ ì—”í‹°í‹°ì˜ ì›í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œ&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// 4. target.getName();&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<blockquote>
<p>ë‹¤ì‹œ ë§í•˜ì§€ë§Œ, ìœ„ ì½”ë“œëŠ” ì´í•´ë¥¼ ìœ„í•œ ì˜ˆìƒ ì½”ë“œì´ë‹¤. ì‹¤ì œ í”„ë¡ì‹œ í´ë˜ìŠ¤ê°€ ìœ„ì™€ ë™ì¼í•˜ê²Œ êµ¬í˜„ë˜ì—ˆë‹¤ëŠ” ì´ì•¼ê¸°ê°€ ì•„ë‹ˆë‹¤.</p>
</blockquote>
</li>
</ul>
<br/>
<ul>
<li>
<p>í”„ë¡ì‹œ ì´ˆê¸°í™” ê³¼ì •</p>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2043.png" alt="Untitled" /></p>
<ol>
<li>í”„ë¡ì‹œ ê°ì²´ì— <code>member.getName()</code> ì„ í˜¸ì¶œí•´ì„œ ì‹¤ì œ ë°ì´í„° ì¡°íšŒë¥¼ ì‹œë„í•œë‹¤.</li>
<li>í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ì—”í‹°í‹°ê°€ ìƒì„±ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì‹¤ì œ ì—”í‹°í‹° ìƒì„±ì„ ìš”ì²­í•œë‹¤. â‡’ ì´ˆê¸°í™”</li>
<li>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” DBë¥¼ ì¡°íšŒí•´ì„œ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</li>
<li>í”„ë¡ì‹œ ê°ì²´ëŠ” ìƒì„±ëœ ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ì˜ ì°¸ì¡°ë¥¼ <code>Memberí˜• target</code> ë©¤ë²„ë³€ìˆ˜ì— ë³´ê´€í•œë‹¤.</li>
<li>í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ì—”í‹°í‹° ê°ì²´ì˜ <code>getName()</code> ì„ í˜¸ì¶œí•´ì„œ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.</li>
</ol>
</li>
</ul>
<br/>
<h3 id="section-9">í”„ë¡ì‹œ íŠ¹ì§•</h3>
<ul>
<li>
<p>í”„ë¡ì‹œ ê°ì²´ëŠ” ì²˜ìŒ ì‚¬ìš©í•  ë•Œ, í•œ ë²ˆë§Œ ì´ˆê¸°í™”ëœë‹¤.</p>
</li>
<li>
<p><strong>í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•´ë„, í”„ë¡ì‹œ ê°ì²´ê°€ ì‹¤ì œ ì—”í‹°í‹°ë¡œ ë°”ë€ŒëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤!</strong></p>
<ul>
<li>í”„ë¡ì‹œ ê°ì²´ ì´ˆê¸°í™”ì‹œ, <strong>í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ì„œ ì‹¤ì œ ì—”í‹°í‹°ì— ì ‘ê·¼</strong>í•  ìˆ˜ ìˆëŠ” ì •ë„ì´ë‹¤.</li>
</ul>
</li>
<li>
<p><strong>í”„ë¡ì‹œ ê°ì²´ëŠ” ì›ë³¸ ì—”í‹°í‹°ë¥¼ ìƒì†ë°›ì€ ê°ì²´ì´ë¯€ë¡œ, íƒ€ì… ì²´í¬ ì‹œì— ì£¼ì˜í•´ì•¼ í•œë‹¤.</strong></p>
</li>
<li>
<p>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì°¾ëŠ” ì—”í‹°í‹°ê°€ ì´ë¯¸ ìˆìœ¼ë©´, <code>em.getReference()</code> ë¥¼ í˜¸ì¶œí•´ë„ ì‹¤ì œ ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•œë‹¤.</p>
<ul>
<li>
<p>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì›í•˜ëŠ” ì—”í‹°í‹°ê°€ ì´ë¯¸ ìˆë‹¤. â‡’ DBë¥¼ ì¡°íšŒí•˜ì§€ ì•Šì•„ë„ ì‹¤ì œ ì—”í‹°í‹°ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.</p>
</li>
<li>
<p>ë”°ë¼ì„œ ì´ ê²½ìš°, í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•  ì´ìœ ê°€ ì—†ë‹¤!<br />
(í”„ë¡ì‹œëŠ” DB ì¡°íšŒë¥¼ ë¯¸ë£¨ë ¤ê³  ì‚¬ìš©í•˜ë¯€ë¡œ)</p>
</li>
<li>
<p>ì¦‰ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2044.png" alt="Untitled" /></p>
</li>
</ul>
</li>
<li>
<p><strong>í”„ë¡ì‹œ ì´ˆê¸°í™”ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë„ì›€ì„ ë°›ì•„ì•¼ ê°€ëŠ¥í•˜ë‹¤!</strong></p>
<ul>
<li>ìœ„ ê·¸ë¦¼ â€˜í”„ë¡ì‹œ ì´ˆê¸°í™” ê³¼ì •â€™ ì„ ë‹¤ì‹œ ë³´ì.</li>
<li>ë”°ë¼ì„œ <strong>ì¤€ì˜ì† ìƒíƒœì˜ í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•˜ë©´ ë¬¸ì œê°€ ë°œìƒ</strong>í•˜ë‹¤.
<ul>
<li>ì´ ê²½ìš°ëŠ” ì•„ë˜ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ì.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-10">ì¤€ì˜ì† ìƒíƒœì™€ ì´ˆê¸°í™”</h3>
<blockquote>
<p>ì°¸ê³ ë¡œ ì¤€ì˜ì† ìƒíƒœì— ëŒ€í•´ ì˜ ëª¨ë¥¸ë‹¤ë©´, <a href="https://taegyunwoo.github.io/jpa/JPA_Persistence1#14">ì´ì „ ê²Œì‹œê¸€</a>ì„ ì°¸ê³ í•˜ì.</p>
</blockquote>
<ul>
<li>ì¤€ì˜ì† ìƒíƒœì—ì„œ í”„ë¡ì‹œ ì´ˆê¸°í™”ë¥¼ ì‹œë„í•˜ëŠ” ì˜ˆì‹œ ì½”ë“œë¥¼ ë¨¼ì € ë³´ì.</li>
</ul>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// member ë³€ìˆ˜ì—ëŠ” í”„ë¡ì‹œ ê°ì²´ê°€ ë‹´ê¸´ë‹¤.</span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"id1"</span><span class="o">);</span>
<span class="n">transaction</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
<span class="n">em</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">// ì´ë•Œ, member ì—”í‹°í‹°ê°€ ì¤€ì˜ì† ìƒíƒœë¡œ ë³€ê²½ëœë‹¤.</span>
<p><span class="n">member</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span> <span class="c1">//ì¤€ì˜ì† ìƒíƒœì—ì„œ ì´ˆê¸°í™” ì‹œë„</span>
<span class="c1">//org.hibernate.LazyInitializationException ì˜ˆì™¸ ë°œìƒ</span>
</code></pre></div></div>
<br/></p>
<ul>
<li>ìƒì„¸ ì„¤ëª…
<ul>
<li><code>member.getName()</code> ì„ í˜¸ì¶œí•˜ë©´ í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•´ì•¼ í•˜ëŠ”ë°, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë¯€ë¡œ ì‹¤ì œ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ìˆ˜ ì—†ë‹¤.
<ul>
<li>ì¦‰ ì´ ê²½ìš°ëŠ”, í”„ë¡ì‹œ ì´ˆê¸°í™”ì— ì‚¬ìš©í•´ì•¼í•  ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš°ì´ë‹¤. (<code>close()</code>)</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-11">í”„ë¡ì‹œì™€ ì‹ë³„ì</h3>
<ul>
<li>
<p>ì—”í‹°í‹°ë¥¼ í”„ë¡ì‹œë¡œ ì¡°íšŒí•  ë•Œ, ì‹ë³„ì(PK) ê°’ì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ê²Œ ëœë‹¤.</p>
<ul>
<li><code>em.getReference(A.class, &quot;PKê°’&quot;)</code></li>
</ul>
</li>
<li>
<p><strong>ì´ë•Œ ì´ PK ê°’ì„ í”„ë¡ì‹œ ê°ì²´ê°€ ë³´ê´€í•œë‹¤.</strong></p>
</li>
<li>
<p>í”„ë¡ì‹œ ê°ì²´ì—ì„œ â€˜í•´ë‹¹ PK ê°’ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒâ€™ìœ¼ë¡œëŠ” í”„ë¡ì‹œ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.</p>
</li>
<li>
<p>ì¦‰, ì•„ë˜ì™€ ê°™ë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ë³€ìˆ˜ teamì— í”„ë¡ì‹œ ê°ì²´ë¥¼ ë‹´ìŒ</span>
<span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="nc">Team</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"team1"</span><span class="o">);</span> <span class="c1">// ì‹ë³„ì ë³´ê´€</span>
<p><span class="n">team</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span> <span class="c1">//í”„ë¡ì‹œ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤!!!</span>
</code></pre></div></div></p>
<ul>
<li>
<p><strong><code>team.getId()</code> ë¥¼ í˜¸ì¶œí•œ ê²½ìš°, í”„ë¡ì‹œ ì´ˆê¸°í™”ê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.</strong></p>
<ul>
<li>ì™œëƒí•˜ë©´ ì‹ë³„ìëŠ” DBì¡°íšŒ ì—†ì´ë„ ì•Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</li>
</ul>
</li>
<li>
<p>ë‹¨, <code>@Access(AccessType.PROPERTY)</code> ë¡œ ì„¤ì •í•œ ê²½ìš°ì—ë§Œ í•´ë‹¹ëœë‹¤.</p>
</li>
<li>
<p><code>@Access(AccessType.FIELD)</code> ë¡œ ì„¤ì •í•œ ê²½ìš°, ìœ„ì™€ ê°™ì€ ìƒí™©ì´ë”ë¼ë„ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•œë‹¤.</p>
<ul>
<li>ì™œëƒí•˜ë©´ <code>FIELD</code> ë¡œ ì„¤ì •ì‹œ, JPAëŠ” <code>getId()</code> ë¼ëŠ” ë©”ì†Œë“œê°€ idë§Œ ì¡°íšŒí•˜ëŠ” ë©”ì†Œë“œì¸ì§€, ë‹¤ë¥¸ í•„ë“œê¹Œì§€ í™œìš©í•˜ëŠ” ë©”ì†Œë“œì¸ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.</li>
<li>ì¦‰, <code>getId()</code> ë©”ì„œë“œê°€ getterë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.</li>
</ul>
<blockquote>
<p><code>@Access</code> ì— ëŒ€í•œ ë‚´ìš©ì€ <a href="https://taegyunwoo.github.io/jpa/JPA_FieldAndColumnReference#8">ì´ì „ ê²Œì‹œê¸€</a>ì„ ì°¸ê³ í•˜ì.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>
<p>í”„ë¡ì‹œëŠ” ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•  ë•Œ, ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"member1"</span><span class="o">);</span> <span class="c1">//ì‹¤ì œ ì—”í‹°í‹°</span>
<span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getReference</span><span class="o">(</span><span class="nc">Team</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"team1"</span><span class="o">);</span> <span class="c1">//í”„ë¡ì‹œ ê°ì²´</span>
<p><span class="n">member</span><span class="o">.</span><span class="na">setTeam</span><span class="o">(</span><span class="n">team</span><span class="o">);</span> <span class="c1">//ì—°ê´€ê´€ê³„ ì„¤ì •</span>
</code></pre></div></div></p>
<ul>
<li>JPAëŠ” ì—°ê´€ê´€ê³„ ì„¤ì •ì‹œ, ì‹ë³„ì(PK) ê°’ì„ ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•œë‹¤.</li>
<li><strong>ì¦‰ ì—°ê´€ê´€ê³„ ì„¤ì •ì— í•„ìš”í•œ ê°’ì€ ì‹ë³„ì ê°’ë°–ì— ì—†ìœ¼ë¯€ë¡œ, í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</strong></li>
</ul>
<blockquote>
<p>ì°¸ê³ ë¡œ ì—°ê´€ê´€ê³„ ì„¤ì •ì‹œì—ëŠ” <code>FIELD</code> ì ‘ê·¼ ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•´ë„ í”„ë¡ì‹œë¥¼ ì´ˆê¸°í™”í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>
</blockquote>
</li>
</ul>
<br/>
<h3 id="section-12">í”„ë¡ì‹œ í™•ì¸</h3>
<ul>
<li><strong>í”„ë¡ì‹œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ˆê¸°í™” ì—¬ë¶€ í™•ì¸í•˜ê¸°</strong>
<ul>
<li>
<p><code>PersistenceUnitUtil.isLoaded(Object entity)</code> ë©”ì„œë“œ</p>
<ul>
<li>ì´ˆê¸°í™” X â‡’ false</li>
<li>ì´ˆê¸°í™” O â‡’ true</li>
</ul>
</li>
<li>
<p>ì˜ˆì‹œ ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">boolean</span> <span class="n">isLoad</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getEntityManagerFactory</span><span class="o">()</span>
				<span class="o">.</span><span class="na">getPersistenceUnitUtil</span><span class="o">().</span><span class="na">isLoaded</span><span class="o">(</span><span class="n">í™•ì¸í• _í”„ë¡ì‹œ_ì—”í‹°í‹°</span><span class="o">);</span>
</code></pre></div></div>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>ì‹¤ì œ ì—”í‹°í‹°ì¸ì§€, í”„ë¡ì‹œ ê°ì²´ì¸ì§€ í™•ì¸í•˜ê¸°</strong>
<ul>
<li>
<p>í´ë˜ìŠ¤ëª…ì„ ì§ì ‘ ì¶œë ¥í•˜ì—¬ í™•ì¸</p>
</li>
<li>
<p>í´ë˜ìŠ¤ ëª… ë’¤ì— <code>javassist</code> ë‹¨ì–´ê°€ ë¶™ìœ¼ë©´ í”„ë¡ì‹œ ê°ì²´ì´ë‹¤.</p>
</li>
<li>
<p>ì˜ˆì‹œ ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
</code></pre></div></div>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>í”„ë¡ì‹œ ê°•ì œ ì´ˆê¸°í™”í•˜ê¸°</strong>
<ul>
<li><code>org.hibernate.Hibernate.initialize(í”„ë¡ì‹œ_ê°ì²´)</code></li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-13">ì¦‰ì‹œ ë¡œë”©ê³¼ ì§€ì—° ë¡œë”©</h2>
<h3 id="section-14">ì¦‰ì‹œ ë¡œë”©ê³¼ ì§€ì—° ë¡œë”© ìš”ì•½</h3>
<ul>
<li><strong>ì¦‰ì‹œ ë¡œë”©</strong>
<ul>
<li>ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œ, ì—°ê´€ëœ ì—”í‹°í‹°ë„ í•¨ê»˜ ì¡°íšŒí•œë‹¤.</li>
<li>ì˜ˆì‹œ
<ul>
<li><code>em.find(Member.class, &quot;member1&quot;)</code> ì„ í˜¸ì¶œí•  ë•Œ, íšŒì› ì—”í‹°í‹°ì™€ ì—°ê´€ëœ íŒ€ ì—”í‹°í‹°ë„ í•¨ê»˜ ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
<li>ì„¤ì • ë°©ë²•
<ul>
<li><code>@ManyToOne(fetch = FetchType.EAGER)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>ì§€ì—° ë¡œë”©</strong>
<ul>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì‹¤ì œ ì‚¬ìš©í•  ë•Œ ì¡°íšŒí•œë‹¤.</li>
<li>ì˜ˆì‹œ
<ul>
<li><code>member.getTeam().getName()</code> ì²˜ëŸ¼ ì¡°íšŒí•œ íŒ€ ì—”í‹°í‹°ë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— JPAê°€ SQLì„ í˜¸ì¶œí•´ì„œ íŒ€ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
<li>ì„¤ì • ë°©ë²•
<ul>
<li><code>@ManyToOne(fetch = FetchType.LAZY)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ê°ê°ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ì.</p>
<br/>
<h3 id="eager-loading">ì¦‰ì‹œ ë¡œë”© (Eager Loading)</h3>
<ul>
<li>ì¦‰ì‹œ ë¡œë”©ì„ ì‚¬ìš©í•˜ë ¤ë©´, <code>@ManyToOne</code> ì˜ ì†ì„± <code>fetch</code>ë¥¼ <code>FetchType.EAGER</code> ë¡œ ì§€ì •í•œë‹¤.</li>
</ul>
<br/>
<ul>
<li>ì˜ˆì‹œ ì½”ë“œ
<ul>
<li>
<p>ì¦‰ì‹œ ë¡œë”© ì„¤ì •</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@ManyToOne&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FetchType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;EAGER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;TEAM_ID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
<li>
<p>ì¦‰ì‹œ ë¡œë”© ì‹¤í–‰ ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//ì•„ë˜ ì½”ë“œ ì‹¤í–‰ ì‹œ, ì—°ê´€ëœ ì—”í‹°í‹° Teamë„ ê°™ì´ ì¡°íšŒëœë‹¤.</span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"member1"</span><span class="o">);</span>
<span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">member</span><span class="o">.</span><span class="na">getTeam</span><span class="o">();</span> <span class="c1">//ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰</span>
</code></pre></div></div>
</li>
<li>
<p>ì‹œê°í™”</p>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2045.png" alt="Untitled" /></p>
</li>
<li>
<p>ìƒì„¸ ì„¤ëª…</p>
<ul>
<li><code>em.find(Member.class, &quot;member1&quot;)</code> ë¡œ íšŒì›ì„ ì¡°íšŒí•˜ëŠ” ìˆœê°„ íŒ€ë„ í•¨ê»˜ ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>JPA êµ¬í˜„ì²´ë“¤ì€ ì¦‰ì‹œ ë¡œë”©ì„ ìµœì í™”í•˜ê¸° ìœ„í•´, ê°€ëŠ¥í•˜ë©´ ì¡°ì¸ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.</strong>
<ul>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ê¹Œì§€ ë™ì‹œì— ì¡°íšŒì‹œ
<ul>
<li>â€œê¸°ì¡´ ì—”í‹°í‹° SELECT í›„, ì—°ê´€ëœ ì—”í‹°í‹° SELECTâ€ ë°©ì‹ ì‚¬ìš© X</li>
<li><strong>â€œë‘ í…Œì´ë¸”ì„ ì™¸ë¶€ ì¡°ì¸í•˜ì—¬, ê¸°ì¡´ ì—”í‹°í‹°ì™€ ì—°ê´€ ì—”í‹°í‹° ëª¨ë‘ í•œë²ˆì— SELECTâ€ ë°©ì‹ ì‚¬ìš© O</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="null--jpa--">ì¦‰ì‹œ ë¡œë”©: NULL ì œì•½ì¡°ê±´ê³¼ JPA ì¡°ì¸ ì „ëµ</h3>
<ul>
<li>
<p>ì¦‰ì‹œ ë¡œë”© ì‹œ, <strong>ì™¸ë¶€ì¡°ì¸</strong>ì„ ì‚¬ìš©í•˜ì—¬ í•œë²ˆì— ì—°ê´€ ì—”í‹°í‹°ê¹Œì§€ ì¡°íšŒí•œë‹¤.</p>
</li>
<li>
<p>ì™¸ë¶€ì¡°ì¸ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ </p>
<ul>
<li><strong>í…Œì´ë¸”ì˜ FK ì¹¼ëŸ¼ì— NOT NULL ì œì•½ì¡°ê±´ì´ ì—†ì„ ë•Œë¥¼ ëŒ€ë¹„í•˜ê¸° ìœ„í•´ ì™¸ë¶€ì¡°ì¸ì„ ì‚¬ìš©í•œë‹¤.</strong></li>
<li>FK ì¹¼ëŸ¼ì— nullì´ í—ˆìš©ë  ë•Œ, ë‚´ë¶€ì¡°ì¸ì„ ì‚¬ìš©í•˜ë©´ ëˆ„ë½ë˜ëŠ” ë°ì´í„°ê°€ ë§ë‹¤.</li>
</ul>
</li>
<li>
<p>í•˜ì§€ë§Œ ì„±ëŠ¥ìƒ ë‚´ë¶€ì¡°ì¸ì´ ì¢‹ë‹¤.</p>
<ul>
<li>
<p>ì™¸ë˜í‚¤ì— NOT NULL ì œì•½ì¡°ê±´ì´ ê±¸ë¦¬ë©´, ë‚´ë¶€ì¡°ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li>
<p><strong>ë”°ë¼ì„œ ì™¸ë˜í‚¤ì— NOT NULL ì œì•½ì¡°ê±´ì´ ê±¸ë¦¬ë©´, <code>@JoinColumn</code> ì˜ ì†ì„± <code>nullable</code> ì„ <code>false</code> ë¡œ ì„¤ì •í•˜ì—¬ JPAì—ì„œ ë‚´ë¶€ì¡°ì¸ì„ ì‚¬ìš©í•˜ë¼ê³  ì•Œë¦´ ìˆ˜ ìˆë‹¤.</strong></p>
</li>
<li>
<p><strong>í˜¹ì€ <code>@JoinColumn</code> ì˜ ì†ì„± <code>optional</code> ì„ <code>false</code> ë¡œ ì„¤ì •í•´ë„ ëœë‹¤.</strong></p>
</li>
<li>
<p>ì˜ˆì‹œ ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@ManyToOne&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FetchType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;EAGER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;TEAM_ID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nullable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//ë‚´ë¶€ì¡°ì¸ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ì•Œë¦°ë‹¤.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
</ul>
</li>
<li>
<p>ì •ë¦¬</p>
<ul>
<li>ì„ íƒì  ê´€ê³„ â‡’ ì™¸ë¶€ì¡°ì¸</li>
<li>í•„ìˆ˜ ê´€ê³„ â‡’ ë‚´ë¶€ì¡°ì¸ (ì„±ëŠ¥ì´ ë” ì¢‹ìŒ)</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-15">ì§€ì—° ë¡œë”©</h3>
<ul>
<li>ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•˜ë ¤ë©´, <code>@ManyToOne</code> ì˜ <code>fetch</code> ì†ì„±ì„ <code>FetchType.LAZY</code> ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤.</li>
<li>ì˜ˆì‹œ ì½”ë“œ
<ul>
<li>
<p>ì§€ì—° ë¡œë”© ì„¤ì •</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@ManyToOne&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FetchType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LAZY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@JoinColumn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;TEAM_ID&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
</li>
<li>
<p>ì§€ì—° ë¡œë”© ì‹¤í–‰ ì½”ë“œ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//member = ì‹¤ì œ ì—”í‹°í‹°, member.team = í”„ë¡ì‹œ ê°ì²´</span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"member1"</span><span class="o">);</span>
<p><span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="n">member</span><span class="o">.</span><span class="na">getTeam</span><span class="o">();</span> <span class="c1">//ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰</span></p>
<p><span class="c1">//team ê°ì²´ ì‹¤ì œ ì‚¬ìš©</span>
<span class="n">team</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span> <span class="c1">//ì´ë•Œ, í”„ë¡ì‹œ ì´ˆê¸°í™” (team ì¡°íšŒ)</span>
</code></pre></div></div></p>
</li>
<li>
<p>ì‹œê°í™”</p>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2046.png" alt="Untitled" /></p>
</li>
<li>
<p>ìƒì„¸ ì„¤ëª…</p>
<ul>
<li><code>em.find(Member.class, &quot;member1&quot;)</code> ì„ í˜¸ì¶œí•˜ë©´, íšŒì›ë§Œ ì¡°íšŒí•˜ê³  íŒ€ì€ ì¡°íšŒí•˜ì§€ ì•ŠëŠ”ë‹¤.
<ul>
<li>ë‹¨, íšŒì›ì˜ <code>team</code> ë©¤ë²„ë³€ìˆ˜ì— í”„ë¡ì‹œ ê°ì²´ë¥¼ ë„£ì–´ë‘”ë‹¤.</li>
</ul>
</li>
<li><code>Team team = member.getTeam();</code>
<ul>
<li>í•´ë‹¹ ì½”ë“œì—ì„œ team ë³€ìˆ˜ì—ëŠ” í”„ë¡ì‹œ ê°ì²´ê°€ ë“¤ì–´ê°„ë‹¤.</li>
<li>ì´ í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ì‚¬ìš©ë  ë•Œê¹Œì§€ ë°ì´í„° ë¡œë”©ì„ ë¯¸ë£¬ë‹¤.</li>
</ul>
</li>
<li><code>team.getName();</code>
<ul>
<li>ì´ë•Œ ì‹¤ì œ ë°ì´í„° ë¡œë”©ì„ ì§„í–‰í•œë‹¤. (í”„ë¡ì‹œ ì´ˆê¸°í™”)</li>
<li>ì¡°íšŒ ëŒ€ìƒì´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìˆìœ¼ë©´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•  ì´ìœ ê°€ ì—†ë‹¤. (ìœ„ì—ì„œ ì„¤ëª…í•œ â€˜í”„ë¡ì‹œ íŠ¹ì§•â€™ ì°¸ê³ )</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-16">ì¦‰ì‹œ ë¡œë”©, ì§€ì—° ë¡œë”© ì •ë¦¬</h3>
<ul>
<li><strong>ì§€ì—° ë¡œë”© (Lazy Loading)</strong>
<ul>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ í”„ë¡ì‹œë¡œ ì¡°íšŒí•œë‹¤.</li>
<li>í”„ë¡ì‹œë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•  ë•Œ, ì´ˆê¸°í™”í•˜ë©´ì„œ DBë¥¼ ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
<li><strong>ì¦‰ì‹œ ë¡œë”© (Eager Loading)</strong>
<ul>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì¦‰ì‹œ ì¡°íšŒí•œë‹¤.</li>
<li>í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ê°€ëŠ¥í•˜ë©´ SQL ì¡°ì¸ì„ ì‚¬ìš©í•´ì„œ í•œë²ˆì— ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
</ul>
<p><br/><br/></p>
<h2 id="section-17">ì§€ì—° ë¡œë”© í™œìš©</h2>
<h3 id="section-18">ì‚¬ë‚´ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œ</h3>
<p>ì§€ì—° ë¡œë”©ì„ í™œìš©í•˜ëŠ” ì˜ˆì‹œë¥¼ ë“¤ì–´, ì§€ì—° ë¡œë”©ì´ ì–´ë–»ê²Œ í™œìš©ë  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì. â€˜ì‚¬ë‚´ ì£¼ë¬¸ ê´€ë¦¬ ì‹œìŠ¤í…œâ€™ì„ ì˜ˆì‹œë¡œ ì‚¼ê² ë‹¤.</p>
<br/>
<ul>
<li>ì˜ˆì‹œ
<ul>
<li>
<p>í´ë˜ìŠ¤ ëª¨ë¸</p>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2047.png" alt="Untitled" /></p>
</li>
<li>
<p>ëª¨ë¸ ë¶„ì„</p>
<ul>
<li>íšŒì›ì€ íŒ€ í•˜ë‚˜ì—ë§Œ ì†Œì†í•  ìˆ˜ ìˆë‹¤. (N:1)</li>
<li>íšŒì›ì€ ì—¬ëŸ¬ ì£¼ë¬¸ë‚´ì—­ì„ ê°€ì§„ë‹¤. (1:N)</li>
<li>ì£¼ë¬¸ë‚´ì—­ì€ ìƒí’ˆì •ë³´ë¥¼ ê°€ì§„ë‹¤. (N:1)</li>
</ul>
</li>
<li>
<p>ë¡œì§ ë¶„ì„</p>
<ul>
<li><code>Member</code>ì™€ ì—°ê´€ëœ <code>Team</code>ì€ ìì£¼ í•¨ê»˜ ì‚¬ìš©ë˜ì—ˆë‹¤.
<ul>
<li>ê·¸ë˜ì„œ <code>Member</code> ì™€ <code>Team</code> ì„ ì¦‰ì‹œ ë¡œë”©ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.</li>
</ul>
</li>
<li><code>Member</code>ì™€ ì—°ê´€ëœ <code>Order</code>ì€ ê°€ë” í•¨ê»˜ ì‚¬ìš©ë˜ì—ˆë‹¤.
<ul>
<li>ê·¸ë˜ì„œ <code>Member</code> ì™€ <code>Order</code> ì„ ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.</li>
</ul>
</li>
<li><code>Order</code>ì™€ ì—°ê´€ëœ <code>Product</code>ì€ ìì£¼ í•¨ê»˜ ì‚¬ìš©ë˜ì—ˆë‹¤.
<ul>
<li>ê·¸ë˜ì„œ <code>Order</code>ì™€ <code>Product</code>ì„ ì¦‰ì‹œ ë¡œë”©ìœ¼ë¡œ ì„¤ì •í–ˆë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>
<p>ì˜ˆì‹œ ì½”ë“œ: íšŒì› ì—”í‹°í‹°</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<pre><code>&lt;span class=&quot;nd&quot;&gt;@Id&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ì¦‰ì‹œ&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@ManyToOne&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FetchType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;EAGER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ì§€ì—°&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@OneToMany&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mappedBy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;member&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FetchType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LAZY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Order&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orders&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
</code></pre>
<p><span class="o">}</span>
</code></pre></div></div></p>
<ul>
<li>
<p>íšŒì›ê³¼ íŒ€ì˜ ì—°ê´€ê´€ê³„ë¥¼ <code>FetchType.EAGER</code> ë¡œ ì„¤ì •í–ˆë‹¤.</p>
<ul>
<li>ë”°ë¼ì„œ íšŒì› ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ë©´ ì—°ê´€ëœ íŒ€ ì—”í‹°í‹°ë„ ì¦‰ì‹œ ì¡°íšŒí•œë‹¤.</li>
</ul>
</li>
<li>
<p>íšŒì›ê³¼ ì£¼ë¬¸ë‚´ì—­ì˜ ì—°ê´€ê´€ê³„ë¥¼ <code>FetchType.LAZY</code> ë¡œ ì„¤ì •í–ˆë‹¤.</p>
<ul>
<li>ë”°ë¼ì„œ íšŒì› ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ë©´ ì—°ê´€ëœ ì£¼ë¬¸ë‚´ì—­ ì—”í‹°í‹°ëŠ” í”„ë¡ì‹œë¡œ ì¡°íšŒí•´ì„œ ì‹¤ì œ ì‚¬ìš©ë  ë•Œê¹Œì§€ ë¡œë”©ì„ ì§€ì—°í•œë‹¤.</li>
</ul>
</li>
<li>
<p>ì‹œê°í™”</p>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2048.png" alt="Untitled" /></p>
</li>
<li>
<p>íšŒì› ì¡°íšŒì‹œ</p>
<ul>
<li>ì™¸ë¶€ì¡°ì¸ì„ ì‚¬ìš©í•˜ì—¬ Member ì—”í‹°í‹°ì™€ Team ì—”í‹°í‹°ë¥¼ ë™ì‹œ SELECT í•œë‹¤.</li>
<li>Order ì—”í‹°í‹° ëŒ€ì‹  í”„ë¡ì‹œ ê°ì²´ê°€ ì¡°íšŒëœë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<h3 id="section-19">í”„ë¡ì‹œì™€ ì»¬ë ‰ì…˜ ë˜í¼</h3>
<ul>
<li>ìœ„ ì˜ˆì‹œì—ì„œ ì¦‰ì‹œ ë¡œë”©ì„ ìœ„ì£¼ë¡œ ì„¤ëª…í–ˆë‹¤.</li>
<li>ê·¸ë ‡ë‹¤ë©´ ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•œ <code>List&lt;Order&gt; orders</code> ëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬ë ê¹Œ? ì˜ˆì‹œ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ì.</li>
</ul>
<br/>
<ul>
<li>
<p>ì˜ˆì‹œ ì½”ë“œ: ì£¼ë¬¸ë‚´ì—­ ì¡°íšŒ</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"member1"</span><span class="o">);</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">orders</span> <span class="o">=</span> <span class="n">member</span><span class="o">.</span><span class="na">getOrders</span><span class="o">();</span> <span class="c1">//ì»¬ë ‰ì…˜í˜• í”„ë¡ì‹œê°€ ë“¤ì–´ê°</span>
<p><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">â€œorders = â€œ</span> <span class="o">+</span> <span class="n">orders</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
<span class="c1">//ê²°ê³¼: order = org.hibernate.collection.internal.PersistentBag</span>
</code></pre></div></div></p>
<ul>
<li>ìƒì„¸ ì„¤ëª…
<ul>
<li>ì¶œë ¥ ê²°ê³¼ê°€ ì´ìƒí•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</li>
<li><strong>ì—”í‹°í‹°ë¥¼ ì˜ì† ìƒíƒœë¡œ ë§Œë“¤ ë•Œ, í•´ë‹¹ ì—”í‹°í‹°ì— ì»¬ë ‰ì…˜ì´ ìˆìœ¼ë©´ ì»¬ë ‰ì…˜ì„ ì¶”ì Â·ê´€ë¦¬í•  ëª©ì ìœ¼ë¡œ, ì›ë³¸ ì»¬ë ‰ì…˜ì„ â€˜í•˜ì´ë²„ë„¤ì´íŠ¸ ìì²´ ë‚´ì¥ ì»¬ë ‰ì…˜â€™ìœ¼ë¡œ ë³€ê²½í•œë‹¤.</strong></li>
<li>ì´ â€˜í•˜ì´ë²„ë„¤ì´íŠ¸ ìì²´ ë‚´ì¥ ì»¬ë ‰ì…˜â€™ì„ <strong>ì»¬ë ‰ì…˜ ë˜í¼</strong>ë¼ê³  í•œë‹¤.</li>
<li>ë”°ë¼ì„œ ì¶œë ¥ ê²°ê³¼ê°€ â€˜~.PersistentBagâ€™ ìœ¼ë¡œ ë‚˜ì˜¨ ê²ƒì´ë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>ì»¬ë ‰ì…˜ ë˜í¼
<ul>
<li>ì»¬ë ‰ì…˜ ë˜í¼ëŠ” ì»¬ë ‰ì…˜ì˜ ì§€ì—° ë¡œë”©ì„ ì²˜ë¦¬í•´ì¤€ë‹¤.</li>
<li>ì¦‰ ì•„ë˜ì™€ ê°™ì´ ìƒê°í•˜ë©´ ì‰½ë‹¤.
<ul>
<li><strong>ì»¬ë ‰ì…˜ ë˜í¼ = ì»¬ë ‰ì…˜ìš© í”„ë¡ì‹œ</strong></li>
</ul>
</li>
<li><strong>ì»¬ë ‰ì…˜ ë˜í¼ê°€ í”„ë¡ì‹œ ì´ˆê¸°í™”ë˜ëŠ” ê²½ìš°</strong>
<ul>
<li><code>member.getOrders()</code> â‡’ í”„ë¡ì‹œ ì´ˆê¸°í™” X</li>
<li><code>member.getOrders().get(0)</code> â‡’ í”„ë¡ì‹œ ì´ˆê¸°í™” O</li>
<li>ì¦‰ ì»¬ë ‰ì…˜ì—ì„œ ì‹¤ì œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•Œ, DBì—ì„œ ì¡°íšŒí•˜ì—¬ ì´ˆê¸°í™”í•œë‹¤.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li>
<p>ì°¸ê³ </p>
<ul>
<li><code>member.getOrders()</code> ê°€ ì´ˆê¸°í™”ë  ë•Œ, ìƒí’ˆ(Product)ë„ ê°™ì´ ì¡°íšŒëœë‹¤.</li>
<li>ì™œëƒí•˜ë©´ ì£¼ë¬¸(Order)ì™€ ìƒí’ˆ(Product)ê°€ ì¦‰ì‹œ ë¡œë”©ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</li>
</ul>
</li>
<li>
<p>ì‹œê°í™”</p>
</li>
</ul>
<p><img src="/assets/img/2021-11-14-JPA_Proxy/Untitled%2049.png" alt="Untitled" /></p>
<br/>
<h3 id="jpa---">JPA ê¸°ë³¸ í˜ì¹˜ ì „ëµ</h3>
<ul>
<li>
<p><code>fetch</code> ì†ì„±ì˜ ê¸°ë³¸ ì„¤ì •ê°’ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<ul>
<li><code>@ManyToOne</code> , <code>@OneToOne</code> : ì¦‰ì‹œ ë¡œë”©</li>
<li><code>@OneToMany</code> , <code>@ManyToMany</code> : ì§€ì—° ë¡œë”©</li>
</ul>
</li>
<li>
<p>JPAì˜ ê¸°ë³¸ í˜ì¹˜(Fetch) ì „ëµ</p>
<ul>
<li><strong>ì¦‰ì‹œë¡œë”©: ì—°ê´€ëœ ì—”í‹°í‹°ê°€ í•˜ë‚˜ì¼ë•Œ</strong></li>
<li><strong>ì§€ì—°ë¡œë”©: ì—°ê´€ëœ ì—”í‹°í‹°ê°€ ì»¬ë ‰ì…˜í˜•ìœ¼ë¡œ ì²˜ë¦¬ë  ë•Œ</strong></li>
</ul>
</li>
<li>
<p>ì»¬ë ‰ì…˜ì— ì—°ê´€ ì—”í‹°í‹°ë¥¼ ë‹´ì„ ë•Œ, ì§€ì—°ë¡œë”©ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì´ìœ </p>
<ul>
<li>ì—°ê´€ëœ ì—”í‹°í‹°ì˜ ê°œìˆ˜ê°€ ìˆ˜ë§Œ ê±´ì¼ ë•Œ, ì¦‰ì‹œë¡œë”©ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ë©´ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì´ë‹¤.</li>
<li>ë°˜ë©´ì— ì—°ê´€ëœ ì—”í‹°í‹°ê°€ í•˜ë‚˜ë©´ ì¦‰ì‹œ ë¡œë”©í•´ë„ í° ë¬¸ì œê°€ ë°œìƒí•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.</li>
</ul>
</li>
<li>
<p><strong>ê¶Œì¥í•˜ëŠ” ì „ëµ</strong></p>
<ul>
<li><strong>ëª¨ë“  ì—°ê´€ê´€ê³„ì— ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•˜ë¼!</strong></li>
<li><strong>ê·¸ë¦¬ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì´ ì–´ëŠì •ë„ ëë‚ ë•Œ, ê¼­ í•„ìš”í•œ ê³³ì—ë§Œ ì¦‰ì‹œ ë¡œë”©ì„ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•˜ë¼!</strong></li>
</ul>
</li>
<li>
<p>ì—¬ê¸°ì„œ ì•Œ ìˆ˜ ìˆëŠ” JPAì˜ ì¥ì </p>
<ul>
<li>SQLì„ ì§ì ‘ ë‹¤ë£¬ë‹¤ë©´, ìœ„ì™€ ê°™ì€ ê¶Œì¥ ì „ëµì„ ì‚¬ìš©í•˜ê¸° ì–´ë µë‹¤. ë§ì€ SQLê³¼ ì½”ë“œë¥¼ ì¼ì¼ì´ ìˆ˜ì •í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</li>
<li>í•˜ì§€ë§Œ JPAë¥¼ ì‚¬ìš©í•˜ë©´, ë¹„êµì  ì†ì‰½ê²Œ ë¡œë”© ì„¤ì •ì„ ë°”ê¿€ ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
</ul>
<br/>
<h3 id="fetchtypeeager---">ì»¬ë ‰ì…˜ì— FetchType.EAGER ì‚¬ìš© ì‹œ ì£¼ì˜ì </h3>
<ul>
<li>
<p><strong>ì»¬ë ‰ì…˜ì„ í•˜ë‚˜ ì´ìƒ ì¦‰ì‹œ ë¡œë”©í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.</strong></p>
<ul>
<li>ì»¬ë ‰ì…˜ê³¼ ì¡°ì¸í•˜ëŠ” ê²ƒ â‡’ ì¼ëŒ€ë‹¤ ì¡°ì¸</li>
<li>ì„œë¡œ ë‹¤ë¥¸ ì»¬ë ‰ì…˜ì„ 2ê°œ ì´ìƒ ì¡°ì¸í•œë‹¤ë©´, ë„ˆë¬´ ë§ì€ ë°ì´í„°ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.</li>
<li>ë”°ë¼ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ì´ ì €í•˜ë  ìˆ˜ ìˆë‹¤.</li>
</ul>
</li>
<li>
<p><strong>ì»¬ë ‰ì…˜ ì¦‰ì‹œ ë¡œë”©ì€ í•­ìƒ ì™¸ë¶€ ì¡°ì¸ì„ ì‚¬ìš©í•œë‹¤.</strong></p>
</li>
<li>
<p><strong>ì¡°ì¸ ì „ëµ ì •ë¦¬</strong></p>
<ul>
<li><code>@ManyToOne</code> , <code>@OneToOne</code>
<ul>
<li><code>(optional = false)</code> : ë‚´ë¶€ì¡°ì¸</li>
<li><code>(optional = true)</code> : ì™¸ë¶€ì¡°ì¸</li>
</ul>
</li>
<li><code>@OneToMany</code> , <code>@ManyToMany</code>
<ul>
<li><code>(optional = false)</code> : ì™¸ë¶€ì¡°ì¸</li>
<li><code>(optional = true)</code> : ì™¸ë¶€ì¡°ì¸</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><br><br></p>
<hr />
<br>
<div style="font-style: italic;color: gray;">
  <ul>
    <li>ê¹€ì˜í•œ, ã€ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°ã€, ì—ì´ì½˜</li>
  </ul>
  ë³¸ ê²Œì‹œê¸€ì€ ìœ„ êµì¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.
</div>
:ET